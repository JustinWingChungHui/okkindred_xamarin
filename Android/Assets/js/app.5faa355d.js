(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"005a":function(e,t,a){},"0175":function(e,t,a){"use strict";var n=a("2d7e"),i=a.n(n);i.a},"019f":function(e,t,a){"use strict";var n=a("2ad1"),i=a.n(n);i.a},"0242":function(e,t,a){},"034f":function(e,t,a){"use strict";var n=a("64a9"),i=a.n(n);i.a},"03ff":function(e,t,a){"use strict";var n=a("2b97"),i=a.n(n);i.a},"069c":function(e,t,a){"use strict";var n=a("7b4e"),i=a.n(n);i.a},"06c2":function(e,t,a){},"0764":function(e,t,a){"use strict";var n=a("a463"),i=a.n(n);i.a},"0825":function(e,t,a){"use strict";var n=a("931f"),i=a.n(n);i.a},"0899":function(e,t,a){},"0e1e":function(e,t,a){},1:function(e,t){},"10a8":function(e,t,a){},"121b":function(e,t,a){},1593:function(e,t,a){},"15c8":function(e,t,a){"use strict";var n=a("4e77"),i=a.n(n);i.a},1699:function(e,t,a){"use strict";var n=a("4b03"),i=a.n(n);i.a},"18ee":function(e,t,a){},"1ae6":function(e,t,a){"use strict";var n=a("5337"),i=a.n(n);i.a},"1bee":function(e,t,a){"use strict";var n=a("660d"),i=a.n(n);i.a},"1c72":function(e,t,a){"use strict";var n=a("42c2"),i=a.n(n);i.a},2:function(e,t){},"20c3":function(e,t,a){},"216f":function(e,t,a){},"23bb":function(e,t,a){"use strict";var n=a("69f1"),i=a.n(n);i.a},2423:function(e,t,a){"use strict";var n=a("4b8d"),i=a.n(n);i.a},2799:function(e,t,a){},"28b3":function(e,t,a){},"28bb":function(e,t,a){"use strict";var n=a("f9bd"),i=a.n(n);i.a},"2a75":function(e,t,a){"use strict";var n=a("fb36"),i=a.n(n);i.a},"2ad1":function(e,t,a){},"2b3a":function(e,t,a){},"2b49":function(e,t,a){},"2b97":function(e,t,a){},"2c17":function(e,t,a){"use strict";var n=a("0242"),i=a.n(n);i.a},"2d7e":function(e,t,a){},"2e79":function(e,t,a){"use strict";var n=a("f27f"),i=a.n(n);i.a},"2ee7":function(e,t,a){},3:function(e,t){},"33b8":function(e,t,a){"use strict";var n=a("caf4"),i=a.n(n);i.a},"36e7":function(e,t,a){},"37ab":function(e,t,a){"use strict";var n=a("18ee"),i=a.n(n);i.a},3989:function(e,t,a){"use strict";var n=a("f56c"),i=a.n(n);i.a},"3b0e":function(e,t,a){"use strict";var n=a("831f"),i=a.n(n);i.a},"3cf4":function(e,t,a){"use strict";var n=a("005a"),i=a.n(n);i.a},"3d14":function(e,t,a){},"3d8d":function(e,t,a){"use strict";var n=a("59cc"),i=a.n(n);i.a},"3e0d":function(e,t,a){"use strict";var n=a("8659"),i=a.n(n);i.a},"3e6e":function(e,t,a){"use strict";var n=a("3d14"),i=a.n(n);i.a},4:function(e,t){},"40ea":function(e,t,a){},"426c":function(e,t,a){},4281:function(e,t,a){},"42c2":function(e,t,a){},"446d":function(e,t,a){"use strict";var n=a("67ce"),i=a.n(n);i.a},"477c":function(e,t,a){"use strict";var n=a("5cc6"),i=a.n(n);i.a},"48fd":function(e,t,a){"use strict";var n=a("a9d1"),i=a.n(n);i.a},4946:function(e,t,a){"use strict";var n=a("10a8"),i=a.n(n);i.a},"4b03":function(e,t,a){},"4b4e":function(e,t,a){"use strict";var n=a("be16"),i=a.n(n);i.a},"4b8d":function(e,t,a){},"4d36":function(e,t,a){"use strict";var n=a("2b49"),i=a.n(n);i.a},"4d6d":function(e,t,a){"use strict";var n=a("8c5c"),i=a.n(n);i.a},"4e77":function(e,t,a){},5:function(e,t){},"515a":function(e,t,a){"use strict";var n=a("523c"),i=a.n(n);i.a},"523c":function(e,t,a){},5337:function(e,t,a){},"59cc":function(e,t,a){},"5c11":function(e,t,a){},"5cc6":function(e,t,a){},"5d9f":function(e,t,a){"use strict";var n=a("2799"),i=a.n(n);i.a},"5de6":function(e,t,a){"use strict";var n=a("d047"),i=a.n(n);i.a},"5f54":function(e,t,a){"use strict";var n=a("216f"),i=a.n(n);i.a},6156:function(e,t,a){},"64a9":function(e,t,a){},"650d":function(e,t,a){"use strict";var n=a("20c3"),i=a.n(n);i.a},6578:function(e,t,a){},"660d":function(e,t,a){},6618:function(e,t,a){"use strict";var n=a("d892"),i=a.n(n);i.a},"67ce":function(e,t,a){},"69f1":function(e,t,a){},"6dd0":function(e,t,a){"use strict";var n=a("2ee7"),i=a.n(n);i.a},"6fe9":function(e,t,a){"use strict";var n=a("0899"),i=a.n(n);i.a},7092:function(e,t,a){"use strict";var n=a("40ea"),i=a.n(n);i.a},7248:function(e,t,a){},"733c":function(e,t,a){"use strict";var n=a("121b"),i=a.n(n);i.a},"75e0":function(e,t,a){"use strict";var n=a("ee2c"),i=a.n(n);i.a},"7b4e":function(e,t,a){},"7d00":function(e,t,a){"use strict";var n=a("06c2"),i=a.n(n);i.a},"7f37":function(e,t,a){},8050:function(e,t,a){"use strict";var n=a("f2bc"),i=a.n(n);i.a},"831f":function(e,t,a){},8659:function(e,t,a){},"8c5c":function(e,t,a){},"8c72":function(e,t,a){"use strict";var n=a("9ea7"),i=a.n(n);i.a},"8ddf":function(e,t,a){"use strict";var n=a("d714"),i=a.n(n);i.a},"8f18":function(e,t,a){"use strict";var n=a("9e08"),i=a.n(n);i.a},9172:function(e,t,a){"use strict";var n=a("2b3a"),i=a.n(n);i.a},"928c":function(e,t,a){"use strict";var n=a("e80e"),i=a.n(n);i.a},"92e8":function(e,t,a){"use strict";var n=a("daa9"),i=a.n(n);i.a},"931f":function(e,t,a){},"9aea":function(e,t,a){"use strict";var n=a("eefb"),i=a.n(n);i.a},"9b06":function(e,t,a){"use strict";var n=a("db50"),i=a.n(n);i.a},"9e08":function(e,t,a){},"9ea7":function(e,t,a){},a2f3:function(e,t,a){"use strict";var n=a("1593"),i=a.n(n);i.a},a3ea:function(e,t,a){"use strict";var n=a("7f37"),i=a.n(n);i.a},a463:function(e,t,a){},a471:function(e,t,a){"use strict";var n=a("7248"),i=a.n(n);i.a},a75d:function(e,t,a){"use strict";var n=a("ce41"),i=a.n(n);i.a},a9d1:function(e,t,a){},aa8e:function(e,t,a){"use strict";var n=a("36e7"),i=a.n(n);i.a},ab47:function(e,t,a){"use strict";var n=a("28b3"),i=a.n(n);i.a},ae50:function(e,t,a){"use strict";var n=a("ba95"),i=a.n(n);i.a},b44f:function(e,t,a){"use strict";var n=a("ea7d"),i=a.n(n);i.a},ba2e:function(e,t,a){"use strict";var n=a("4281"),i=a.n(n);i.a},ba95:function(e,t,a){},bad2:function(e,t,a){"use strict";var n=a("d6ed"),i=a.n(n);i.a},bb29:function(e,t,a){"use strict";var n=a("e880"),i=a.n(n);i.a},be16:function(e,t,a){},c15c:function(e,t,a){"use strict";var n=a("c543"),i=a.n(n);i.a},c337:function(e,t,a){"use strict";var n=a("6156"),i=a.n(n);i.a},c543:function(e,t,a){},c5fb:function(e,t,a){"use strict";var n=a("6578"),i=a.n(n);i.a},ca31:function(e,t,a){},caf4:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("b-navbar",{staticClass:"navbar-background",attrs:{id:"navbar",toggleable:"md",type:"dark",variant:"primary",sticky:!1}},[a("b-navbar-brand",{attrs:{to:"/"}},[a("img",{staticClass:"site-logo",attrs:{src:"img/logo.png"}}),a("strong",[e._v("ok!Kindred")])]),a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),a("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[a("b-navbar-nav",[e.logged_in?a("b-nav-item",{attrs:{to:"/family/tree/",disabled:e.loading}},[a("span",{staticClass:"oi oi-people",attrs:{"aria-hidden":"true"}}),e._v("\n          "+e._s(e.$t("message.Family"))+"\n        ")]):e._e(),e.logged_in?a("b-nav-item",{attrs:{to:"/gallery/?page=1",disabled:e.loading}},[a("span",{staticClass:"oi oi-image",attrs:{"aria-hidden":"true"}}),e._v("\n          "+e._s(e.$t("message.Gallery"))+"\n        ")]):e._e(),e.logged_in?a("b-nav-item",{attrs:{disabled:e.loading},on:{click:e.searchClicked}},[a("span",{staticClass:"oi oi-magnifying-glass",attrs:{"aria-hidden":"true"}}),e._v("\n          "+e._s(e.$t("message.Search"))+"\n        ")]):e._e()],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{attrs:{to:"/about/",disabled:e.loading}},[a("span",{staticClass:"oi oi-info",attrs:{"aria-hidden":"true"}}),e._v("\n          "+e._s(e.$t("message.About"))+"\n        ")]),e.logged_in?a("b-nav-item",{attrs:{to:"/accounts/settings/",disabled:e.loading}},[a("span",{staticClass:"oi oi-cog",attrs:{"aria-hidden":"true"}}),e._v("\n            "+e._s(e.$t("message.Settings"))+"\n        ")]):e._e(),e.logged_in?a("b-nav-item",{attrs:{href:"#",disabled:e.loading},on:{click:function(t){return e.logout()}}},[a("span",{staticClass:"oi oi-account-logout",attrs:{"aria-hidden":"true"}}),e._v("\n          "+e._s(e.$t("message.Logout"))+"\n        ")]):e._e(),e.logged_in?e._e():a("b-nav-item",{attrs:{to:"/accounts/login/",disabled:e.loading}},[a("span",{staticClass:"oi oi-account-login",attrs:{"aria-hidden":"true"}}),e._v("\n          "+e._s(e.$t("message.Login"))+"\n        ")])],1)],1)],1),a("Loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),a("ErrorModal"),a("router-view"),a("Search",{ref:"searchModal"})],1)},r=[],s=a("d225"),o=a("b0b4"),l=a("308d"),c=a("6bb5"),u=a("4e2b"),d=a("9ab4"),p=(a("f9e3"),a("2dd8"),a("8c44"),a("60a3")),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading",style:e.zIndexStyle})},m=[],g=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"zIndexStyle",get:function(){return{"z-index":this.zIndex}}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:999})],g.prototype,"zIndex",void 0),g=Object(d["a"])([p["a"]],g);var f=g,v=f,y=(a("8f18"),a("2877")),b=Object(y["a"])(v,h,m,!1,null,"27451972",null),w=b.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"error-overlay"},[a("div",{staticClass:"container"},[a("b-alert",{staticClass:"alert-position",attrs:{variant:"danger",dismissible:""},on:{dismissed:e.onDismissed},model:{value:e.showStandardError,callback:function(t){e.showStandardError=t},expression:"showStandardError"}},[e._v("\n      "+e._s(e.errorMessage)+"\n    ")]),a("b-alert",{staticClass:"alert-position",attrs:{variant:"danger",dismissible:""},on:{dismissed:e.onDismissed},model:{value:e.showPasswordBreach,callback:function(t){e.showPasswordBreach=t},expression:"showPasswordBreach"}},[a("strong",[e._v(e._s(e.$t("message.PasswordBreach1")))]),a("div",[e._v(e._s(e.$t("message.PasswordBreach2")))]),a("div",[e._v("\n        "+e._s(e.$t("message.PasswordBreach3"))+"\n        "),a("router-link",{attrs:{to:"/accounts/change_password/"}},[e._v(e._s(e.$t("message.Settings")))])],1),a("div",[e._v("\n        "+e._s(e.$t("message.ForMoreInformation"))+"\n        "),a("a",{attrs:{href:"https://haveibeenpwned.com/Passwords"}},[e._v("https://haveibeenpwned.com/Passwords")])])])],1)])},_=[],j=a("2f62"),x={logged_in:!1,access_token:"",refresh_token:"",language:"",loading_count:0,person_id:"0",users_person_id:"",error_message:"",debug_message:"",people:new Array,relations:new Array,currentGallery:null,initialRoute:"",filesToUpload:[],userAgent:navigator.userAgent},O=x,C=(a("c5f6"),a("ac4d"),a("8a81"),a("ac6a"),a("4917"),a("f559"),a("456d"),{message:{Edit:"Edit",Done:"Done",Delete:"Delete",Ok:"Ok",Cancel:"Cancel",Close:"Close",Yes:"Yes",No:"No",Confirm:"Confirm",Back:"Back",Title:"Title",Description:"Description",Family:"Family",Tree:"Tree",Map:"Map",Gallery:"Gallery",Search:"Search",About:"About",Settings:"Settings",Logout:"Logout",Login:"Log In",Profile:"Profile",Toolbar:"Toolbar",Fullscreen:"Fullscreen",Tags:"Tags",Download:"Download",Previous:"Previous",Next:"Next",ShowPassword:"Show Password",PleaseSignIn:"Please sign in",EmailAddress:"Email Address",Password:"Password",SignIn:"Sign In",IForgotMyPassword:"I forgot my password",InvalidLogin:"Invalid Login",AccountLocked:"Your account has been locked for 24 hours after too many failed login attempts",NoAccount:"No account and no invite?",SignUp:"Sign Up",Slide1Header:"Welcome to ok!Kindred",Slide1Desc:"The free and open source collaborative family tree and photo sharing website",Slide2Header:"Create And Share",Slide2Desc:"Create and share a multilingual family tree with your family and invite your family members to view it and add to it",Slide3Header:"Map your family",Slide3Desc:"Plot the locations of each of your relatives on a map",Slide4Header:"Share Photos",Slide4Desc:"Share photos privately between your family and tag your family members",SignUpButton:"Sign Up",ViewDetails:"View Details",OurStory:"How It Started",OurStoryStub:"Would you like to know the story of how and why we created this site?",ContactUs:"Contact Us",ContactUsStub:"If you have any questions, want to report a bug, ask for a feature or contribute to the source code.",FAQ:"FAQ",FAQStub:"Frequently Asked Questions",StoryHeading:"How it started",StoryText1:"Hello.  I'm Justin on the right.  And I'm Adrian on the left.",StoryText2:"This is a website to record our family tree and act a bit like a social network.\n      You can maintain a profile on here and discover how far the tree reaches!\n      As a person is added to the family tree, they receive an email so they may become a user and add more people to it.\n      The site was inspired by our family gatherings and the difficulties of explaining how we are all related.  Our family is now very diverse with many ethnicities and has spread around the globe.",ContactHeading:"Contact Us",ContactEmail:'Contact us via email <a href="mailto:info@okkindred.com">info@okkindred.com</a>',ContactText1:"If you are in our family we want to hear from you and are welcome to visit and stay round any time.\n      If you have a login to this site and are part of my family, you can get my telephone number and address from my profile!",ContactText2:"Alternatively, if you are looking for some help using the site, or even if you want us to help you set up your own similar site please drop us a line!",ContactText3:"We're quite nice people and do like to talk to people interested in the sames things we are: Geek stuff, software, music and crazy pan global Chinese families...",FAQHeading:"Frequently Asked Questions (FAQ)",Question1:"Can anyone see my family's information?",Answer1:"No, only people within your family tree that you have invited can see the information you input.  The information is also not searchable by outside users or search engines.",Question2:"Is my information secure?",Answer2:" We take security and privacy very seriously. We keep the details of our family on this site, and we would never do anything to jeopardise this data!\n      Only your own family members that you invite to share your tree are able to see the information that you enter on the site.\n      Furthermore, we do not sell, trade, or rent your personal identification information to others.",Answer2a:'The site is hosted with <a href="https://www.pythonanywhere.com/?affiliate_id=00022aed">PythonAnywhere</a> who themselves take privacy very seriously.\n      We also use <a href="https://aws.amazon.com/s3/">Amazon S3</a> to store any images that you upload.\n      We do use third party <a href="https://en.wikipedia.org/wiki/Geocoding">geocoding</a> services (Google & Microsoft).  This is to convert a location into a longitude and latitude so we can plot it on a map.\n      However no other identifying pieces of information (e.g. name) are supplied with this location to these third parties.\n      So for example we will send solely the term \'Hong Kong\' to Google who will then give us a latitude and longitude so we can plot it on a map.',Answer2b:"If you are concerned, the site is entirely open source, so you can take a copy of the source code (see below), have a look how your information is stored or even host your own version of this website.\n      We will be more than happy to help you set it up.",Question3:"Can I see the source code?",Answer3:"The source code is located at <a href=\"https://github.com/JustinWingChungHui/okKindred\">Github.com</a>.  What you see on okKindred.com is taken from the 'production' branch.",Answer3a:'We\'ve issued it with an <a href="https://en.wikipedia.org/wiki/MIT_License">MIT licence</a> which means you are free to use, copy and modify the code for your own purpose.\n      The <a href="https://github.com/JustinWingChungHui/okKindred/blob/master/README.rst">README</a> contains a basic overview on how it works and step by step instructions to deploy your own instance.',Answer3b:'We welcome anyone who has any ideas or who wishes to contribute to this project and make it better!  We especially need help with translation into other languages.\n      Please <a href="mailto:info@okkindred.com?subject=Development" >get in touch</a> if you would like to contribute, or (even better) make a pull request on Github :)',Question4:"What's in it for you if it's free?",Answer4:"We are software developers, and this is a project created in our spare time to expand our skillset and to add to our portfolio to show off to others.\n      This was the best way to organise information on our own family, and we hope that new users will offer suggestions to improve the site or even contribute code.",Question5:"What browsers does this work on?",Answer5:"The site is tested on the latest version of the top browsers on desktop and mobile.\n      There may be issues on unsupported browsers, such as older Android browsers, Internet Explorer 9 and below.",Question6:"Is there a limit on images I can upload?",Answer6:"No at the moment there isn't.  The images are stored on <a href=\"https://aws.amazon.com/s3/\">Amazon S3</a> which is very very cheap so we don't mind footing the cost.\n      However if a lot of users start to upload thousands and thousands of images, we will have to create a limit.",Question7:"Can I advertise on your site?",Answer7:"We have no plans to raise money via ads on the site mainly as we don't want to subject our Grandmas to any more advertising than they currently get.",Question8:"I found a bug!",Answer8:'Please let us know!  You can <a href="mailto:info@okkindred.com?Subject=I%20found%20a%20bug!">email us</a> or you can add it to the <a href="https://github.com/JustinWingChungHui/okKindred/issues">issues list</a> on Github.\n      If it\'s a security bug need to know ASAP so we can fix it!',Question9:"Can you add a feature so it can do xxxxx please?",Answer9:'Feel free to request new features via <a href="mailto:info@okkindred.com?Subject=Feature%20Request">info@okkindred.com</a>.  We will definitely consider them especially if it will benefit a lot of people (i.e. our family).\n      This site is done in our spare time, so feature requests will be done when they\'re done.',Question10:"Other genealogy websites look up local records to help create the tree, can you do the same?",Answer10:"We have no plans to implement this yet.  The reason being is that most of our family originates from China.\n      Because of the civil wars that occured in China in the 20th century and instability during the last decades of the Qing dynasty,\n      few usable records exist that would be beneficial to us.",Answer10a:"Given that many genealogy websites do this already, we would try to focus more on the social networking side of this project.\n      However that is not to say that if in time a great need became apparent, we would not look at implementing such a feature.",Question11:"For describing relationships you have 'Partnered' but not 'Married', you have 'Raised' but not 'Given Birth to'?",Answer11:"We've tried to keep the site as simple as possible and as inclusive as possible.  The definitions of 'Raised', 'Raised by' and 'Partnered' give enough information to build a tree.\n      They are inclusive of cross-cultural relationships which don't have a concept of marriage.\n      They can include civil partnerships, common law partners, divorcees, adoptees and any other definitions that may or may not exist in different cultures.",AboutFooter:"Justin Wing Chung Hui & Adrian Chu",LockedForOtherUsers:"Locked for Other Users",Name:"Name",Gender:"Gender",BirthYear:"Birth Year",DeathYear:"Death Year",SpokenLanguages:"Spoken Languages",Email:"Email",Occupation:"Occupation",TelephoneNumber:"Telephone Number",Location:"Location",Website:"Website",SkypeName:"Skype Name",Facebook:"Facebook",Twitter:"Twitter",LinkedIn:"LinkedIn",Female:"Female",Male:"Male",NonBinary:"Non-Binary",Other:"Other",PreferNotToSay:"Prefer not to say",Biography:"Biography",BiographyNotExist:"A biography has not yet been written.",InviteToJoin:"Invite to Join",Photos:"Photos",ClickToEdit:"Click to Edit",UploadNewPhoto:"Upload New Photo",CoreFamilyMembers:"Core Family Members",Parents:"Parents",Siblings:"Siblings",Partners:"Partners",Children:"Children",LocationForPersonNotSpecified:"Location not specified for person",SearchName:"Search Name",PasswordReset:"Password Reset",PasswordResetDescription:"Please enter your email to start the process to reset your password:",ResetMyPassword:"Reset my Password",PasswordResetRequested:"Password Reset Requested",CheckYourEmailForReset:"Please check your email for further instructions.",PasswordResetConfirmation:"Password Reset Confirmation",PasswordResetConfirmationDescription:"Please enter your new password.  Your new password should be at least 8 characters long.",PasswordConfirmation:"Confirm your new password",PasswordsNotMatching:"Passwords do not match",UpdateMyPassword:"Update my Password",UserSettings:"User Settings",ChangePassword:"Change Password",LeaveokKindred:"Leave ok!Kindred",LanguageLabel:"Language:",ReceiveFamilyEmailUpdates:"Receive email notifications when family information gets updated",ReceivePhotoTaggingEmailUpdates:"Receive email notifications when you are tagged in photos",UserSettingsSaved:"User Settings Saved",PasswordBreach1:"This password is unsafe!",PasswordBreach2:"It has been used in other sites which have had privacy breaches and should be\n      changed to keep your ok!Kindred account secure",PasswordBreach3:"Please change your password by going to ",ForMoreInformation:"For more information:",ChangePasswordDescription:"Enter your old password, then create a new password and confirm it.  Your new password should\n      be at least 8 characters long",OldPassword:"Old Password",NewPassword:"New Password",PasswordUpdated:"Password Updated",IncorrectOldPassword:"Your old password is incorrect",LeaveSite:"Leave ok!Kindred",LeaveSiteSingleUserDescription:"Leaving ok!Kindred will delete all your profile, all the family data and images.",EnterYourPasswordToConfirm:"Enter your password to confirm:",CurrentUsersAccessToFamilyData:"These are all the users who currently curate the family data:",LeaveSiteMultipleUsersDescription:"You can choose to delete your profile or you can preserve it for the other users in your family.",LeaveSiteMultipleUsersDescription2:"If all the above users leave the site, then the entire family data will be deleted.",DeleteMyProfile:"Delete my Profile",LeaveSiteKeepMyProfile:"Profile will be preserved",LeaveSiteDeleteMyProfile:"Profile will be deleted",AddAncestor:"Add Ancestor",AddDescendant:"Add Descendant",AddPartner:"Add Partner",AreYouSureDelete:"Are you sure you want to delete?",NewPerson:"New Person",ExistingPerson:"Existing Person",Required:"Required",BreakLinks:"Break Links",Raised:"Raised",RaisedBy:"RaisedBy",Partnered:"Partnered",SuggestedRelations:"Suggested Relations",AreXandYPartners:"Are {fromPersonName} and {toPersonName} partners?",DidXraiseY:"Did {fromPersonName} raise {toPersonName}?",JoinSite:"Join ok!Kindred",JoinSiteDescription:"To set up a new family network and join ok!Kindred, please provide the\n      following information:",EmailInUse:"Email is already in use",ThankYou:"Thank you!",PleaseCheckEmail:"Please check your email {email} to confirm your account.",InvalidEmail:"Invalid email",AlreadySignedUp:"Already have an account?",AccountConfirmation:"Account Confirmation",PleaseCreatePassword:"Please create a password for your account:",NewProfilePhoto:"New Profile Photo",UploadNewProfilePhoto:"Upload a new profile photo for {personName}:",SelectFile:"Select File",PleaseTrimImage:"Please trim the image to suit a profile picture: ",UploadingImagePleaseWait:"Uploading new image, please wait...",AllGalleries:"All Galleries",NoGalleries:"No image galleries found.",AddNewGallery:"Add a new gallery",NoImagesInGallery:"No images found in gallery",AddNewImages:"Add new images",CreateNewGallery:"Create New Gallery",EditGallery:"Edit Gallery",DeleteGalleries:"Delete Galleries",DeleteGalleriesDesc:"Are you sure you want to leave delete the selected galleries?\n      It will also delete all the images in them.",DeleteImages:"Delete Images",DeleteImagesDesc:"Are you sure you want to leave delete the selected images?",SelectGallery:"Select Gallery",UploadImages:"Upload Images",SelectFiles:"Select Files",Pending:"Pending",Uploading:"Uploading",Processing:"Processing",Failed:"Failed",UploadFinished:"Upload Finished",AllUploadsSuccessful:"All Uploads Successful",XSuccessfulYFailed:"{success} images uploaded successfully, {fail} failed",ImagesOfX:"Images of {name}",NoImagesOfPerson:"No images of {name} have been tagged yet.",GoToGalleries:"Go to galleries",GoToGallery:"Go to Gallery",EditImage:"Edit Image",Details:"Details",GalleryThumbnail:"Gallery Thumbnail",AddTags:"Click/Touch image to tag people",WhoIsThis:"Who is this?",DeleteTags:"Delete Tags",InviteConfirmation:"ok!Kindred Invite Confirmation",HelloName:"Hello {name}!",YouHaveBeenInvited:"Thank you for accepting the invitation from {invitedBy}\n      to join ok!kindred, share your family tree and keep in contact with your family members!",CannotFindInvite:"ok!Kindred invite not found",CannotFindInviteDescription:"Please check with whoever sent you the invite and note that invites expire after 2 weeks.",PrivacyPolicy:"Privacy Policy",WhoAreWe:"Who Are We",WhoAreWeDescription:"ok!Kindred is operated by Tech Luminaire Ltd:",CompanyContactEmail:"Our email for all ok!kindred enquiries is info@okkindred.com",CompanyContactTelephone:"Our telephone number is +44 2476 982000.\n      Please note that we don't provide technical support over the phone.",CompanyNumber:"We are registered in England and Wales as company 08864499.",CompanyVATNumber:"VAT No: 207242637",WhatInformationWeCollect:"What Information We Collect",WhatInformationWeCollectDescription:"We collect data to create your user account,\n      build up a family tree and profile of people in your family tree.\n      To create your user account we require the following information: name, email address and gender.\n      To create your family tree and profiles, we require name, gender and how family members are related.\n      Other data you may additionally choose to store on the site includes birth years, locations, email and other contact details,\n      biographical information and images.",WhatInformationWeCollectDescription2:"Automated information such as the internet protocol (IP) address\n      used to connect your device to the internet, connection information such as browser type and version,\n      information about your device including device-type and device identifier, is also collected.",WhatWeDoWithInformation:"What We Do With Your Information",WhatWeDoWithInformationDescription:"Your data is not shared or sold or used for any marketing purposes.\n      The information you share with the site is used to create your family tree/network.\n      Automated information is used to help us to monitor and improve the service.\n      Your photos are used to train the service to help you tag your own photos.\n      Your location that you submit on your profile is sent to Google or Microsoft's geolocation services to place the person on a map.\n      No other information is sent with the location.\n      No members of the public outside of your family network are able to see the family tree data you share with the service.",HowWeStoreYourInformation:"How We Store Your Information",HowWeStoreYourInformationDescription:"Our service operates off PythonAnywhere\n      (https://www.pythonanywhere.com) and your data is stored on their servers.\n      They operate servers in the US managed by Amazon Web Services, which is certified under the EU-US Privacy Shield Framework.\n      This provides safeguards in relation to the handling of your personal data.\n      Photos are stored directly on to Amazon Web Services without going through PythonAnywhere.\n      Your data is not transmitted to any other third parties.",HowWeStoreYourInformationDescription2:"If you are the sole user in your family network,\n      in general your data is deleted as soon as you delete your account.\n      If there are many users within your family network, you are treated as joint owners of the data.\n      When you delete your account, you may choose to delete your profile.\n      The entire family network information is deleted when all users in your family network delete their accounts.\n      Data backups may be kept for up to 2 weeks.",YourDataProtectionRights:"Your Data Protection Rights",YourDataProtectionRightsDescription:"You have the right to ask us for copies of your personal information and\n      to rectify information you think is inaccurate.\n      You also have the right to ask us to complete information you think is incomplete.\n      You have the right to ask us to erase your personal information in certain circumstances.\n      You have the right to ask us to restrict the processing of your information in certain circumstances.\n      You have the the right to object to the processing of your personal data in certain circumstances.\n      You have the right to ask that we transfer the information you gave us to another organisation, or to you,\n      in certain circumstances.\n      You are not required to pay any charge for exercising your rights. If you make a request, we have one month to respond to you.",LinksToOtherWebsites:"Links To Other Websites",LinksToOtherWebsitesDescription:"This site contains links to other websites.\n      We are not responsible for the content of other websites or how they processes personal information.",HowToComplain:"How To Complain",HowToComplainDescription:" If you have a complaint about how we are dealing with your personal information,\n      please contact us via the email address above.\n      If you are not happy with our response or think we are not handling your personal information in accordance with the law,\n      you can complain to the Information Commissioner's Office (ICO):"}}),P={message:{Edit:"Edytuj",Done:"Gotowe",Delete:"Skasuj",Ok:"Dobrze",Cancel:"Anuluj",Close:"Zamknąć",Yes:"Tak",No:"Nie",Confirm:"Potwierdzać",Back:"Powrót",Title:"Tytuł",Description:"Opis",Family:"Rodzina",Tree:"Drzewo",Map:"Mapa",Gallery:"Galeria",Search:"Szukanie",About:"O",Settings:"Ustawienia",Logout:"Wyloguj",Login:"Zaloguj się",Profile:"Profil",Toolbar:"Pasek Narzędzi",Fullscreen:"Pełny Ekran",Tags:"Etykietki",Download:"Pobieranie",Previous:"Poprzedni",Next:"Następny",ShowPassword:"Pokaż Hasło",PleaseSignIn:"Zaloguj się",EmailAddress:"Adres E-mail",Password:"Hasło",SignIn:"Zaloguj się",IForgotMyPassword:"Nie pamiętam hasła",InvalidLogin:"Nieprawidłowy login",AccountLocked:"Logowanie nie powiodło się; Twoje konto zostało zablokowane na 24 godziny",NoAccount:"Bez konta i bez zaproszenia?",SignUp:"Zapisz się",Slide1Header:"Witamy w ok!Kindred",Slide1Desc:"Wolna i open source współpracy drzewo genealogiczne i udostępnianie zdjęć www",Slide2Header:"Tworzenie i udostępnianie",Slide2Desc:"Tworzenie i udostępnianie wielojęzycznej drzewo genealogiczne z rodziną i zaprosić członków rodziny, by go zobaczyć i dodać do niej",Slide3Header:"Mapa swoją rodzinę",Slide3Desc:"Wykreślić położenie każdego z krewnych na mapie",Slide4Header:"Dzielić się zdjęciami",Slide4Desc:"Udostępnianie zdjęć prywatnie między rodziną i naklejki członków rodziny",SignUpButton:"Zapisz się",ViewDetails:"Pokaż szczegóły",OurStory:"Nasza historia",OurStoryStub:"Chciałbyś poznać historię, jak i dlaczego stworzyliśmy tę stronę?",ContactUs:"Skontaktuj się z nami",ContactUsStub:"Jeśli masz jakieś pytania, chcesz zgłosić błąd, prosić o funkcji lub\n      przyczynić się do kodu źródłowego.",FAQ:"FAQ",FAQStub:"Często Zadawane Pytania",StoryHeading:"Jak to się zaczęło",StoryText1:"Cześć. Jestem Justin po lewej stronie. I jestem Adrian po prawej stronie.",StoryText2:"Jest to strona, aby nagrać nasze drzewo genealogiczne i działają trochę jak\n      sieci społecznej. Można utrzymywać profil tutaj i zobacz, jak daleko sięga\n      drzewo!\n      Jako osoba zostanie dodana do drzewa genealogicznego, otrzymują\n      e-mail, więc mogą one zostać użytkownikiem i dodać do niej więcej ludzi.\n      Witryna została zainspirowana przez naszych rodzinnych spotkań i\n      trudności wyjaśniając, jak wszyscy jesteśmy spokrewnieni. Nasza rodzina jest\n      bardzo zróżnicowany z wielu grup etnicznych i rozprzestrzenił się na całym\n      świecie.\n      Jako rodzina rośnie i ewoluuje, chcieliśmy sposób dokumentowania\n      wszystkich i pozostać w kontakcie.",ContactHeading:"Kontakt",ContactEmail:'Skontaktuj się z nami poprzez e-mail <a href="mailto:info@okkindred.com">info@okkindred.com</a>',ContactText1:"Jeśli jesteś w naszej rodzinie chcemy usłyszeć od ciebie i zapraszamy do\n      odwiedzenia i pobyt rundy w każdej chwili.\n      Jeśli masz login do tego miejscu i są częścią mojej rodziny,\n      można dostać mój numer telefonu i adres z mojego profilu!",ContactText2:"Ewentualnie, jeśli szukasz jakiejś pomocy z tej witryny, a nawet jeśli\n      chcesz nam pomóc założyć własną podobna strona prosimy daj nam znać!",ContactText3:"Jesteśmy bardzo mili ludzie i lubisz rozmawiać z ludźmi zainteresowanych\n      sames rzeczy jesteśmy Geek Stuff, oprogramowania, muzyki i szalony pan\n      globalnych chińskich rodzin ...",FAQHeading:"Często Zadawane Pytania",Question1:"Czy ktoś może zobaczyć informacje na mojej rodziny?",Answer1:"Nie, tylko ludzie w swoim drzewie genealogicznym, które zostały zaproszone\n      mogą zobaczyć informacje wejściowe. Informacja nie jest również przeszukiwać\n      przez zewnętrznych użytkowników i wyszukiwarek.",Question2:"Czy moje dane są bezpieczne?",Answer2:"Traktujemy bezpieczeństwo i prywatność bardzo poważnie. Trzymamy szczegóły\n      naszej rodziny na tej stronie, a my nigdy nie zrobi nic, aby zaszkodzić te\n      dane!\n      Tylko własne członkowie rodziny, które zapraszają do dzielenia\n      drzewa są w stanie zobaczyć informacje, które należy wpisać na stronie.\n      Ponadto, nie sprzedawać, ani nie wynajmujemy osobistych\n      informacji identyfikacyjnych dla innych.",Answer2a:'Witryna jest utrzymywana z\n      <a href="https://www.pythonanywhere.com/?affiliate_id=00022aed">PythonAnywhere</a>\n      którzy sami podejmują prywatność bardzo poważnie.\n      Używamy również <a href="https://aws.amazon.com/s3/">Amazon S3</a>\n      przechowywać żadnych obrazów, które przesyłasz.\n      Robimy korzystać z usług TRZECIĄ\n      <a href="https://en.wikipedia.org/wiki/Geocoding">geokodowanie</a>\n      (Google i Microsoft). To jest\n      konwersja lokalizację na długości i szerokości geograficznej, dzięki czemu\n      możemy wykreślić go na mapie.\n      Jednak żadne inne identyfikujące fragmenty informacji (na przykład nazwa)\n      dostarczane są z tego miejsca do tych stron trzecich.\n      Tak na przykład wyślemy jedynie termin "Hongkongu" do Google,\n      który będzie następnie dać nam szerokości i długości geograficznej, dzięki\n      czemu możemy wykreślić go na mapie.',Answer2b:"Jeśli obawiasz się, że witryna jest całkowicie open source, więc można wziąć\n      kopię kodu źródłowego (patrz poniżej), spojrzeć w jaki sposób informacje są\n      przechowywane lub nawet gościć własną wersję tej strony.\n      Będziemy bardziej niż szczęśliwi, aby pomóc Ci go skonfigurować.",Question3:"Mogę zobaczyć kod źródłowy?",Answer3:'Kod źródłowy znajduje się na stronie\n      <a href="https://github.com/JustinWingChungHui/okKindred">Github.com</a>.\n      Co widać na okKindred.com pochodzi z "production" oddział.',Answer3a:'Mamy wydał go z\n      <a href="https://en.wikipedia.org/wiki/MIT_License">licencji MIT</a>\n      co oznacza, że ​​mogą swobodnie używać, kopiować i\n      modyfikować kod do własnych celów"\n      <a href="https://github.com/JustinWingChungHui/okKindred/blob/master/README.rst">README</a>\n      zawiera podstawowy przegląd tego, jak to\n      działa i instrukcje krok po kroku wdrożyć własną instancję',Answer3b:'Zapraszamy każdego, kto ma jakieś pomysły lub kto chce przyczynić się do\n      tego projektu i zrobić to lepiej! Szczególnie potrzebna jest pomoc z\n      tłumaczeniem na inne języki.\n      <a href="mailto:info@okkindred.com?subject=Development">skontaktuje</a>\n      jeśli chcesz przyczynić się, lub (nawet lepiej) złożyć wniosek ciągnij\n      Github :)',Question4:"Co to oznacza dla Ciebie, jeśli to nic nie kosztuje?",Answer4:"Jesteśmy programistów, a jest to projekt stworzony w naszym wolnym czasie,\n      aby rozwinąć naszą Skillset i dodać do naszego portfela, aby pokazać innym.\n      To był najlepszy sposób na porządkowanie informacji na temat\n      naszej własnej rodziny i mamy nadzieję, że nowi użytkownicy będą oferować\n      propozycje w celu poprawy witryny lub nawet przyczynić się kod.",Question5:"Jakie przeglądarki to działa dalej?",Answer5:"Witryna jest testowany na najnowszej wersji z najlepszych przeglądarek na\n      komputerach i urządzeniach mobilnych.\n      Nie mogą być problemy na nieobsługiwanych przeglądarek, takich\n      jak Android starszych przeglądarek, Internet Explorer 9 i poniżej.",Question6:"Czy istnieje limit zdjęć mogę przesłać?",Answer6:'Nie w tej chwili nie ma. Obrazy są zapisywane na\n      <a href="https://aws.amazon.com/s3/">Amazon S3</a>\n      który jest bardzo tanie, więc nie przeszkadza\n      pokryje koszty.\n      Jeśli jednak wielu użytkowników zacznie przesyłać tysiące zdjęć,\n      będziemy musieli stworzyć granicę.',Question7:"Czy mogę reklamować na swojej stronie?",Answer7:"Nie mamy żadnych planów, aby zebrać pieniądze poprzez reklamy na stronie\n      głównie jako nie chcemy narażać nasze babcie do dowolnego więcej reklam niż\n      obecnie dostać.",Question8:"Znalazłem błąd!",Answer8:'Daj nam znać! Możesz\n      <a href="mailto:info@okkindred.com?Subject=I%%20found%%20a%%20bug!">napisz do nas</a>\n      lub można ją dodać do <a href = "https://github.com/JustinWingChungHui/okKindred/issues">issues</a>\n      na Github.\n      Jeśli jest to błąd bezpieczeństwa trzeba wiedzieć jak\n      najszybciej, abyśmy mogli go naprawić',Question9:"Można dodać funkcję, dzięki czemu można zrobić xxxxx proszę?",Answer9:'Zapraszam do żądania nowe funkcje poprzez\n      <a href="mailto:info@okkindred.com?Subject=Feature%%20Request">info@okkindred.com</a>.\n      Na pewno uważają je\n      zwłaszcza jeśli będzie to korzystne dla wielu ludzi (czyli naszej rodziny).\n      Ta strona jest wykonywana w wolnym czasie, więc wnioski funkcja\n      zostanie wykonane, kiedy skończysz.',Question10:"Inne strony genealogiczne patrzeć lokalne rekordy do tworzenia drzewa, można\n      zrobić to samo?",Answer10:'Nie mamy żadnych planów, aby zaimplementować to jeszcze. Powodem jest to, że\n      większość naszej rodziny pochodzi z Chin.\n      Z powodu wojen domowych, które wystąpiły w Chinach w 20 wieku i\n      niestabilności w ostatnich dziesięcioleciach dynastii Qing,\n      Kilka użytecznych istnieją zapisy, które byłyby korzystne dla\n      "nas.',Answer10a:"Biorąc pod uwagę, że wiele stron internetowych, genealogia to zrobić już, to\n      staramy się bardziej skupić się na stronie społecznościowej tego projektu.\n      Jednak to nie znaczy, że jeśli w czasie wielkie zapotrzebowanie\n      stało się jasne, że nie będzie patrzeć na realizację takiej funkcji.",Question11:'Do opisywania relacji masz "Współpracę", ale nie "Married", trzeba\n      "Raised", ale nie "zrodził"?',Answer11:'Staraliśmy się utrzymać stronę tak proste, jak to możliwe i możliwie "\n      "wszechstronnej. Definicje "Raised", "Raised by" i "Współpracę \'dać "\n      wystarczająco dużo informacji, by stworzyć drzewo.\n      Są włącznie z relacji międzykulturowych, które nie mają pojęcia\n      małżeństwa.\n      Mogą one obejmować partnerstwa obywatelskiego, partnerami common\n      law rozwódki, przysposobionych i innych definicji, które mogą lub nie mogą\n      występować w różnych kulturach.',AboutFooter:"Justin Wing Chung Hui & Adrian Chu",LockedForOtherUsers:"Zablokowany dla innych użytkowników",Name:"Imię",Gender:"Płeć",BirthYear:"Rok Urodzenia",DeathYear:"Rok Śmierci",SpokenLanguages:"Zna Następujące Języki",Email:"E-mai",Occupation:"Zawód",TelephoneNumber:"Numer Telefonu",Location:"Lokalizacja",Website:"Stronia Internetowa",SkypeName:"Nazwa Skype",Facebook:"Facebook",Twitter:"Twitter",LinkedIn:"LinkedIn",Female:"Kobieta",Male:"Mężczyzna",NonBinary:"Nie binarne",Other:"Inna Płeć",PreferNotToSay:"Wolę nie mówić",Biography:"Biografia",BiographyNotExist:"Biografia jeszcze nie zostało napisane w tym języku.",InviteToJoin:"Zaproś do przyłączenia",Photos:"Zdjęcia",ClickToEdit:"Kliknij aby edytowac",UploadNewPhoto:"Prześlij nowe zdjęcie",CoreFamilyMembers:"Bliscy Członkowie Rodziny",Parents:"Rodzice",Siblings:"Rodzeństwo",Partners:"Wzmacniacz",Children:"Synowie i Córki",LocationForPersonNotSpecified:"Lokalizacja nieokreślona dla osoby",SearchName:"Szukaj",PasswordReset:"Zresetowanie Hasła",PasswordResetDescription:"Wprowadź swój adres e-mail, aby rozpocząć proces resetowania hasła:",ResetMyPassword:"Zresetować moje Hasło",PasswordResetRequested:"Zażądano Zresetowania Hasła",CheckYourEmailForReset:"Sprawdź swój e-mail, aby uzyskać dalsze instrukcje.",PasswordResetConfirmation:"Potwierdzenie Resetowania Hasła",PasswordResetConfirmationDescription:"Wprowadź nowe hasło. Twoje nowe hasło powinno mieć co najmniej 8 znaków.",PasswordConfirmation:"Potwierdź nowe hasło",PasswordsNotMatching:"Hasła nie pasują do siebie",UpdateMyPassword:"Zaktualizuj moje Hasło",UserSettings:"Ustawienia Użytkownika",ChangePassword:"Zmień Hasło",LeaveokKindred:"Zamknij ok!Kindred",LanguageLabel:"Język:",ReceiveFamilyEmailUpdates:"Otrzymuj powiadomienia e-mail, gdy informacje o rodzinie zostaną zaktualizowane",ReceivePhotoTaggingEmailUpdates:"Otrzymuj powiadomienia e-mail, gdy jesteś oznaczony na zdjęciach",UserSettingsSaved:"Zapisane Ustawienia Użytkownika",PasswordBreach1:"To hasło jest niebezpieczne!",PasswordBreach2:"Został on wykorzystany w innych witrynach, które miały naruszenia prywatności i powinny być\n      zmienione, aby zapewnić bezpieczeństwo konta ok!Kindred",PasswordBreach3:"Zmień hasło, przechodząc do ",ForMoreInformation:"Po więcej informacji:",ChangePasswordDescription:"Wprowadź stare hasło, a następnie utwórz nowe hasło i potwierdź je. Twoje nowe hasło powinno\n      mieć co najmniej 8 znaków",OldPassword:"Stare Hasło",NewPassword:"Nowe Hasło",PasswordUpdated:"Hasło Zaktualizowane",IncorrectOldPassword:"Twoje stare hasło jest nieprawidłowe",LeaveSite:"Porzucić ok!Kindred",LeaveSiteSingleUserDescription:"Pozostawienie ok!Kindred spowoduje usunięcie całego profilu, wszystkich danych rodzinnych i obrazów.",EnterYourPasswordToConfirm:"Wprowadź swoje hasło, aby potwierdzić:",CurrentUsersAccessToFamilyData:"Są to wszyscy użytkownicy, którzy obecnie wikary danych rodziny:",LeaveSiteMultipleUsersDescription:"Możesz usunąć swój profil lub zachować go dla innych użytkowników w swojej rodzinie.",LeaveSiteMultipleUsersDescription2:"Jeśli wszyscy powyżsi użytkownicy opuszczą witrynę, całe dane rodziny zostaną usunięte.",DeleteMyProfile:"Usuń mój profil",LeaveSiteKeepMyProfile:"Profil zostanie zachowany",LeaveSiteDeleteMyProfile:"Profil zostanie usunięty",AddAncestor:"Dodaj Przodka",AddDescendant:"Dodaj Potomka",AddPartner:"Dodaj partnera",AreYouSureDelete:"Czy na pewno chcesz usunąć profil?",NewPerson:"Nowa Osoba",ExistingPerson:"Istniejąca Osoba",Required:"Wymagany",BreakLinks:"Skasuj Relację",Raised:"Wychował/wychowała",RaisedBy:"Wychowany/wychowana przez",Partnered:"w związku z",SuggestedRelations:"Sugerowane Relacje",AreXandYPartners:"Czy partnerzy {fromPersonName} i {toPersonName}?",DidXraiseY:"Czy {fromPersonName} Wychował/wychowała {toPersonName}?",JoinSite:"Zapisz się ok!Kindred",JoinSiteDescription:"Aby założyć nową sieć rodzinną i dołączyć do ok! Spokrewnione, proszę podać\n      następująca informacja:",EmailInUse:"Adres e-mail jest już w użyciu",ThankYou:"Dziękuję Ci!",PleaseCheckEmail:"Sprawdź swój adres e-mail {email}, aby potwierdzić swoje konto.",InvalidEmail:"Niepoprawny email",AlreadySignedUp:"Posiadasz już konto?",AccountConfirmation:"Potwierdzenie Konta",PleaseCreatePassword:"Utwórz hasło do swojego konta:",NewProfilePhoto:"Nowe Zdjęcie Profilowe",UploadNewProfilePhoto:"Prześlij nowe zdjęcie profilowe dla {personName}:",SelectFile:"Wybierz plik",PleaseTrimImage:"Przytnij obraz, aby pasował do zdjęcia profilowego:",UploadingImagePleaseWait:"Przesyłanie nowego obrazu, proszę czekać...",AllGalleries:"Wszystkie galerie",NoGalleries:"Nie znaleziono galerii zdjęć.",AddNewGallery:"Dodaj nową galerię",NoImagesInGallery:"Nie znaleziono zdjęć w galerii",AddNewImages:"Dodaj nowe obrazy",CreateNewGallery:"Utwórz Nową Galerię",EditGallery:"Edytuj Galerię",DeleteGalleries:"Usuń Galerie",DeleteGalleriesDesc:"Czy na pewno chcesz usunąć wybrane galerie?\n      Spowoduje to również usunięcie wszystkich zawartych w nich obrazów.",DeleteImages:"Usuń Obrazy",DeleteImagesDesc:"Czy na pewno chcesz usunąć wybrane galerie?",SelectGallery:"Wybierz Galerię",UploadImages:"Przesyłać Zdjęcia",SelectFiles:"Wybierz Pliki",Pending:"W Oczekiwaniu",Uploading:"Przesyłanie",Processing:"Przetwarzanie",Failed:"Nie powiodło się",UploadFinished:"Przesyłanie zakończone",AllUploadsSuccessful:"Pomyślne przesłanie wszystkich plików",XSuccessfulYFailed:"Pomyślnie przesłano {success} zdjęć, {fail} nie powiodło się",ImagesOfX:"Obrazy {name}",NoImagesOfPerson:"Żadne obrazy {name} nie zostały jeszcze oznaczone.",GoToGalleries:"Idź do galerii",GoToGallery:"Idź do galerii",EditImage:"Edytuj obrazek",Details:"Detale",GalleryThumbnail:"Miniatura Galerii",AddTags:"Kliknij/retusz obrazu otagować ludz",WhoIsThis:"Kto to jest?",DeleteTags:"Usuń Etykiety",InviteConfirmation:"ok!Kindred Potwierdzenie Zaproszenia",HelloName:"Cześć {name}!",YouHaveBeenInvited:"Dziękujemy za przyjęcie zaproszenia od {invitedBy}\n      aby dołączyć do ok! kindred, udostępnij swoje drzewo genealogiczne i utrzymuj kontakt z członkami rodziny!",CannotFindInvite:"ok!Kindred nie znaleziono zaproszenia",CannotFindInviteDescription:"Skontaktuj się z tym, kto wysłał Ci zaproszenie, i pamiętaj, że zaproszenia wygasają po 2 tygodniach.",PrivacyPolicy:"Polityka Prywatności",WhoAreWe:"Kim jesteśmy",WhoAreWeDescription:"ok!Kindred jest obsługiwany przez Tech Luminaire Ltd:",CompanyContactEmail:"Nasz e-mail na wszystkie zapytania ok!Kindred to info@okkindred.com",CompanyContactTelephone:"Nasz numer telefonu to +44 2476 982000. Należy pamiętać, że nie zapewniamy wsparcia technicznego przez telefon.",CompanyNumber:"Jesteśmy zarejestrowani w Anglii i Walii jako firma 08864499.",CompanyVATNumber:"Nr VAT: 207242637",WhatInformationWeCollect:"Jakie Informacje Zbieramy",WhatInformationWeCollectDescription:"Gromadzimy dane w celu utworzenia drzewa genealogicznego i profilu osób w Twoim drzewie genealogicznym.\n      Są to informacje, które zdecydujesz się przechowywać na stronie i obejmują imiona, lata urodzenia, lokalizacje, dane kontaktowe i zdjęcia.",WhatInformationWeCollectDescription2:"Gromadzone są również zautomatyzowane informacje,\n      takie jak adres protokołu internetowego (IP) używany do łączenia urządzenia z Internetem,\n      informacje o połączeniu, takie jak typ i wersja przeglądarki, informacje o urządzeniu, w tym typ urządzenia i identyfikator urządzenia.",WhatWeDoWithInformation:"Co Robimy z Twoimi Danymi",WhatWeDoWithInformationDescription:"Nie sprzedajemy twoich danych stronom trzecim.\n      Informacje, które udostępniasz na stronie, są wykorzystywane do utworzenia twojego drzewa genealogicznego / sieci.\n      Zautomatyzowane informacje służą nam do monitorowania i ulepszania usługi.\n      Twoje zdjęcia służą do szkolenia serwisu, aby pomóc ci oznaczać własne zdjęcia.\n      Twoja lokalizacja, którą przesyłasz w swoim profilu, jest wysyłana do usług geolokalizacyjnych Google lub Microsoft w celu umieszczenia tej osoby na mapie.\n      Z lokalizacją nie są wysyłane żadne inne informacje.\n      Żaden członek społeczności spoza Twojej sieci rodzinnej nie może zobaczyć danych drzewa genealogicznego udostępnianych w usłudze.",HowWeStoreYourInformation:"Jak przechowujemy Twoje dane",HowWeStoreYourInformationDescription:"Nasz serwis działa poza PythonAnywhere (https://www.pythonanywhere.com),\n      a twoje dane są przechowywane na ich serwerach.\n      Obsługują serwery w USA zarządzane przez Amazon Web Services, który posiada certyfikat EU-US Privacy Shield Framework.\n      Zapewnia to zabezpieczenia związane z przetwarzaniem danych osobowych.\n      Zdjęcia są przechowywane bezpośrednio w Amazon Web Services bez przechodzenia przez PythonAnywhere.\n      Twoje dane nie są przekazywane żadnym stronom trzecim.",HowWeStoreYourInformationDescription2:"Jeśli jesteś jedynym użytkownikiem w sieci rodzinnej,\n      Twoje dane są usuwane natychmiast po usunięciu konta.\n      Jeśli w Twojej sieci rodzinnej jest wielu użytkowników, jesteś traktowany jako współwłaściciel danych.\n      Po usunięciu konta możesz usunąć swój profil.\n      Informacje o całej sieci rodzinnej są usuwane, gdy wszyscy użytkownicy w sieci rodzinnej usuwają swoje konta.\n      Kopie zapasowe danych mogą być przechowywane do 2 tygodni.",YourDataProtectionRights:"Twoje Prawa do Ochrony Danych",YourDataProtectionRightsDescription:"Masz prawo poprosić nas o kopie danych osobowych i sprostować informacje, które uważasz za niedokładne.\n      Masz również prawo poprosić nas o uzupełnienie informacji, które uważasz za niekompletne.\n      Masz prawo poprosić nas o usunięcie twoich danych osobowych w określonych okolicznościach.\n      Masz prawo poprosić nas o ograniczenie przetwarzania twoich informacji w określonych okolicznościach.\n      Masz prawo w określonych okolicznościach sprzeciwić się przetwarzaniu twoich danych osobowych.\n      Masz prawo poprosić, abyśmy przekazali informacje, które nam przekazałeś, do innej organizacji lub do Ciebie, w pewnych okolicznościach.\n      Nie musisz płacić żadnych opłat za wykonywanie swoich praw. Jeśli złożysz prośbę, mamy jeden miesiąc na udzielenie odpowiedzi.",LinksToOtherWebsites:"Linki do Innych Stron Internetowych",LinksToOtherWebsitesDescription:"Ta strona zawiera linki do innych stron internetowych.\n      Nie ponosimy odpowiedzialności za treść innych stron internetowych ani sposób, w jaki przetwarzają one dane osobowe.",HowToComplain:"Jak Złożyć Skargę",HowToComplainDescription:"Jeśli masz skargę dotyczącą tego, jak postępujemy z Twoimi danymi osobowymi, skontaktuj się z nami za pośrednictwem powyższego adresu e-mail.\n      Jeśli nie jesteś zadowolony z naszej odpowiedzi lub uważasz, że nie przetwarzamy twoich danych osobowych zgodnie z prawem,\n      możesz złożyć skargę do biura komisarza ds. Informacji (ICO):"}},I={message:{Edit:"Muokkaa",Done:"Valmis",Delete:"Poista",Ok:"Kunnossa",Cancel:"Peruuta",Close:"Sulje",Yes:"Kyllä",No:"Ei",Confirm:"Vahvista",Back:"Takaisin",Title:"Otsikko",Description:"Kuvaus",Family:"Perhe",Tree:"Puu",Map:"Kartta",Gallery:"Galleria",Search:"Hae",About:"Info",Settings:"Asetukset",Logout:"Kirjaudu ulos",Login:"Kirjaudu sisään",Profile:"Profiili",Toolbar:"Työkalut",Fullscreen:"Koko näyttö",Tags:"Tagi",Download:"Lataa",Previous:"Edellinen",Next:"Seuraava",ShowPassword:"Näytä salasana",PleaseSignIn:"Ole hyvä ja kirjaudu sisään",EmailAddress:"Sähköpostiosoite",Password:"Salasana",SignIn:"Kirjaudu sisään",IForgotMyPassword:"Unohdin salasanani",InvalidLogin:"Virheellinen kirjautuminen",AccountLocked:"Tilisi on nyt lukittu 24 tunnin ajaksi neljän epäonnistuneet kirjautumisyrityksen jälkeen",NoAccount:"Ei tiliä eikä kutsua?",SignUp:"Ilmoittaudu",Slide1Header:"Tervetuloa ok!Kindred:iin",Slide1Desc:"Ilmainen ja avoimen lähdekoodin verkkosivu sukupuun rakentamiseen ja valokuvien jakamiseen yhdessä muiden kanssa",Slide2Header:"Luo ja jaa",Slide2Desc:"Luo ja jaa monikielinen sukupuu perheesi kanssa ja kutsu perheenjäseniä katsomaan sukupuutasi ja lisäämään tietoa",Slide3Header:"Kartta perheestäsi",Slide3Desc:"Merkitse eri perheenjäseniesi sijainnit kartalle",Slide4Header:"Jaa valokuvia",Slide4Desc:"Jaa valokuvia yksityisesti perheesi kesken ja merkitse perheenjäseniä",SignUpButton:"Liity ja luo tili",ViewDetails:"Lue lisää",OurStory:"Meidän tarinamme",OurStoryStub:"Haluatko tietää tarinan siitä, kuinka ja miksi olemme luoneet tämän sivuston?",ContactUs:"Ota meihin yhteyttä",ContactUsStub:"Jos sinulla on kysyttävää, haluat ilmoittaa viasta, pyytää uutta ominaisuutta tai edistää lähdekoodia.",FAQ:"FAQ",FAQStub:"Usein kysytyt kysymykset",StoryHeading:"Miten kaikki alkoi",StoryText1:"Hei. Olen Justin vasemmalla ja olen Adrian oikealla.",StoryText2:"Tämä on sivusto, jolla voimme tallentaa sukupuumme ja se toimii myös vähän niin kuin sosiaalinen verkosto. Voit ylläpitää profiilia täällä ja selvittää, miten pitkälle sukupuusi jatkuu!\n      Kun henkilö lisätään sukupuuhun, hän saa ilmoituksen sähköpostitse, jotta voivat liittyä sivustoon ja lisätä tietoa sukupuuhun. Inspiraatio sivuston luomiseen tuli perhejuhlistamme ja vaikeudesta selittää sukulaissuhteemme.\n      Perheemme on nyt hyvin monipuolinen, siihen kuuluu monia etnisiä ryhmiä ja on levinnyt ympäri maailmaa.",ContactHeading:"Ota yhteyttä",ContactEmail:'Ota yhteyttä sähköpostitse <a href="mailto:info@okkindred.com">info@okkindred.com</a>',ContactText1:"Jos olet sukulaisemme, haluamme kuulla sinusta ja olet tervetullut vierailemaan luonamme.\n      Jos sinulla on tili tälle sivustolle ja olet osa perhettäni, löydät puhelinnumeroni ja osoiteeni profiilistani",ContactText3:"Vaihtoehtoisesti, jos tarvitset apua sivuston käytössä, tai jos haluat meidän auttavan sinua perustamaan oman samanlaisen sivuston, ota meihin yhteyttä!\n      Olemme ihan mukavia ihmisiä ja tykkäämme puhua ihmisille jotka ovat kiinnostuneet samoista asoista kuin me: nörttien jutuista, ohjelmistoista, musiikista ja hassuista maailmanlaajuisista kiinalaisperheistä ...",FAQHeading:"Usein kysytyt kysymykset",Question1:"Näkeekö kuka tahansa perheeni tiedot?",Answer1:"No, only people within your family tree that you have invited can see the information you input.  The information is also not searchable by outside users or search engines.",Question2:"Onko tietoni turvassa?",Answer2:"Otamme turvallisuuden ja yksityisyyden hyvin vakavasti. Pidämme yksityiskohdat perheemme tällä sivustolla, ja emme koskaan tee mitään vaarantaa nämä tiedot\n      Vain oman perheen jäsenille, että kutsut jakaa puu näkevät tiedot, jotka annat sivustolla.\n      Lisäksi emme myy, vaihda tai vuokraa henkilökohtaisia ​​tunnistetietoja muille.",Answer2a:'Sivusto on isännöi <a href="https://www.pythonanywhere.com/?affiliate_id=00022aed">PythonAnywhere</a> joka itse ottaa yksityisyyttä hyvin vakavasti.\n      Käytämme myös <a href="https://aws.amazon.com/s3/"> Amazon S3</a> tallentaa kaikki kuvat, jotka lataat.\n      Teemme käyttää kolmannen osapuolen <a href="https://en.wikipedia.org/wiki/Geocoding">geocoding</a> palvelujen (Google & Microsoft).\n      Tämä on muuntaa sijainti tulee pituus- ja leveysasteen, jotta voimme piirtää sen kartalla.\n      Kuitenkin mitään muita tunnistetietoja paloja tiedot (esim. Nimi) syötetään tähän paikkaan näille kolmansille osapuolille.\n      Niinpä esimerkiksi lähetämme ainoastaan termiä "Hong Kong" Google, joka sitten antaa meille leveys- ja pituusaste, jotta voimme piirtää sen kartalla.',Answer2b:"Jos olet huolestunut, sivusto on täysin avoimen lähdekoodin, joten voit\n      ottaa kopion lähdekoodista (katso jäljempänä), on katsoa, ​​miten tiedot on\n      tallennettu tai jopa isännöidä omaa version tällä sivustolla.\n      Meillä on enemmän kuin mielellään auttaa asettaa sen.",Question3:"Voinko nähdä lähdekoodia?",Answer3:'Lähdekoodi sijaitsee <a href="https://github.com/JustinWingChungHui/okKindred">Github.com</a>. Mitä näet okKindred.com otetaan "production" haara.',Answer3a:'Olemme antanut sen jollain <a href="https://en.wikipedia.org/wiki/MIT_License">MIT lisenssin</a> mikä tarkoittaa vapaasti käyttää, kopioida ja muokata koodia oman tarkoitukseen.\n      <a href="https://github.com/JustinWingChungHui/okKindred/blob/master/README.rst">README</a> sisältää perustiedot yleiskuvan siitä, miten se toimii ja askel askeleelta ohjeet sijoittaa oman esimerkiksi.',Answer3b:'Olemme tyytyväisiä kuka tahansa ideoita tai joka haluaa osallistua tähän projektiin ja tehdä se paremmin! Olemme erityisen tarvitsevat apua kääntämistä muille kielille.\n      Ole hyvä <a href="mailto:info@okkindred.com?subject=Development">yhteyttä</a> jos haluat edistää, tai (vielä parempi) esittää pull pyynnön Github :)',Question4:"Mitä se sinulle, jos se on ilmainen?",Answer4:"Olemme ohjelmistokehittäjiä, ja tämä on projekti luotu meidän vapaa-aikaa laajentaa skillset ja lisätä tuotevalikoimaamme keuliminen muille.\n      Tämä oli paras tapa järjestää tietoa oman perheen, ja toivomme, että uudet käyttäjät tarjota ehdotuksia parantaa sivuston tai jopa edistää koodia.",Question5:"Mitä selaimia tämä työ?",Answer5:"Sivusto on testattu uusimman version alkuun selainten työpöydällä ja mobiili.\n      Ongelma voi olla ei-tuetuissa selaimissa, kuten vanhemmat Android selaimilla, Internet Explorer 9 ja alla.",Question6:"Onko olemassa rajoitusta kuvia voin ladata?",Answer6:'Ei tällä hetkellä ei ole. Kuvat tallennetaan <a href="https://aws.amazon.com/s3/">Amazon S3</a> joka on erittäin hyvin halpaa, joten emme mielessä arvoisesti kustannuksia.\n      Jos kuitenkin paljon käyttäjiä alkaa ladata tuhansia ja tuhansia kuvia, meidän on luotava raja.',Question7:"Voinko mainostaa sivustossasi?",Answer7:"Meillä ei ole suunnitelmia nostaa rahaa kautta mainoksia sivuston lähinnä emme halua alistaa meidän Grandmas mitään enemmän mainontaa kuin he nykyisin saavat",Question8:"Löysin virheen!",Answer8:'Kerro meille! Voit <a href="mailto:info@okkindred.com?Subject=I%%20found%%20a%%20bug!">meille sähköpostia</a> tai voit lisätä sen <a href=https: //github.com/JustinWingChungHui/okKindred/issues">issues lista </a> Github.\n      Jos se on turvallisuus bug täytyy tietää ASAP, jotta voimme korjata sen!',Question9:"Voitteko lisätä ominaisuus, joten se voi tehdä xxxxx haluta?",Answer9:'Voit vapaasti pyytää uusia ominaisuuksia kautta <a href="mailto:"info@okkindred.com?Subject=Feature%%20Request">info@okkindred.com</a>.\n      Tulemme varmasti pitävät niitä varsinkin jos se hyödyttää paljon ihmisiä (eli meidän perhe).\n      Tämä sivusto tehdään vapaa-ajalla, joten pyyntöjä tehdään, kun he ovat tehneet.',Question10:"Muut sukututkimus sivustot etsiä paikallisia kirjaa auttaa luomaan puu, voit tehdä saman?",Answer10:"Meillä ei ole suunnitelmia toteuttaa tämän vielä. Syy tähän on se, että suurin osa perheen peräisin Kiinasta.\n      Koska sisällissodat joka tapahtui Kiinassa 1900-luvulla ja epävakautta viimeisten vuosikymmenien aikana Qing-dynastian,\n      Muutama käyttökelpoinen kirjaa olemassa, jotka olisi hyödyllistä meille.",Answer10a:"Koska monet sukututkimusta sivustot tehdä tämän jo, me yrittäisi keskittyä enemmän sosiaalisen verkottumisen puolella tämän projektin.\n      Kuitenkin, että ei ole sanoa, että jos ajan suuri tarve kävi ilmeiseksi, emme olisi tarkastella toteuttaa tällainen ominaisuus.",Question11:'Sillä kuvataan suhteita olet "Partneroitu" mutta ei "Naimisissa", olet "Raised" mutta ei "synnyttänyt"?',Answer11:'Olemme yrittäneet pitää sivuston mahdollisimman yksinkertainen ja mahdollisimman kattavat. Määritelmät "Raised", "Raised" ja "Partneroitu antaa riittävästi tietoa rakentaa puuhun.\n      Ne sisältävät kulttuurien suhteita, jotka eivät ole avioliittokäsite.\n      Ne voivat sisältää parisuhteiden, common law kumppanit, eronneita, adoptoidut ja muita määritelmiä, jotka voidaan tai ei ole eri kulttuureissa',AboutFooter:"Justin Wing Chung Hui & Adrian Chu",LockedForOtherUsers:"Lukittu muille käyttäjille",Name:"Nimi",Gender:"Sukupuoli",BirthYear:"Syntymä vuosi",DeathYear:"Kuolin vuosi",SpokenLanguages:"Puhutut kielet",Email:"Sähköposti",Occupation:"Ammatti",TelephoneNumber:"Puhelinnumero",Location:"Sijainti",Website:"Verkkosivusto",SkypeName:"Skype tunnus",Facebook:"Facebook",Twitter:"Twitter",LinkedIn:"LinkedIn",Female:"Nainen",Male:"Mies",NonBinary:"Muusukupuolinen (ei-binäärinen)",Other:"Muu",PreferNotToSay:"En halua kertoa",Biography:"Elämäkerta",BiographyNotExist:"Elämäkertaa ei ole vielä kirjoitettu tällä kielellä.",InviteToJoin:"Kutsu liittymään sivustoon",Photos:"Valokuvat",ClickToEdit:"Klikkaa muokataksesi",UploadNewPhoto:"Lataa uusi valokuva",CoreFamilyMembers:"Perheen Keskeiset Jäsenet",Parents:"Vanhemmat",Siblings:"Sisarukset",Partners:"Kumppanit",Children:"Jälkeläinen\n\n      ",LocationForPersonNotSpecified:"Sijaintia ei ole määritetty henkilölle",SearchName:"Hae nimellä",PasswordReset:"Salasanan nollaus",PasswordResetDescription:"Anna sähköpostiosoitteesi salasanan palauttamisen aloittamiseksi:",ResetMyPassword:"Nollaa salasanani",PasswordResetRequested:"Salasanan palautus pyydetty",CheckYourEmailForReset:"Tarkista sähköpostisi saadaksesi lisätietoja.",PasswordResetConfirmation:"Salasanan Palautuksen Vahvistus",PasswordResetConfirmationDescription:"Anna uusi salasana. Uuden salasanasi on oltava vähintään 8 merkkiä pitkä.",PasswordConfirmation:"Vahvista uusi salasana",PasswordsNotMatching:"Salasanat eivät täsmää",UpdateMyPassword:"Päivitä Salasanani",UserSettings:"Käyttäjäasetukset",ChangePassword:"Vaihda Salasana",LeaveokKindred:"Jätä ok!Kindred",LanguageLabel:"Kieli:",ReceiveFamilyEmailUpdates:"Vastaanota sähköpostiviestejä, kun perheen tietoja päivitetään",ReceivePhotoTaggingEmailUpdates:"Vastaanota sähköpostiviestejä, kun olet merkitty valokuviin",UserSettingsSaved:"Käyttäjän Asetukset Tallennettu",PasswordBreach1:"Tämä salasana ei ole turvallinen!",PasswordBreach2:"Sitä on käytetty muissa sivustoissa, joissa on rikottu yksityisyyttä ja joiden pitäisi olla\n      muutettu pitämään ok! Kindred -tilisi turvallisena",PasswordBreach3:"Ole hyvä ja vaihda salasanasi menemällä ",ForMoreInformation:"Lisätietoja:",ChangePasswordDescription:"Anna vanha salasana ja luo uusi salasana ja vahvista se. Sinun pitäisi olla uusi salasana\n      oltava vähintään 8 merkkiä pitkä",OldPassword:"Vanha Salasana",NewPassword:"Uusi Salasana",PasswordUpdated:"Salasana Päivitetty",IncorrectOldPassword:"Vanha salasanasi on väärä",LeaveSite:"Jätä ok!Kindred",LeaveSiteSingleUserDescription:"Poistuessasi ok! Kindred -toiminnosta kaikki profiilisi, kaikki perheen tiedot ja kuvat poistetaan.",EnterYourPasswordToConfirm:"Anna salasana vahvistaaksesi:",CurrentUsersAccessToFamilyData:"Nämä ovat kaikkia käyttäjiä, jotka nykyään hallitsevat perhesivuja:",LeaveSiteMultipleUsersDescription:"Nämä ovat kaikkia käyttäjiä, jotka nykyään hallitsevat perhesivuja:",LeaveSiteMultipleUsersDescription2:"Jos kaikki edellä mainitut käyttäjät poistuvat sivustosta, koko perheen tiedot poistetaan.",DeleteMyProfile:"Poista profiili",LeaveSiteKeepMyProfile:"Profiili säilyy",LeaveSiteDeleteMyProfile:"Profiili poistetaan",AddAncestor:"Lisää Esi-isä",AddDescendant:"Lisää Jälkeläinen",AddPartner:"Lisää Kumppani",AreYouSureDelete:"Oletko varma, että haluat poistaa profiilin?",NewPerson:"Uusi Henkilö",ExistingPerson:"Olemassa Oleva Henkilö",Required:"Edellytetään",BreakLinks:"Tauko Suhde",Raised:"Esille",RaisedBy:"Kasvatettu",Partnered:"Yhteistyöhön",SuggestedRelations:"Ehdotetut Suhteet",AreXandYPartners:"Ovatko {fromPersonName} ja {toPersonName} kumppanit?",DidXraiseY:"Esille {fromPersonName} {toPersonName}??",JoinSite:"Liity ok!Kindred",JoinSiteDescription:"Jos haluat perustaa uuden perheverkon ja liittyä ok! Sukulaiseen, anna\n      seuraava tieto:",EmailInUse:"Sähköposti on jo käytössä",ThankYou:"Kiitos!",PleaseCheckEmail:"Tarkista sähköpostisi {email} vahvistaaksesi tilisi.",InvalidEmail:"Virheellinen sähköpostiosoite",AlreadySignedUp:"Onko sinulla jo tili?",AccountConfirmation:"Tilin Vahvistus",PleaseCreatePassword:"Luo salasana tilillesi:",NewProfilePhoto:"Uusi Profiilikuva",UploadNewProfilePhoto:"Lataa uusi profiilikuva henkilölle {personName}:",SelectFile:"Valitse tiedosto",PleaseTrimImage:"Leikkaa kuva profiilikuvan mukaiseksi: ",UploadingImagePleaseWait:"Lähetetään uutta kuvaa, odota...",AllGalleries:"Kaikki galleriat",NoGalleries:"Kuvagallerioita ei löytynyt.",AddNewGallery:"Lisää uusi galleria",NoImagesInGallery:"Galleriasta ei löytynyt kuvia",AddNewImages:"Lisää Uusia Kuvia",CreateNewGallery:"Luo Uusi Galleria",EditGallery:"Muokkaa Galleriaa",DeleteGalleries:"Poista Galleriat",DeleteGalleriesDesc:"Haluatko varmasti jättää valitut galleriat poistamaan?\n      Se poistaa myös kaikki niissä olevat kuvat.",DeleteImages:"Poista Kuvat",DeleteImagesDesc:"Haluatko varmasti jättää valitut kuvat poistamaan?",SelectGallery:"Valitse Galleria",UploadImages:"Lataa Kuvat",SelectFiles:"Valitse Tiedostot",Pending:"Odotettaessa",Uploading:"Lataaminen",Processing:"Käsittely",Failed:"Epäonnistui",UploadFinished:"Lataa Valmis",AllUploadsSuccessful:"Kaikki Lataukset Onnistuneet",XSuccessfulYFailed:"{success} kuvat ladattu onnistuneesti, {fail} epäonnistui",ImagesOfX:"Kuvia henkilöstä {name}",NoImagesOfPerson:"{name} -kuvaa ei ole vielä merkitty.",GoToGalleries:"Siirry gallerioihin",GoToGallery:"Siirry galleriaan",EditImage:"Muokkaa Kuvaa",Details:"Yksityiskohdat",GalleryThumbnail:"Gallerian Pikkukuva",AddTags:"Napsauta/Touch kuvaa koodata ihmisiä",WhoIsThis:"Kuka tämä on?",DeleteTags:"Poista Tunnisteet",InviteConfirmation:"ok!Kindred Kutsu Vahvistus",HelloName:"Hei {name}!",YouHaveBeenInvited:"Kiitos, että olet hyväksynyt kutsun käyttäjältä {invitedBy}\n      liittyä ok! -tautiin, jaa sukupuusi ja pidä yhteyttä perheenjäseniisi!",CannotFindInvite:"ok!Kindred kutsua ei löydy",CannotFindInviteDescription:"Tarkista, kuka on lähettänyt sinulle kutsun, ja muista, että kutsut vanhenevat 2 viikon kuluttua.",PrivacyPolicy:"Tietosuojakäytäntö",WhoAreWe:"Keitä me olemme",WhoAreWeDescription:"ok!Kindred  ylläpitää Tech Luminaire Ltd:",CompanyContactEmail:"Sähköposti kaikista ok!kindred on  info@okkindred.com",CompanyContactTelephone:"Puhelinnumeromme on +44 2476 982000. Huomaa, että emme tarjoa teknistä tukea puhelimitse.",CompanyNumber:"Olemme rekisteröity Englannissa ja Walesissa yrityksenä 08864499.",CompanyVATNumber:"ALV-numero: 207242637",WhatInformationWeCollect:"Mitä tietoja keräämme",WhatInformationWeCollectDescription:"Keräämme tietoja sukupuun ja sukupuussa olevien ihmisten profiilin luomiseksi.\n      Nämä tiedot, jotka päätät tallentaa sivustoon, sisältävät nimet, syntymävuodet, sijainnit, yhteystiedot ja kuvat.",WhatInformationWeCollectDescription2:"Lisäksi kerätään automatisoituja tietoja, kuten Internet Protocol (IP) -osoite,\n      jota käytetään laitteen yhdistämiseen Internetiin, yhteydetiedot, kuten selaimen tyyppi ja versio, tietoja laitteesta,\n      mukaan lukien laitetyyppi ja laitetunniste.",WhatWeDoWithInformation:"Mitä teemme tietoihisi",WhatWeDoWithInformationDescription:"Emme myy tietojasi kolmansille osapuolille.\n      Sivuston kanssa jakamasi tietoja käytetään sukupuusi / verkon luomiseen.\n      Automatisoitua tietoa käytetään palvelun seuraamiseen ja parantamiseen.\n      Valokuvia käytetään kouluttamaan palvelua, jonka avulla voit merkitä omat valokuvasi.\n      Sijaintisi, jonka lähetät profiilissasi, lähetetään Googlen tai Microsoftin paikannuspalveluille henkilön sijoittamiseksi kartalle.\n      Muita tietoja ei lähetetä sijainnin yhteydessä.\n      Yksikään perheverkon ulkopuolella olevasta yleisöstä ei voi nähdä sukupuun tietoja, jotka jaat palvelun kanssa.\n      Kuinka tallennamme tietojasi",HowWeStoreYourInformation:"Palvelumme toimii",HowWeStoreYourInformationDescription:"PythonAnywhere-sivustolla (https://www.pythonanywhere.com) ja tietosi tallennetaan heidän palvelimilleen.\n      He käyttävät palvelimia Yhdysvalloissa, jota hallinnoi Amazon Web Services, joka on sertifioitu EU: n ja Yhdysvaltojen tietosuojakilven puitteissa.\n      Tämä tarjoaa suojatoimenpiteitä henkilötietojesi käsittelyssä.\n      Valokuvat tallennetaan suoraan Amazon Web Services -palveluun käymättä läpi PythonAnywhere-sivua.\n      Tietojasi ei välitetä muille kolmansille osapuolille.",HowWeStoreYourInformationDescription2:"Jos olet ainoa käyttäjä perheverkossa, tietosi yleensä poistetaan heti, kun poistat tilisi.\n      Jos perheverkossa on paljon käyttäjiä, sinua kohdellaan tiedon yhteisomistajana.\n      Kun poistat tilisi, voit poistaa profiilisi. Koko perheverkon tiedot poistetaan, kun kaikki perheverkon käyttäjät poistavat tilinsä.\n      Tietojen varmuuskopioita voidaan säilyttää jopa 2 viikkoa",YourDataProtectionRights:"Tietosuojaoikeutesi",YourDataProtectionRightsDescription:"Sinulla on oikeus pyytää meiltä kopioita henkilökohtaisista tiedoistasi ja oikaista tiedot,\n      jotka sinun mielestäsi ovat epätarkkoja.\n      Sinulla on myös oikeus pyytää meitä antamaan täydelliset tiedot, jotka arvelet puutteellisiksi.\n      Sinulla on oikeus pyytää meitä poistamaan henkilökohtaiset tietosi tietyissä olosuhteissa.\n      Sinulla on oikeus pyytää meitä rajoittamaan tietosi käsittelyä tietyissä olosuhteissa.\n      Sinulla on oikeus tietyissä olosuhteissa vastustaa henkilötietojesi käsittelyä.\n      Sinulla on oikeus pyytää, että siirrämme meille antamasi tiedot toiselle organisaatiolle tai sinulle tietyissä olosuhteissa.\n      Sinun ei tarvitse maksaa mitään maksua oikeuksien käyttämisestä.\n      Jos teet pyynnön, meillä on kuukausi aikaa vastata sinulle.",LinksToOtherWebsites:"Linkit Muille Verkkosivustoille",LinksToOtherWebsitesDescription:"Tämä sivusto sisältää linkkejä muille verkkosivustoille.\n      Emme ole vastuussa muiden verkkosivustojen sisällöstä tai siitä, kuinka ne käsittelevät henkilökohtaisia tietoja.",HowToComplain:"Kuinka valittaa",HowToComplainDescription:"Jos sinulla on valitus siitä, miten käsittelemme henkilökohtaisia ​​tietojasi,\n      ota meihin yhteyttä yllä olevan sähköpostiosoitteen kautta.\n      Jos et ole tyytyväinen vastaukseemme tai epäilet,\n      että emme käsittele henkilökohtaisia ​​tietojasi lain mukaisesti,\n      voit tehdä valituksen tietovaltuutetun toimistolle (ICO):"}},S={message:{Edit:"Modifier",Done:"Terminé",Delete:"Effacer",Ok:"D'accord",Cancel:"Annuler",Close:"Fermer",Yes:"Oui",No:"Non",Confirm:"Confirmer",Back:"Retour",Title:"Titre",Description:"Description",Family:"Famille",Tree:"Arbre",Map:"Carte",Gallery:"Galerie",Search:"Chercher",About:"A Propos",Settings:"Paramètres",Logout:"Déconnecter",Login:"Connecter",Profile:"Profil",Toolbar:"Barre D'Outils",Fullscreen:"Plein écran",Tags:"Marques",Download:"Télécharger",Previous:"Reculer",Next:"Avancer",ShowPassword:"Montrer le Mot de Passe",PleaseSignIn:"S'il vous plaît vous connecter",EmailAddress:"Adresse E-mail",Password:"Mot de passe",SignIn:"Connecter",IForgotMyPassword:"J'ai oublié mon mot de passe",InvalidLogin:"Identifiant invalide",AccountLocked:"Votre compte a été bloqué pendant 24 heures après 4 tentatives de connexion infructueuses",NoAccount:"Pas de compte et pas d'invitation?",SignUp:"S'inscrire",Slide1Header:"Bienvenue a ok! Kindred",Slide1Desc:"L'arbre généalogique et partage de photos site collaboratif source libre et ouvert",Slide2Header:"Créer et partager",Slide2Desc:"Créer et partager un arbre généalogique multilingue avec votre famille et invitez vos membres de la famille pour le voir et y ajouter",Slide3Header:"Trace la carte de votre famille",Slide3Desc:"Tracer les emplacements de chacun de vos proches sur une carte",Slide4Header:"Partager des photos",Slide4Desc:"Partagez vos photos privées entre votre famille et marquer vos membres de la famille",SignUpButton:"S'inscrire",ViewDetails:"Voir les détails",OurStory:"Notre histoire",OurStoryStub:"Voulez-vous connaître l'histoire de comment et pourquoi nous avons créé ce site?",ContactUs:"Contactez nous",ContactUsStub:"Si vous avez des questions, veulent signaler un bug, demander une fonctionnalité ou contribuer au code source.",FAQ:"FAQ",FAQStub:"Questions fréquemment posées",StoryHeading:"Comment ça a commencé",StoryText1:"Bonjour. Je suis Justin sur la droite. Et je suis Adrian sur la gauche.",StoryText2:"Ceci est un site Web pour enregistrer notre arbre généalogique et agir un peu comme un réseau social.\n      Vous pouvez maintenir un profil sur ce site et découvrir à quel point l'arbre atteint!\n      En tant que personne est ajouté à l'arbre généalogique, ils reçoivent un e-mail afin qu'ils puissent devenir un utilisateur et ajouter d'autres personnes à lui.\n      Le site a été inspiré par nos réunions de famille et les difficultés d'expliquer la façon dont nous sommes tous liés.\n      Notre famille est maintenant très diversifié avec de nombreuses ethnies et est répandu dans le monde entier.\n      Alors que la famille se développe et évolue, nous voulions un moyen de documenter tout le monde et rester en contact.",ContactHeading:"Contact",ContactEmail:'Contactez-nous par email <a href="mailto:info@okkindred.com">info@okkindred.com</a>',ContactText1:"Si vous êtes dans notre famille, nous voulons entendre parler de vous et nous sommes invités à visiter et rester autour de tout temps.\n      Si vous avez une connexion à ce site et faites partie de ma famille, vous pouvez obtenir mon numéro de téléphone et adresse de mon profil!",ContactText2:"Alternativement, si vous cherchez un peu d'aide en utilisant le site, ou même si vous voulez que nous vous aidons à mettre en place votre propre site similaire s'il vous plaît nous laisser tomber une ligne!",ContactText3:"Nous sommes tout à fait des gens sympas et aimons parler aux personnes intéressées par les sames choses que nous sommes: Geek stuff, logiciels, musique et pan fou familles chinoises mondiales ...",FAQHeading:"Questions fréquemment posées",Question1:"Quelqu'un peut-il voir l'information de ma famille?",Answer1:"Non, seules les personnes au sein de votre arbre généalogique que vous avez\n      invités peuvent voir les informations que vous entrez. L'information est\n      également pas consultable par les utilisateurs à l'extérieur ou les moteurs\n      de recherche.",Question2:"Est-ce que mes renseignements personnels?",Answer2:"Nous prenons la sécurité et la vie privée très au sérieux. Nous gardons les\n      détails de notre famille sur ce site, et nous ne ferions jamais rien pour\n      compromettre ces données!\"\n      Seuls vos propres membres de la famille que vous invitez à\n      partager votre arbre sont en mesure de voir les informations que vous entrez\n      sur le site\n      En outre, nous ne vendons pas, échanger ou louer vos\n      informations d'identification personnelle à d'autres.",Answer2a:'Le site est hébergé par <a href="https://www.pythonanywhere.com/?affiliate_id=00022aed">PythonAnywhere</a>\n      qui se prennent la politique de confidentialité très au sérieux.\n      Nous utilisons également <a href="https://aws.amazon.com/s3/">Amazon S3</a> pour stocker toutes les\n      images que vous téléchargez.\n      Nous utilisons les services de tiers <a href="https://en.wikipedia.org/wiki/Geocoding">géocodage</a>\n      (Google & Microsoft).\n      Ceci est de convertir un emplacement en longitude et la latitude afin que nous puissions tracer sur une carte.\n      Toutefois, aucun d\'autres pièces d\'identification de l\'information (par exemple le nom) sont fournis avec cet endroit à ces\n      tiers.\n      Ainsi, par exemple, nous allons envoyer uniquement le terme\n      «Hong Kong» à Google, qui sera ensuite nous donner une latitude et la\n      longitude afin que nous puissions tracer sur une carte.',Answer2b:"Si vous êtes concerné, le site est entièrement open source, de sorte que\n      vous pouvez prendre une copie du code source (voir ci-dessous), regardez\n      comment votre information est stockée ou même héberger votre propre version\n      de ce site.\n      Nous serons heureux de vous aider à mettre en place.",Question3:"Puis-je voir le code source?",Answer3:'Le code source se trouve à l\'adresse\n      <a href="https://github.com/JustinWingChungHui/okKindred">Github.com</a>. Ce que vous voyez sur\n      okKindred.com est tiré de la branche «production».',Answer3a:'Nous avons publié avec un\n      <a href="https://en.wikipedia.org/wiki/MIT_License">MIT</a> de licence qui signifie que vous êtes libre d\'utiliser, de\n      copier et de modifier le code pour votre propre usage .\n      Le <a href="https://github.com/JustinWingChungHui/okKindred/blob/master/README.rst">README</a>\n      contient une vue d\'ensemble sur la façon dont il fonctionne et des instructions étape par étape pour déployer\n      votre propre instance .',Answer3b:"Nous nous félicitons de tous ceux qui ont des idées ou qui souhaite\n      contribuer à ce projet et le rendre meilleur! Nous avons particulièrement\n      besoin de l'aide avec la traduction dans d'autres langues.\n      S'il vous plaît <a href=\"mailto:info@okkindred.com?subject=Development\">entrer en contact</a>\n      si vous souhaitez contribuer, ou (encore mieux) faire un pull request sur Github :)",Question4:"Qu'est-ce qu'il ya dedans pour vous s'il est gratuit?",Answer4:"Nous sommes des développeurs de logiciels, et ceci est un projet créé dans\n      notre temps libre pour étendre notre niveau de compétences et d'ajouter à\n      notre portefeuille de montrer aux autres.\n      Ce fut la meilleure façon d'organiser l'information sur notre\n      propre famille, et nous espérons que les nouveaux utilisateurs offriront des\n      suggestions pour améliorer le site ou même contribuer au code.",Question5:"Quels sont les navigateurs ce travail sur?",Answer5:"Le site est testé sur la dernière version des meilleurs navigateurs sur\n      ordinateur de bureau et mobile.\n      Il peut y avoir des questions sur les navigateurs non pris en\n      charge, tels que les anciens navigateurs Android, Internet Explorer 9 et ci-\n      dessous.",Question6:"Y at-il une limite sur les images que je peux télécharger?",Answer6:"Pas pour le moment il n'y a pas. Les images sont stockées sur\n      <a href=\"https://aws.amazon.com/s3/\">Amazon S3</a> qui est très très pas cher,\n      donc cela ne nous dérange pas pied d'égalité le coût.\n      Toutefois, si un grand nombre d'utilisateurs commencent à\n      télécharger des milliers et des milliers d'images, nous devrons créer une\n      limite.",Question7:"Puis-je annoncer sur votre site?",Answer7:"Nous ne prévoyons pas de recueillir de l'argent via des annonces sur le site\n      principalement comme nous ne voulons pas soumettre nos Grandmas à plus de\n      publicité que ce qu'ils obtiennent actuellement.",Question8:"J'ai trouvé un bug!",Answer8:'S\'il vous plaît laissez-nous savoir! Vous pouvez\n      <ahref="mailto:info@okkindred.com?Subject=I%%20found%%20a%%20bug!">Envoyez-nous</a> ou\n      vous pouvez l\'ajouter à la\n      <a href="https://github.com/JustinWingChungHui/okKindred/issues">issues</a> sur Github.\n      Si elle est un bug de sécurité ont besoin de savoir le plus tôt\n      possible afin que nous puissions résoudre le problème!',Question9:"Pouvez-vous ajouter une fonctionnalité de sorte qu'il peut faire xxxxx s'il vous plaît?",Answer9:'Ne hésitez pas à demander de nouvelles fonctionnalités via\n      <a href="mailto:info@okkindred.com?Subject=Feature%%20Request">info@okkindred.com</a>.\n      Nous allons certainement les considérer surtout si elle profitera à un grand\n      nombre de personnes (à savoir notre famille).\n      Ce site est fait dans notre temps libre, donc les demandes de\n      fonctionnalités se fera quand ils sont fait.',Question10:"D'autres sites de généalogie se tournent vers les dossiers locaux pour aider\n      à créer l'arbre, pouvez-vous faire la même chose?",Answer10:"Nous ne prévoyons pas de mettre en œuvre ce encore. La raison en est que la\n      plupart de notre famille est originaire de Chine.\n      En raison des guerres civiles qui ont eu lieu en Chine au 20ème\n      siècle et d'instabilité au cours des dernières décennies de la dynastie\n      Qing,\n      quelques enregistrements utilisables existent qui serait bénéfique pour nous.",Answer10a:"Étant donné que de nombreux sites Web de généalogie font déjà, nous allions\n      essayer de se concentrer davantage sur le côté réseau social de ce projet.\n      Cependant cela ne veut pas dire que si dans le temps un grand\n      besoin est devenu évident, nous ne chercherions pas à mettre en œuvre une\n      telle fonctionnalité.",Question11:"Pour décrire les relations que vous avez «partenaire» mais pas «Marié»,\n      vous avez «Élevé» mais pas «donné naissance à»?",Answer11:"Nous avons essayé de garder le site aussi simple que possible et aussi\n      inclusif que possible. Les définitions de «Élevé», «Élevé Par» et\n      «Partenaire» donnent suffisamment d'informations pour construire un arbre.\n      Ils comprennent des relations inter-culturelles qui ne disposent\n      pas d'un concept de mariage.\n      Ils peuvent inclure des partenariats civils, les conjoints de\n      fait, les divorcées, les personnes adoptées et d'autres définitions qui\n      peuvent ou peuvent ne pas exister dans différentes cultures.",AboutFooter:"Justin Wing Chung Hui & Adrian Chu",LockedForOtherUsers:"Verrouillé pour d'autres utilisateurs",Name:"Nom",Gender:"Sexe",BirthYear:"Année de Naissance",DeathYear:"Année de la Mort",SpokenLanguages:"Langues Parlées",Email:"Email",Occupation:"Occupation",TelephoneNumber:"Numéro de Téléphone",Location:"Lieu",Website:"Site Internet",SkypeName:"Nom Skype",Facebook:"Facebook",Twitter:"Twitter",LinkedIn:"LinkedIn",Female:"Femelle",Male:"Mâle",NonBinary:"Non binaire",Other:"Autre",PreferNotToSay:"Je préfère ne pas le dire",Biography:"Biographie",BiographyNotExist:"Une biographie n'a pas encore été écrit.",InviteToJoin:"Inviter à rejoindre",Photos:"Photos",ClickToEdit:"Cliquez pour éditer",UploadNewPhoto:"Télécharger une nouvelle photo",CoreFamilyMembers:"Membres Proches de la famille",Parents:"Parents",Siblings:"Frères et Sœurs",Partners:"Partenaires",Children:"Enfants",LocationForPersonNotSpecified:"Lieu non spécifié pour personne",SearchName:"Recherche Nom",PasswordReset:"Réinitialisation du Mot de Passe",PasswordResetDescription:"Veuillez entrer votre email pour lancer le processus de réinitialisation de votre mot de passe:",ResetMyPassword:"Réinitialiser",PasswordResetRequested:"Mot de Passe Réinitialisation Demandé",CheckYourEmailForReset:"S'il vous plaît vérifier votre email pour plus d'instructions.",PasswordResetConfirmation:"Confirmation de Réinitialisation du Mot de Passe",PasswordResetConfirmationDescription:"Veuillez entrer votre nouveau mot de passe",PasswordConfirmation:"Mot de Passe Confirmation.",PasswordsNotMatching:"Les mots de passe ne correspondent pas",UpdateMyPassword:"Réviser mon mot de passe",UserSettings:"Paramètres Utilisateur",ChangePassword:"Changer le Mot de Passe",LeaveokKindred:"Quitter ok!Kindred",LanguageLabel:"Langage:",ReceiveFamilyEmailUpdates:"Recevoir des notifications par email lorsque les informations sur la famille sont mises à jour",ReceivePhotoTaggingEmailUpdates:"Recevoir des notifications par e-mail lorsque vous êtes identifié sur des photos",UserSettingsSaved:"Paramètres Utilisateur Enregistrés",PasswordBreach1:"Ce mot de passe n'est pas sécurisé!",PasswordBreach2:"Il a été utilisé dans d'autres sites qui ont eu des violation de données et devrait être\n      changé pour garder votre compte ok!Kindred sécurisé",PasswordBreach3:"Veuillez changer votre mot de passe en allant à ",ForMoreInformation:"Pour plus d'informations:",ChangePasswordDescription:"Entrez votre ancien mot de passe, puis créez un nouveau mot de passe et confirmez-le. Votre nouveau mot de passe devrait\n      être d'au moins 8 caractères",OldPassword:"Ancien Mot de Passe",NewPassword:"Nouveau Mot de Passe",PasswordUpdated:"Nouveau Mot de Passe Enregistré",IncorrectOldPassword:"Votre ancien mot de passe est incorrect",LeaveSite:"Quitter ok!Kindred",LeaveSiteSingleUserDescription:"En quitant ok!Kindred, votre profil, toutes les données de la famille et les images seront supprimés",EnterYourPasswordToConfirm:"Entrez votre mot de passe pour confirmer:",CurrentUsersAccessToFamilyData:"Ce sont tous les utilisateurs qui gèrent les données sur la famille:",LeaveSiteMultipleUsersDescription:"Vous pouvez choisir de supprimer votre profil ou de le conserver pour les autres utilisateurs de votre famille.",LeaveSiteMultipleUsersDescription2:"Si tous les utilisateurs ci-dessus quittent le site, toutes les données relatives à la famille seront supprimées.",DeleteMyProfile:"Supprimer mon profil",LeaveSiteKeepMyProfile:"Votre profil sera préservé",LeaveSiteDeleteMyProfile:"Votre profil sera supprimé",AddAncestor:"Ajouter un Ancêtre",AddDescendant:"Ajouter un Descendant",AddPartner:"Ajouter un Partenaire",AreYouSureDelete:"Etes-vous sûr de vouloir supprimer le profil?",NewPerson:"Nouvelle Personne",ExistingPerson:"Personne Existante",Required:"Champs obligatoires",BreakLinks:"Couper Les Liens",Raised:"Elevé",RaisedBy:"Elevé Par",Partnered:"Partenaire",SuggestedRelations:"Relations Suggérées",AreXandYPartners:"Est-ce que {fromPersonName} et {toPersonName} sont des partenaires?",DidXraiseY:"Est-ce que {fromPersonName} a élevé {toPersonName}?",JoinSite:"S'inscrire à ok!Kindred",JoinSiteDescription:"Pour créer un nouveau réseau familial et s'inscrire à ok! Kindred, veuillez fournir le\n      information suivante:",EmailInUse:"Cet email est déjà utilisé",ThankYou:"Merci!",PleaseCheckEmail:"Veuillez vérifier votre email {email} pour confirmer votre compte.",InvalidEmail:"Email invalide",AlreadySignedUp:"Vous avez déjà un compte?",AccountConfirmation:"Confirmation du Compte",PleaseCreatePassword:"Veuillez créer un mot de passe pour votre compte:",NewProfilePhoto:"Nouvelle Photo de Profil",UploadNewProfilePhoto:"Téléchargez une nouvelle photo de profil pour {personName}:",SelectFile:"Choisissez votre fichier",PleaseTrimImage:"Veuillez découper l'image pour l'adapter à une photo de profil:",UploadingImagePleaseWait:"Chargement d'une nouvelle image, veuillez patienter...",AllGalleries:"Toutes galeries",NoGalleries:"Aucune galerie d'images trouvée.",AddNewGallery:"Ajouter une nouvelle galerie",NoImagesInGallery:"Aucune image trouvée dans la galerie",AddNewImages:"Ajouter de nouvelles images",CreateNewGallery:"Créer une Nouvelle Galerie",EditGallery:"Editer la Galerie",DeleteGalleries:"Supprimer des Galeries",DeleteGalleriesDesc:"Êtes-vous sûr de vouloir supprimer les galeries sélectionnées?\n      Il supprimera également toutes les images qu’il contient.",DeleteImages:"Suppression d'image",DeleteImagesDesc:"Êtes-vous sûr de vouloir supprimer les images sélectionnées?",SelectGallery:"Sélectionnez une Galerie",UploadImages:"Importer des images",SelectFiles:"Sélectionnez les fichiers",Pending:"En Attendant",Uploading:"Téléchargement",Processing:"En traitement",Failed:"Échoué",UploadFinished:"Téléchargement Terminé",AllUploadsSuccessful:"Tous les Téléchargements Réussis",XSuccessfulYFailed:"{success} image(s) téléchargée(s) avec succès, {fail} échoué(s)",ImagesOfX:"Images de {name}",NoImagesOfPerson:"Aucune image de {name} n'a encore été taguée.",GoToGalleries:"Voir galeries",GoToGallery:"Voir la galerie",EditImage:"Éditer l'Image",Details:"Détails",GalleryThumbnail:"Vignette pour la Galerie",AddTags:"Cliquez/Touchez image pour marquer les gens",WhoIsThis:"Qui est-ce?",DeleteTags:"Supprimer les Etiquettes",InviteConfirmation:"ok!Kindred Confirmation d'Invitation",HelloName:"Salut {name}!",YouHaveBeenInvited:"Merci d'avoir accepté l'invitation de {invitedBy}\n      pour joindre ok!kindred, partagez votre arbre généalogique et restez en contact avec les membres de votre famille!",CannotFindInvite:"ok!Kindred invitation non trouvé",CannotFindInviteDescription:"S'il vous plaît vérifier avec celui qui vous a envoyé l'invitation et notez que les invitations expirent après 2 semaines.",PrivacyPolicy:"Politique de Confidentialité",WhoAreWe:"Qui Sommes Nous?",WhoAreWeDescription:"ok!Kindred est opéré par Tech Luminaire Ltd:",CompanyContactEmail:"Notre email pour toutes les demandes de renseignements ok!kindred enquiries est info@okkindred.com",CompanyContactTelephone:"Notre numéro de téléphone est le +44 2476 982000. Veuillez noter que nous ne fournissons pas d'assistance technique par téléphone.",CompanyNumber:"Nous sommes enregistrés en Angleterre et au Pays de Galles sous le numéro 08864499.",CompanyVATNumber:"Numéro de TVA: 207242637",WhatInformationWeCollect:"Quelles Informations Collectons-Nous?",WhatInformationWeCollectDescription:"Nous recueillons des données pour créer un arbre généalogique et un profil des personnes de votre arbre généalogique.\n      Ce sont des informations que vous choisissez de stocker sur le site. Elles incluent les noms, les années de naissance, les lieux, les coordonnées et les images.",WhatInformationWeCollectDescription2:"Des informations automatisées telles que l'adresse IP (Internet Protocol) utilisée pour connecter votre appareil à Internet,\n      des informations de connexion telles que le type et la version du navigateur, des informations sur votre appareil,\n      y compris le type d'appareil et son identifiant, sont également collectées.",WhatWeDoWithInformation:"Ce que nous faisons avec vos informations",WhatWeDoWithInformationDescription:"Nous ne vendons pas vos données à des tiers.\n      Les informations que vous partagez avec le site sont utilisées pour créer votre arbre généalogique / réseau.\n      Les informations automatisées sont utilisées pour nous aider à surveiller et à améliorer le service.\n      Vos photos sont utilisées pour former le service afin de vous aider à marquer vos propres photos.\n      Votre position que vous indiquez sur votre profil est envoyée à Google ou aux services de géolocalisation de Microsoft afin de placer la personne sur une carte.\n      Aucune autre information n'est envoyée avec l'emplacement.\n      Aucun membre du public en dehors de votre réseau familial ne peut voir les données de l'arbre généalogique que vous partagez avec le service.",HowWeStoreYourInformation:"Comment Nous Stockons vos Informations",HowWeStoreYourInformationDescription:"Notre service fonctionne sur PythonAnywhere (https://www.pythonanywhere.com) et vos données sont stockées sur leurs serveurs.\n      Ils exploitent des serveurs aux États-Unis gérés par Amazon Web Services, qui est certifié dans le cadre du bouclier de protection de la vie privée UE-États-Unis.\n      Cela fournit des garanties en ce qui concerne le traitement de vos données personnelles.\n      Les photos sont stockées directement dans Amazon Web Services sans passer par PythonAnywhere.\n      Vos données ne sont pas transmises à des tiers.",HowWeStoreYourInformationDescription2:"Si vous êtes le seul utilisateur de votre réseau familial, vos données sont généralement supprimées dès que vous supprimez votre compte.\n      S'il y a beaucoup d'utilisateurs dans votre réseau familial, vous êtes traité en tant que copropriétaire des données.\n      Lorsque vous supprimez votre compte, vous pouvez choisir de supprimer votre profil.\n      Toutes les informations du réseau familial sont supprimées lorsque tous les utilisateurs de votre réseau familial suppriment leurs comptes.\n      Les sauvegardes de données peuvent être conservées jusqu'à 2 semaines.",YourDataProtectionRights:"Vos Droits de Protection des Données",YourDataProtectionRightsDescription:"Vous avez le droit de nous demander des copies de vos informations personnelles et de rectifier les informations que vous jugez inexactes.\n      Vous avez également le droit de nous demander de compléter des informations que vous jugez incomplètes.\n      Vous avez le droit de nous demander d'effacer vos informations personnelles dans certaines circonstances.\n      Vous avez le droit de nous demander de limiter le traitement de vos informations dans certaines circonstances.\n      Vous avez le droit de vous opposer au traitement de vos données personnelles dans certaines circonstances.\n      Vous avez le droit de demander que nous transmettions les informations que vous nous avez données à une autre organisation ou à vous-même, dans certaines circonstances.\n      Vous n'êtes pas tenu de payer des frais pour l'exercice de vos droits. Si vous faites une demande, nous avons un mois pour vous répondre.",LinksToOtherWebsites:"Liens vers d'autres Sites Web",LinksToOtherWebsitesDescription:"Ce site contient des liens vers d'autres sites.\n      Nous ne sommes pas responsables du contenu des autres sites Web ni de la manière dont ils traitent les informations personnelles.",HowToComplain:"Comment se Plaindre",HowToComplainDescription:"Si vous avez une plainte concernant la manière dont nous traitons vos informations personnelles,\n      veuillez nous contacter via l'adresse électronique ci-dessus.\n      Si vous n'êtes pas satisfait de notre réponse ou pensez que nous ne traitons pas vos informations personnelles conformément à la loi,\n      vous pouvez déposer une plainte auprès du Bureau du Commissaire à l'information (ICO):"}},T={message:{Edit:"編輯",Done:"做",Delete:"刪除",Ok:"好",Cancel:"取消",Close:"關",Yes:"是",No:"不是",Confirm:"證實",Back:"返回",Title:"標題",Description:"描述",Family:"家庭",Tree:"樹",Map:"地圖",Gallery:"畫廊",Search:"搜索",About:"關於",Settings:"設置",Logout:"登出",Login:"登錄",Profile:"輪廓",Toolbar:"工具欄",Fullscreen:"全屏",Tags:"標籤",Download:"下載",Previous:"前",Next:"下面",ShowPassword:"顯示密碼",PleaseSignIn:"請登錄",EmailAddress:"電子郵件地址",Password:"密碼",SignIn:"簽到",IForgotMyPassword:"我忘記了我的密碼",InvalidLogin:"登錄無效",AccountLocked:"您的帳戶已被鎖定24小時後4失敗的登錄嘗試",NoAccount:"沒有帳戶，也沒有邀請？",SignUp:"報名",Slide1Header:"歡迎就ok!Kindred！血族",Slide1Desc:"自由和開放源碼協作族譜和照​​片共享網站",Slide2Header:"創建和共享",Slide2Desc:"創建並與您的家人共享一個多語種的家譜，並邀請你的家庭成員進行查看，並添加到它",Slide3Header:"地圖你的家人",Slide3Desc:"繪製地圖上的每個親戚的位置",Slide4Header:"分享照片",Slide4Desc:"分享照片私下你的家人之間，並標記您的家庭成員",SignUpButton:"註冊",ViewDetails:"查看詳情",OurStory:"我們的故事",OurStoryStub:"你想知道我們如何和為什麼建立這個網站的故事嗎？",ContactUs:"聯繫我們",ContactUsStub:"如果您有任何疑問，希望報告中的錯誤，要求一個功能或有助於源代碼。",FAQ:"常問問題",FAQStub:"經常問的問題",StoryHeading:"它是如何開始",StoryText1:"你好。我在左邊賈斯汀。而我在右邊阿德里安",StoryText2:"這是一個網站來記錄我們的家譜和行為有點像社交網絡。您可以在這裡保持一個配置文\n      件，發現樹達到多遠！\n      當一個人被添加到家譜，他們收到一封電子郵件，所以他們可能會成為用\n      戶與更多的人加入它。\n      該網站是由我們的家庭聚會，並解釋我們是如何所有相關的困難啟發。我\n      們家現在是非常多樣的許多種族和已遍布全球。\n      隨著家庭的成長和發展，我們就想了一個辦法來記錄每個人都保持聯\n      繫。",ContactHeading:"聯繫",ContactEmail:'通過電子郵件<a href="mailto:info@okkindred.com">info@okkindred.com</a>與我"\n      們聯繫',ContactText1:"如果您對我們的家庭，我們希望收到你的來信，並歡迎各界人士光臨，並保持周圍的任\n      何時間。\n      如果你有一個登錄這個網站，是我家庭的一部分，你可以得到我的電話號\n      碼和地址從我的個人資料！",ContactText2:"另外，如果您正在使用該網站尋找一些幫助，或者即使你想讓我們幫你建立自己的類似\n      網站請給我們行！",ContactText3:"我們是相當不錯的人，做喜歡跟感興趣的薩姆斯的事情，我們也是人：野人的東西，軟\n      件，音樂和瘋狂的泛全球的中國家庭...",FAQHeading:"經常問的問題",Question1:"任何人都可以看到我家的信息？",Answer1:"沒有，只有你邀請你的家庭樹內的人可以看到您輸入的信息。這些信息也不會被外部用\n      戶或搜索引擎進行搜索。",Question2:"我的信息安全嗎？",Answer2:"我們非常重視安全和隱私非常重視。我們一直在這個網站我們家的細節，我們永遠不會\n      做任何損害這些數據！\n      你邀請來共享你的樹只有你自己的家庭成員都能夠看到你在網站上輸入的\n      信息。\n      此外，我們不會出售，交易或出租您的個人身份信息給他人。",Answer2a:'該網站託管與\n      <a href="https://www.pythonanywhere.com/?affiliate_id=00022aed"> PythonAnywhere</a>\n      自己拿誰的隱私非常重視。\n      我們還使用<a href="https://aws.amazon.com/s3/">Amazon S3</a>\n      存儲您上傳的所有圖片。\n      我們使用第三方<a href="https://en.wikipedia.org/wiki/Geocoding"">地理編碼服務</a>\n      （谷歌和微軟）。這是對一個位置轉換成經度和緯度，所以我們可\n      以繪製它在地圖上。\n      然而信息（例如名稱）沒有其他識別件與此位置對這些第三方提供。\n      因此，例如，我們將完全派詞\'香港\'到谷歌誰就會給我們一個經度和緯\n      度，所以我們可以繪製它在地圖上。',Answer2b:"如果您擔心，該網站是完全開源的，所以你可以把源代碼副本（見下文），看看你的信\n      息如何存儲，甚至舉辦自己的這個網站的版本。\n      我們將很樂意幫助你設置它多了起來。",Question3:"我可以看到源代碼？",Answer3:'源代碼位於<a href="https://github.com/JustinWingChungHui/okKindred">Github.com</a>。\n      你看到什麼okKindred.com從“生產”分支跳轉。',Answer3a:'我們與這意味著您可以自由使用，複製和修改代碼以實現自己的目的的\n      <a href="https://en.wikipedia.org/wiki/MIT_License">MIT許可證頒發</a>它。\n      該<a href="https://github.com/JustinWingChungHui/okKindred/blob/master/README.rst">自述</a>\n      包含它如何工作的，並分步說明基本概述部署您自己的\n      "實例。',Answer3b:'我們歡迎任何人誰有任何意見或誰願意參與這一項目，並使其更好！我們特別需要翻譯\n      成其他語言的幫助。\n      請<a href="mailto:info@okkindred.com?subject=Development">取得聯繫</a>\n      如果您想貢獻，或（甚至更好），使在Github上拉請求:)',Question4:"是什麼在它適合你，如果它是免費的嗎？",Answer4:"我們是軟件開發者，這是在課餘時間，擴大我們的技能，並加入到我們的產品來向別人\n      炫耀創建的項目。\n      這是組織對自己的家庭信息化的最佳途徑，我們希望新用戶將提供建議，\n      以提高網站甚至貢獻代碼。",Question5:"哪些瀏覽器這項工作呢？",Answer5:'"該網站是在桌面和移動上的瀏覽器的最新版本進行測試。\n      有可能是不支持的瀏覽器，如較舊的Android瀏覽器，Internet Explorer\n      9的以下問題。',Question6:"是否有圖像的限制，我可以上傳？",Answer6:'沒有此刻沒有。這些圖像存儲在<a href="https://aws.amazon.com/s3/">Amazon S3</a>\n      所以我們不介意立足點的成本，這是非常非常便宜。\n      但是，如果有很多用戶開始上傳圖片的成千上萬，我們將創建一個限制。',Question7:"我可以宣傳你的網站？",Answer7:"我們沒有計劃通過廣告主要是因為我們不希望受到我們的祖母給任何更多的廣告比他們\n      目前得到的網站上，以籌集資金。",Question8:"我發現了一個bug！",Answer8:'請告訴我們！您可以\n      <a href="mailto:info@okkindred.com?Subject=I%%20found%%20a%%20bug!">給我們發電子郵件</a>\n      或您可以將其添加到的\n      <a href ="https://github.com/JustinWingChungHui/okKindred/issues">issues </a>\n      列表Github上。\n      如果它是一個安全漏洞需要盡快知道，以便我們能夠解決它！',Question9:"你可以添加一個功能，因此它可以做XXXXX嗎？",Answer9:'隨時通過\n      <a href="mailto:info@okkindred.com?Subject=Feature%%20Request">info@okkindred.com</a>\n      索要新功能。我們肯定會考慮他們，特別是如果這將有利於很\n      多人（即我們的家庭）。\n      這個網站是在課餘時間完成的，所以他們做的時候功能要求會做。',Question10:"其他家譜網站查找當地的記錄，以幫助創建樹，你可以這樣做？",Answer10:"我們沒有計劃尚未實現這一點。是的原因是，大多數我們的家庭從中國起源。\n      因為清朝的最後十年期間，在中國發生在20世紀和不穩定的內戰，\n      一些可用的記錄存在，這將是對我們有利的。",Answer10a:"鑑於許多家譜網站已經這樣做了，我們會嘗試更多的精力在這個項目上的社交網絡\n      側。\n      然而，這並不是說，如果在時間上非常需要變得明顯，我們不會看看如何\n      實現這樣的功能。",Question11:"為了描述關係，你有'合作'，但不是'結婚'，你'長大'，但不是'生了“？",Answer11:"我們試圖保持網站盡可能簡單和盡可能具有包容性。的“凸起”，“提出者”和定義，'合\n      作'提供足夠的信息來構建樹。\n      它們包括不具有婚姻觀念的跨文化關係。\n      它們可以包括民間的合作夥伴關係，英美法系的合作夥伴，離婚，收養和\n      任何其他的定義可能會或可能不會在不同的文化存在。",AboutFooter:"許頴聰 和 朱俊豪",LockedForOtherUsers:"鎖定其他用戶",Name:"名稱",Gender:"性別",BirthYear:"出生年",DeathYear:"卒年",SpokenLanguages:"講什麼語言",Email:"電子郵件",Occupation:"佔用",TelephoneNumber:"電話號碼",Location:"位置",Website:"網站",SkypeName:"Skype用戶名",Facebook:"Facebook",Twitter:"Twitter",LinkedIn:"LinkedIn",Female:"女",Male:"男",NonBinary:"非二進制",Other:"其他",PreferNotToSay:"不想說",Biography:"傳",BiographyNotExist:"傳記還沒有為這個語言編寫",InviteToJoin:"邀請加入",Photos:"相片",ClickToEdit:"點擊編輯",UploadNewPhoto:"上傳新照片",CoreFamilyMembers:"親密的家庭成員",Parents:"父母",Siblings:"兄弟姐妹",Partners:"伴侶",Children:"兒女",LocationForPersonNotSpecified:"未為人指定位置",SearchName:"搜索名稱",PasswordReset:"重設密碼",PasswordResetDescription:"請輸入您的電子郵件以開始重置密碼的過程：",ResetMyPassword:"重置我的密碼",PasswordResetRequested:"請求密碼重置",CheckYourEmailForReset:"請查看您的電子郵件以獲取更多說明",PasswordResetConfirmation:"密碼重置確認",PasswordResetConfirmationDescription:"請輸入您的新密碼. 您的新密碼至少應為8個字符。",PasswordConfirmation:"確認您的新密碼",PasswordsNotMatching:"密碼不匹配",UpdateMyPassword:"更新我的密碼",UserSettings:"用戶設置",ChangePassword:"更改密碼",LeaveokKindred:"退出 ok！Kindred",LanguageLabel:"語言:",ReceiveFamilyEmailUpdates:"在更新家庭信息時接收電子郵件通知",ReceivePhotoTaggingEmailUpdates:"在照片中標記時接收電子郵件通知",UserSettingsSaved:"用戶設置已保存",PasswordBreach1:"這個密碼不安全！",PasswordBreach2:"它已被用於其他有隱私洩露的網站，應該是\n      更改為保持您的 ok！Kindred 帳戶安全",PasswordBreach3:"請轉到，更改密碼 ",ForMoreInformation:"欲獲得更多信息：",ChangePasswordDescription:"輸入舊密碼，然後創建一個新密碼並確認。 你的新密碼應該\n      至少8個字符",OldPassword:"舊密碼",NewPassword:"新密碼",PasswordUpdated:"密碼已更新",IncorrectOldPassword:"您的舊密碼不正確",LeaveSite:"放棄 ok!Kindred",LeaveSiteSingleUserDescription:"離開 ok！Kindred 將刪除您的所有個人資料，所有家庭數據和圖片。",EnterYourPasswordToConfirm:"輸入您的密碼進行確認：",CurrentUsersAccessToFamilyData:"這些是目前策劃家庭數據的所有用戶：",LeaveSiteMultipleUsersDescription:"您可以選擇刪除自己的個人資料，也可以為家庭中的其他用戶保留該個人資料。",LeaveSiteMultipleUsersDescription2:"如果以上所有用戶都離開了該站點，則將刪除整個家庭數據。",DeleteMyProfile:"刪除我的個人資料",LeaveSiteKeepMyProfile:"個人資料將被保留",LeaveSiteDeleteMyProfile:"個人資料將被刪除",AddAncestor:"添加祖先",AddDescendant:"添加後代",AddPartner:"添加合作夥伴",AreYouSureDelete:"你確定要刪除的個人資料？",NewPerson:"新人",ExistingPerson:"現有人",Required:"需要",BreakLinks:"歇關係",Raised:"上調",RaisedBy:"上調",Partnered:"合作",SuggestedRelations:"建議的關係",AreXandYPartners:"{fromPersonName}和{toPersonName}是合作夥伴嗎？",DidXraiseY:"{fromPersonName}是否提升{toPersonName}？",JoinSite:"加入 ok!Kindred",JoinSiteDescription:"要建立一个新的家庭网络并加入ok！亲属，请提供\n      以下信息：",EmailInUse:"电子邮件已在使用中",ThankYou:"谢谢！",PleaseCheckEmail:"请检查您的电子邮件{email}以确认您的帐户。",InvalidEmail:"不合規電郵",AlreadySignedUp:"已經有帳號了？",AccountConfirmation:"帳戶確認",PleaseCreatePassword:"請為您的帳戶創建密碼：",NewProfilePhoto:"新的個人資料照片",UploadNewProfilePhoto:"為{personName}上傳新的個人資料照片：",SelectFile:"選擇文件",PleaseTrimImage:"請修整圖像以適合個人資料圖片：",UploadingImagePleaseWait:"正在上傳新圖片，請稍候...",AllGalleries:"所有畫廊",NoGalleries:"找不到圖片庫。",AddNewGallery:"添加新圖庫",NoImagesInGallery:"在圖庫中找不到圖像",AddNewImages:"添加新圖片",CreateNewGallery:"創建新圖庫",EditGallery:"編輯圖庫",DeleteGalleries:"刪除圖庫",DeleteGalleriesDesc:"您確定要刪除所選的畫廊嗎？\n      它還將刪除其中的所有圖像。",DeleteImages:"刪除圖像",DeleteImagesDesc:"您確定要刪除所選的畫廊嗎？",SelectGallery:"選擇圖庫",UploadImages:"上傳圖片",SelectFiles:"選擇文件",Pending:"有待",Uploading:"上傳",Processing:"處理",Failed:"失敗",UploadFinished:"上傳完成",AllUploadsSuccessful:"所有上傳成功",XSuccessfulYFailed:"{success}圖片上傳成功，{fail}失敗",ImagesOfX:"{name}的圖片",NoImagesOfPerson:"還沒有標記{name}的圖片。",GoToGalleries:"去畫廊",GoToGallery:"去畫廊",EditImage:"編輯圖像",Details:"細節",GalleryThumbnail:"圖庫縮略圖",AddTags:"點擊/觸摸圖像標記的人",WhoIsThis:"這是誰？",DeleteTags:"刪除標籤",InviteConfirmation:"ok!Kindred 邀請確認",HelloName:"你好 {name}!",YouHaveBeenInvited:"感謝您接受{inviteBy}的邀請\n      加入 okkindred，分享您的家譜並與您的家人保持聯繫！",CannotFindInvite:"ok!Kindred 沒有找到邀請",CannotFindInviteDescription:"請與向您發送邀請的人確認，並註意邀請在2週後過期。",PrivacyPolicy:"隱私政策",WhoAreWe:"我們是誰",WhoAreWeDescription:"ok!Kindred 由 Tech Luminaire Ltd 經營:",CompanyContactEmail:"我們所有 ok!kindred 諮詢的電子郵件是 info@okkindred.com",CompanyContactTelephone:"我們的電話號碼是+44 2476982000。請注意，我們不通過電話提供技術支持。",CompanyNumber:"我們在英格蘭和威爾士註冊為公司08864499。",CompanyVATNumber:"增值稅號：207242637",WhatInformationWeCollect:"我們收集什麼信息",WhatInformationWeCollectDescription:"我們收集數據以建立家譜和您家譜中人員的資料。\n      這是您選擇存儲在網站上的信息，包括姓名，出生年月，位置，聯繫方式和圖像。",WhatInformationWeCollectDescription2:"還將收集自動信息，例如用於將設備連接到Internet的Internet協議（IP）地址，\n      連接信息（例如瀏覽器類型和版本），有關設備的信息（包括設備類型和設備標識符）。",WhatWeDoWithInformation:"我們如何處理您的信息",WhatWeDoWithInformationDescription:"我們不會將您的數據出售給任何第三方。您與網站共享的信息用於創建您的家譜/網絡。\n      自動化信息用於幫助我們監視和改進服務。您的照片用於訓練服務，以幫助您標記自己的照片。\n      您在個人資料上提交的位置信息將發送到Google或Microsoft的地理位置服務，以將該人放置在地圖上。\n      該位置不會發送其他信息。您的家庭網絡外部的任何公眾都無法看到您與服務共享的家譜數據。",HowWeStoreYourInformation:"我們如何存儲您的信息",HowWeStoreYourInformationDescription:"我們的服務在PythonAnywhere（https://www.pythonanywhere.com）上運行，您的數據存儲在其服務器上。\n      他們在美國操作由Amazon Web Services管理的服務器，該服務器已通過歐盟-美國隱私保護框架認證。這為處理您的個人數據提供了保障。\n      照片無需通過PythonAnywhere即可直接存儲到Amazon Web Services。您的數據不會傳輸給任何其他第三方。",HowWeStoreYourInformationDescription2:"如果您是家庭網絡中的唯一用戶，則通常在刪除帳戶後即會刪除您的數據。如果您的家庭網絡中有很多用戶，則將您視為數據的共同所有者。\n      刪除帳戶時，您可以選擇刪除個人資料。當您的家庭網絡中的所有用戶刪除其帳戶時，整個家庭網絡信息都將被刪除。數據備份最多可以保留2週。",YourDataProtectionRights:"您的數據保護權利",YourDataProtectionRightsDescription:"您有權要求我們提供您的個人信息的副本，並糾正您認為不正確的信息。\n      您也有權要求我們完成您認為不完整的信息。您有權要求我們在某些​​情況下刪除您的個人信息。\n      您有權要求我們在某些​​情況下限制您信息的處理。您有權在某些情況下反對處理您的個人數據。\n      您有權要求我們在某些​​情況下將您提供給我們的信息轉移給另一個組織或您。\n      您無需為行使權利而支付任何費用。如果您提出要求，我們有一個月的時間回复您。",LinksToOtherWebsites:"鏈接到其他網站",LinksToOtherWebsitesDescription:"該網站包含指向其他網站的鏈接。\n      我們對其他網站的內容或它們如何處理個人信息概不負責。",HowToComplain:"如何投訴",HowToComplainDescription:"如果您對我們如何處理您的個人信息有任何投訴，請通過上面的電子郵件地址與我們聯繫。\n      如果您對我們的答復不滿意或認為我們沒有依法處理您的個人信息，則可以向信息專員辦公室（ICO）投訴:"}},R={message:{Edit:"编辑",Done:"做",Delete:"删除",Ok:"好",Cancel:"取消",Close:"关",Yes:"是",No:"不是",Confirm:"证实",Back:"返回",Title:"标题",Description:"描述",Family:"家庭",Tree:"树",Map:"地图",Gallery:"画廊",Search:"搜索",About:"关于",Settings:"设置",Logout:"登出",Login:"登录",Profile:"轮廓",Toolbar:"工具栏",Fullscreen:"全屏",Tags:"标签",Download:"下载",Previous:"以前",Next:"未来",ShowPassword:"显示密码",PleaseSignIn:"请登录",EmailAddress:"电子邮件地址",Password:"密码",SignIn:"签到",IForgotMyPassword:"我忘记了我的密码",InvalidLogin:"登录无效",AccountLocked:"您的帐户已被锁定24小时后4失败的登录尝试",NoAccount:"没有帐户，也没有邀请？",SignUp:"报名",Slide1Header:"欢迎就ok!Kindred血族",Slide1Desc:"自由和开放源码协作族谱和照片共享网站。",Slide2Header:"创建和共享",Slide2Desc:"创建并与您的家人共享一个多语种的家谱，并邀请你的家庭成员进行查看，并添加到它",Slide3Header:"地图你的家人",Slide3Desc:"绘制地图上的每个亲戚的位置",Slide4Header:"分享照片",Slide4Desc:"分享照片私下你的家人之间，并标记您的家庭成员",SignUpButton:"注册",ViewDetails:"查看详情",OurStory:"我们的故事",OurStoryStub:"你想知道我们如何和为什么建立这个网站的故事吗",ContactUs:"联系我们",ContactUsStub:"如果您有任何疑问，希望报告中的错误，要求一个功能或有助于源代码",FAQ:"常问问题",FAQStub:"经常问的问题",StoryHeading:"它是如何开始",StoryText1:"你好。我在左边贾斯汀。而我在右边阿德里安",StoryText2:'"这是一个网站来记录我们的家谱和行为有点像社交网络。您可以在这里保持一个配置文\n      "件，发现树达到多远!\n      当一个人被添加到家谱，他们收到一封电子邮件，所以他们可能会成为用\n      户与更多的人加入它\n      该网站是由我们的家庭聚会，并解释我们是如何所有相关的困难启发。我\n      们家现在是非常多样的许多种族和已遍布全球。\n      随着家庭的成长和发展，我们就想了一个办法来记录每个人都保持联\n      系。',ContactHeading:"联系",ContactEmail:'通过电子邮件<a href="mailto:info@okkindred.com">info@okkindred.com</a>与我们联系',ContactText1:'如果您对我们的家庭，我们希望收到你的来信，并欢迎各界人士光临，并保持周围的任"\n      何时间\n      如果你有一个登录这个网站，是我家庭的一部分，你可以得到我的电话号\n      码和地址从我的个人资料！',ContactText2:"另外，如果您正在使用该网站寻找一些帮助，或者即使你想让我们帮你建立自己的类似\n      网站请给我们行！",ContactText3:'"我们是相当不错的人，做喜欢跟感兴趣的萨姆斯的事情，我们也是人：野人的东西，软\n      件，音乐和疯狂的泛全球的中国家庭...',FAQHeading:"经常问的问题",Question1:"任何人都可以看到我家的信息？",Answer1:"没有，只有你邀请你的家庭树内的人可以看到您输入的信息。这些信息也不会被外部用\n      户或搜索引擎进行搜索。",Question2:"我的信息安全吗",Answer2:"我们非常重视安全和隐私非常重视。我们一直在这个网站我们家的细节，我们永远不会\n      做任何损害这些数据!\n      你邀请来共享你的树只有你自己的家庭成员都能够看到你在网站上输入的\n      信息。\n      此外，我们不会出售，交易或出租您的个人身份信息给他人",Answer2a:'该网站托管与\n      <a href="https://www.pythonanywhere.com/?affiliate_id=00022aed">PythonAnywhere</a>\n      自己拿谁的隐私非常重视。\n      我们还使用<a href="https://aws.amazon.com/s3/">Amazon S3</a>\n      存储您上传的所有图片。\n      我们使用第三方\n      <a href="https://en.wikipedia.org/wiki/Geocoding">地理编码服务</a>\n      （谷歌和微软）。这是对一个位置转换成经度和纬度，所以我们可\n      以绘制它在地图上。\n      然而信息（例如名称）没有其他识别件与此位置对这些第三方提供。\n      因此，例如，我们将完全派词\'香港\'到谷歌谁就会给我们一个经度和纬\n      度，所以我们可以绘制它在地图上。',Answer2b:"如果您担心，该网站是完全开源的，所以你可以把源代码副本（见下文），看看你的信\n      息如何存储，甚至举办自己的这个网站的版本。\n      我们将很乐意帮助你设置它多了起来。",Question3:"我可以看到源代码？",Answer3:'源代码位于\n      <a href="https://github.com/JustinWingChungHui/okKindred">Github.com</a>。\n      你看到什么okKindred.com从“生产”分支跳转。',Answer3a:'我们与这意味着您可以自由使用，复制和修改代码以实现自己的目的的\n      <a href="https://en.wikipedia.org/wiki/MIT_License"> MIT许可证颁发</a>它。\n      该<a href="https://github.com/JustinWingChungHui/okKindred/blob/master/README.rst">自述</a>\n      包含它如何工作的，并分步说明基本概述部署您自己的\n      实例。',Answer3b:'我们欢迎任何人谁有任何意见或谁愿意参与这一项目，并使其更好！我们特别需要翻译\n      "成其他语言的帮助。\n      请<a href="mailto:info@okkindred.com?subject=Development">取得联系</a>\n      如果您想贡献，或（甚至更好），使在Github上拉请求:)',Question4:"是什么在它适合你，如果它是免费的吗？",Answer4:"我们是软件开发者，这是在课余时间，扩大我们的技能，并加入到我们的产品来向别人\n      炫耀创建的项目。\n      这是组织对自己的家庭信息化的最佳途径，我们希望新用户将提供建议，\n      以提高网站甚至贡献代码。",Question5:"哪些浏览器这项工作呢？",Answer5:"该网站是在桌面和移动上的浏览器的最新版本进行测试。\n      有可能是不支持的浏览器，如较旧的Android浏览器，Internet Explorer\n      9的以下问题。",Question6:"是否有图像的限制，我可以上传？",Answer6:'没有此刻没有。这些图像存储在\n      <a href="https://aws.amazon.com/s3/">Amazon S3</a>\n      所以我们不介意立足点的成本，这是非常非常便宜。\n      但是，如果有很多用户开始上传图片的成千上万，我们将创建一个限制。',Question7:"我可以宣传你的网站？",Answer7:"我们没有计划通过广告主要是因为我们不希望受到我们的祖母给任何更多的广告比他们\n      目前得到的网站上，以筹集资金。",Question8:"我发现了一个bug！",Answer8:'请告诉我们！您可以\n      <a href="mailto:info@okkindred.com?Subject=I%%20found%%20a%%20bug!">给我们发电子邮件</a>\n      或您可以将其添加到的\n      <a href =“https://github.com/JustinWingChungHui/okKindred/issues">issues</a>\n      列表Github上。\n      如果它是一个安全漏洞需要尽快知道，以便我们能够解决它！',Question9:"你可以添加一个功能，因此它可以做XXXXX吗",Answer9:'随时通过\n      <a href="mailto:info@okkindred.com?Subject=Feature%%20Request">info@okkindred.com</a>\n      索要新功能。我们肯定会考虑他们，特别是如果这将有利于\n      很多人（即我们的家庭）。\n      这个网站是在课余时间完成的，所以他们做的时候功能要求会做。',Question10:"其他家谱网站查找当地的记录，以帮助创建树，你可以这样做？",Answer10:"我们没有计划尚未实现这一点。是的原因是，大多数我们的家庭从中国起源。\n      因为清朝的最后十年期间，在中国发生在20世纪和不稳定的内战，\n      一些可用的记录存在，这将是对我们有利的。",Answer10a:"鉴于许多家谱网站已经这样做了，我们会尝试更多的精力在这个项目上的社交网络\n      侧。\n      然而，这并不是说，如果在时间上非常需要变得明显，我们不会看看如何\n      实现这样的功能。",Question11:"为了描述关系，你有'合作'，但不是'结婚'，你'长大'，但不是'生了“？",Answer11:"我们试图保持网站尽可能简单和尽可能具有包容性。的“凸起”，“提出者”和定义，'合\n      作'提供足够的信息来构建树。\n      它们包括不具有婚姻观念的跨文化关系。\n      它们可以包括民间的合作伙伴关系，英美法系的合作伙伴，离婚，收养和\n      任何其他的定义可能会或可能不会在不同的文化存在。",AboutFooter:"許頴聰 和 朱俊豪",LockedForOtherUsers:"锁定其他用户",Name:"名称",Gender:"性别",BirthYear:"出生年",DeathYear:"卒年",SpokenLanguages:"讲什么语言",Email:"电子邮件",Occupation:"占用",TelephoneNumber:"电话号码",Location:"位置",Website:"网站",SkypeName:"Skype用户名",Facebook:"Facebook",Twitter:"Twitter",LinkedIn:"LinkedIn",Female:"女",Male:"男",NonBinary:"非二进制",Other:"其他",PreferNotToSay:"不想说",Biography:"传",BiographyNotExist:"传记还没有为这个语言编写",InviteToJoin:"邀请加入",Photos:"相片",ClickToEdit:"点击编辑",UploadNewPhoto:"上传新照片",CoreFamilyMembers:"亲密的家庭成员",Parents:"父母",Siblings:"兄弟姐妹",Partners:"丈夫",Children:"儿女",LocationForPersonNotSpecified:"未为人指定位置",SearchName:"搜索名称",PasswordReset:"重设密码",PasswordResetDescription:"请输入您的电子邮件以开始重置密码的过程：",ResetMyPassword:"重置我的密码",PasswordResetRequested:"请求密码重置",CheckYourEmailForReset:"请查看您的电子邮件以获取更多说明",PasswordResetConfirmation:"密码重置确认",PasswordResetConfirmationDescription:"请输入您的新密码. 您的新密码至少应为8个字符。",PasswordConfirmation:"确认您的新密码",PasswordsNotMatching:"密码不匹配",UpdateMyPassword:"更新我的密码",UserSettings:"用户设置",ChangePassword:"更改密码",LeaveokKindred:"退出 ok！Kindred",LanguageLabel:"语言:",ReceiveFamilyEmailUpdates:"在更新家庭信息时接收电子邮件通知",ReceivePhotoTaggingEmailUpdates:"在照片中标记时接收电子邮件通知",UserSettingsSaved:"用户设置已保存",PasswordBreach1:"这个密码不安全！",PasswordBreach2:"它已被用于其他有隐私泄露的网站，应该是\n      更改为保持您的 ok！Kindred 帐户安全",PasswordBreach3:"请转到，更改密码",ForMoreInformation:"欲获得更多信息：",ChangePasswordDescription:"输入旧密码，然后创建一个新密码并确认。 你的新密码应该\n      至少8个字符",OldPassword:"旧密码",NewPassword:"新密码",PasswordUpdated:"密码已更新",IncorrectOldPassword:"您的旧密码不正确",LeaveSite:"放弃 ok!Kindred",LeaveSiteSingleUserDescription:"离开 ok！Kindred 将删除您的所有个人资料，所有家庭数据和图片。",EnterYourPasswordToConfirm:"输入您的密码进行确认：",CurrentUsersAccessToFamilyData:"这些是目前策划家庭数据的所有用户：",LeaveSiteMultipleUsersDescription:"您可以选择删除自己的个人资料，也可以为家庭中的其他用户保留该个人资料。",LeaveSiteMultipleUsersDescription2:"如果以上所有用户都离开了该站点，则将删除整个家庭数据。",DeleteMyProfile:"删除我的个人资料",LeaveSiteKeepMyProfile:"个人资料将被保留",LeaveSiteDeleteMyProfile:"个人资料将被删除",AddAncestor:"添加祖先",AddDescendant:"添加后代",AddPartner:"添加合作伙伴",AreYouSureDelete:"你确定要删除的个人资料？",NewPerson:"新人",ExistingPerson:"现有人",Required:"需要",BreakLinks:"歇关系",Raised:"上调",RaisedBy:"上调",Partnered:"合作",SuggestedRelations:"建议的关系",AreXandYPartners:"{fromPersonName}和{toPersonName}是合作伙伴吗？",DidXraiseY:"{fromPersonName}是否提升{toPersonName}？",JoinSite:"註冊ok!Kindred",JoinSiteDescription:"要設置新的家庭網絡並加入ok!Kindred，請提供\n      以下信息：",EmailInUse:"電子郵件已在使用中",ThankYou:"謝謝！ ",PleaseCheckEmail:"請檢查您的電子郵件{email}以確認您的帳戶。 ",InvalidEmail:"不合规电邮",AlreadySignedUp:"已经有帐号了？",AccountConfirmation:"帐户确认",PleaseCreatePassword:"请为您的帐户创建密码：",NewProfilePhoto:"新的个人资料照片",UploadNewProfilePhoto:"为{personName}上传新的个人资料照片：",SelectFile:"选择文件",PleaseTrimImage:"请修整图像以适合个人资料图片：",UploadingImagePleaseWait:"正在上传新图片，请稍候...",AllGalleries:"所有画廊",NoGalleries:"找不到图片库。",AddNewGallery:"添加新图库",NoImagesInGallery:"在图库中找不到图像",AddNewImages:"添加新图片",CreateNewGallery:"创建新图库",EditGallery:"编辑图库",DeleteGalleries:"删除图库",DeleteGalleriesDesc:"您确定要删除所选的画廊吗？\n      它还将删除其中的所有图像。",DeleteImages:"删除图像",DeleteImagesDesc:"您确定要删除所选的画廊吗？",SelectGallery:"选择图库",UploadImages:"上传图片",SelectFiles:"选择文件",Pending:"有待",Uploading:"上传",Processing:"处理",Failed:"失败",UploadFinished:"上传完成",AllUploadsSuccessful:"所有上传成功",XSuccessfulYFailed:"{success}图片上传成功，{fail}失败",ImagesOfX:"{name}的图片",NoImagesOfPerson:"还没有标记{name}的图片。",GoToGalleries:"去画廊",GoToGallery:"去画廊",EditImage:"编辑图像",Details:"细节",GalleryThumbnail:"图库缩略图",AddTags:"点击/触摸图像标记的人",WhoIsThis:"这是谁？",DeleteTags:"删除标签",InviteConfirmation:"ok!Kindred 邀请确认",HelloName:"你好 {name}!",YouHaveBeenInvited:"感谢您接受{inviteBy}的邀请\n      加入{ok！kindred}，分享您的家谱并与您的家人保持联系！",CannotFindInvite:"ok!Kindred 没有找到邀请",CannotFindInviteDescription:"请与向您发送邀请的人确认，并注意邀请在2周后过期。",PrivacyPolicy:"隐私政策",WhoAreWe:"我们是谁",WhoAreWeDescription:"ok!Kindred 由 Tech Luminaire Ltd 经营:",CompanyContactEmail:"我们所有 ok!kindred 咨询的电子邮件是 info@okkindred.com",CompanyContactTelephone:"我们的电话号码是+44 2476982000。请注意，我们不通过电话提供技术支持。",CompanyNumber:"我们在英格兰和威尔士注册为公司08864499。",CompanyVATNumber:"增值税号：207242637",WhatInformationWeCollect:"我们收集什么信息",WhatInformationWeCollectDescription:"我们收集数据以建立家谱和您家谱中人员的资料。这是您选择存储在网站上的信息，\n        包括姓名，出生年月，位置，联系方式和图像",WhatInformationWeCollectDescription2:"还将收集自动信息，例如用于将设备连接到Internet的Internet协议（IP）地址，\n        连接信息（例如浏览器类型和版本），有关设备的信息（包括设备类型和设备标识符）。",WhatWeDoWithInformation:"我们如何处理您的信息",WhatWeDoWithInformationDescription:"我们不会将您的数据出售给任何第三方。\n        您与网站共享的信息用于创建您的家谱/网络。自动化信息用于帮助我们监视和改进服务。\n        您的照片用于训练服务，以帮助您标记自己的照片。\n        您在个人资料上提交的位置信息将发送到Google或Microsoft的地理位置服务，以将该人放置在地图上。\n        该位置不会发送其他信息。\n        您的家庭网络外部的任何公众都无法看到您与服务共享的家谱数据。",HowWeStoreYourInformation:"我们如何存储您的信息",HowWeStoreYourInformationDescription:"我们的服务在PythonAnywhere（https://www.pythonanywhere.com）上运行，\n        您的数据存储在其服务器上。他们在美国操作由Amazon Web Services管理的服务器，该服务器已通过欧盟-美国隐私保护框架认证。\n        这为处理您的个人数据提供了保障。照片无需通过PythonAnywhere即可直接存储到Amazon Web Services。您的数据不会传输给任何其他第三方。",HowWeStoreYourInformationDescription2:"如果您是家庭网络中的唯一用户，则通常在删除帐户后即会删除您的数据。\n        如果您的家庭网络中有很多用户，则将您视为数据的共同所有者。删除帐户时，您可以选择删除个人资料。\n        当您的家庭网络中的所有用户删除其帐户时，整个家庭网络信息都将被删除。数据备份最多可以保留2周。",YourDataProtectionRights:"您的数据保护权利",YourDataProtectionRightsDescription:"您有权要求我们提供您的个人信息的副本，并纠正您认为不正确的信息。\n        您也有权要求我们完成您认为不完整的信息。您有权要求我们在某些情况下删除您的个人信息。\n        您有权要求我们在某些情况下限制您信息的处理。您有权在某些情况下反对处理您的个人数据。\n        您有权要求我们在某些情况下将您提供给我们的信息转移给另一个组织或您。您无需为行使权利而支付任何费用。\n        如果您提出要求，我们有一个月的时间回复您。",LinksToOtherWebsites:"链接到其他网站",LinksToOtherWebsitesDescription:"该网站包含指向其他网站的链接。\n        我们对其他网站的内容或它们如何处理个人信息概不负责。",HowToComplain:"如何投诉",HowToComplainDescription:"如果您对我们如何处理您的个人信息有任何投诉，请通过上面的电子邮件地址与我们联系。\n        如果您对我们的答复不满意或认为我们没有依法处理您的个人信息，则可以向信息专员办公室（ICO）投诉："}},E={en:"English",fr:"Français",pl:"Polski",fi:"Suomi","zh-cn":"简体中文","zh-tw":"繁體中文"},z={en:C,fi:I,fr:S,pl:P,"zh-cn":R,"zh-tw":T},A={match:function(e){if(e||(e=navigator.language),!e)return"en";if("zh-hk"===e)return"zh-tw";if("zh"===e)return"zh-cn";for(var t=0,a=Object.keys(E);t<a.length;t++){var n=a[t];if(e.startsWith(n,0))return n;if(n.startsWith(e,0))return n}return"en"}},M={language:function(e){var t=A.match(e.language);return t},loading:function(e){return e.loading_count>0},ajaxHeader:function(e){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access_token)}},selectedPerson:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=e.people[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;if(Number(e.person_id)===Number(s.id))return s}}catch(h){a=!0,n=h}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}var o=!0,l=!1,c=void 0;try{for(var u,d=e.people[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value;if(Number(e.users_person_id)===Number(p.id))return p}}catch(h){l=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}return null}},D=M,N=(a("a481"),a("75fc")),L=(a("6b54"),a("8c4f")),$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[e.loaded?e._e():a("Loading"),e.loaded?a("Introduction"):e._e(),e.loaded?a("AboutComponent"):e._e()],1)},B=[],U=(a("96cf"),a("3b8d")),G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"introduction"},[a("b-carousel",{attrs:{id:"myCarousel",interval:1e4,controls:"",indicators:"","img-height":"500"}},[a("b-carousel-slide",{attrs:{"img-src":"img/introduction/family_tree.png"}},[a("h1",{staticClass:"mycarousel-header"},[e._v(e._s(e.$t("message.Slide1Header")))]),a("p",{staticClass:"mycarousel-text"},[e._v(e._s(e.$t("message.Slide1Desc")))]),a("p",[a("router-link",{staticClass:"btn btn-success",attrs:{to:"/accounts/sign_up/",role:"button"}},[e._v(e._s(e.$t("message.SignUpButton")))])],1)]),a("b-carousel-slide",{attrs:{"img-src":"img/introduction/family_invite.png"}},[a("h1",{staticClass:"mycarousel-header"},[e._v(e._s(e.$t("message.Slide2Header")))]),a("p",{staticClass:"mycarousel-text"},[e._v(e._s(e.$t("message.Slide2Desc")))]),a("p",[a("router-link",{staticClass:"btn btn-success",attrs:{to:"/accounts/sign_up/",role:"button"}},[e._v(e._s(e.$t("message.SignUpButton")))])],1)]),a("b-carousel-slide",{attrs:{"img-src":"img/introduction/family_map.png"}},[a("h1",{staticClass:"mycarousel-header"},[e._v(e._s(e.$t("message.Slide3Header")))]),a("p",{staticClass:"mycarousel-text"},[e._v(e._s(e.$t("message.Slide3Desc")))]),a("p",[a("router-link",{staticClass:"btn btn-success",attrs:{to:"/accounts/sign_up/",role:"button"}},[e._v(e._s(e.$t("message.SignUpButton")))])],1)]),a("b-carousel-slide",{attrs:{"img-src":"img/introduction/family_photo-share.png"}},[a("h1",{staticClass:"mycarousel-header"},[e._v(e._s(e.$t("message.Slide4Header")))]),a("p",{staticClass:"mycarousel-text"},[e._v(e._s(e.$t("message.Slide4Desc")))]),a("p",[a("router-link",{staticClass:"btn btn-success",attrs:{to:"/accounts/sign_up/",role:"button"}},[e._v(e._s(e.$t("message.SignUpButton")))])],1)])],1)],1)},H=[],W=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);W=Object(d["a"])([Object(p["a"])({components:{}})],W);var F=W,Y=F,K=(a("0764"),Object(y["a"])(Y,G,H,!1,null,null,null)),q=K.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container about-container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("h2",[e._v(e._s(e.$t("message.OurStory")))]),a("p",[e._v(e._s(e.$t("message.OurStoryStub")))]),a("p",[a("b-button",{on:{click:function(t){return e.scroll("story")}}},[e._v(e._s(e.$t("message.ViewDetails"))+" »")])],1)]),a("div",{staticClass:"col-md-4"},[a("h2",[e._v(e._s(e.$t("message.ContactUs")))]),a("p",[e._v(e._s(e.$t("message.ContactUsStub")))]),a("p",[a("b-button",{on:{click:function(t){return e.scroll("contactus")}}},[e._v(e._s(e.$t("message.ViewDetails"))+" »")])],1)]),a("div",{staticClass:"col-md-4"},[a("h2",[e._v(e._s(e.$t("message.FAQ")))]),a("p",[e._v(e._s(e.$t("message.FAQStub")))]),a("p",[a("b-button",{on:{click:function(t){return e.scroll("faq")}}},[e._v(e._s(e.$t("message.ViewDetails"))+" »")])],1)])]),a("hr"),a("div",{attrs:{id:"story"}},[a("h2",[e._v(e._s(e.$t("message.StoryHeading")))]),a("img",{staticClass:"fluid-image",attrs:{src:"img/about/justin_and_adrian.jpg",alt:"Justin and Adrian"}}),a("p",[e._v(e._s(e.$t("message.StoryText1")))]),a("p",[e._v(e._s(e.$t("message.StoryText2")))])]),a("hr"),a("div",{attrs:{id:"contactus"}},[a("h2",[e._v(e._s(e.$t("message.ContactHeading")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.ContactEmail"))}}),a("p",{domProps:{innerHTML:e._s(e.$t("message.ContactText1"))}}),a("p",{domProps:{innerHTML:e._s(e.$t("message.ContactText2"))}}),a("p",{domProps:{innerHTML:e._s(e.$t("message.ContactText3"))}})]),a("hr"),a("div",{attrs:{id:"faq"}},[a("h2",[e._v(e._s(e.$t("message.FAQHeading")))]),a("h3",[e._v(e._s(e.$t("message.Question1")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer1"))}}),a("h3",[e._v(e._s(e.$t("message.Question2")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer2"))}}),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer2a"))}}),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer2b"))}}),a("h3",[e._v(e._s(e.$t("message.Question3")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer3"))}}),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer3a"))}}),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer3b"))}}),a("h3",[e._v(e._s(e.$t("message.Question4")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer4"))}}),a("h3",[e._v(e._s(e.$t("message.Question5")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer5"))}}),a("h3",[e._v(e._s(e.$t("message.Question6")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer6"))}}),a("h3",[e._v(e._s(e.$t("message.Question7")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer7"))}}),a("h3",[e._v(e._s(e.$t("message.Question8")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer8"))}}),a("h3",[e._v(e._s(e.$t("message.Question9")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer9"))}}),a("h3",[e._v(e._s(e.$t("message.Question10")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer10"))}}),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer10a"))}}),a("h3",[e._v(e._s(e.$t("message.Question11")))]),a("p",{domProps:{innerHTML:e._s(e.$t("message.Answer11"))}})]),a("hr"),a("footer",{staticClass:"about-footer"},[a("p",[e._v("\r\n            "+e._s(e.$t("message.AboutFooter"))+"\r\n        ")]),a("div",{staticClass:"privacy-policy-link"},[a("router-link",{attrs:{to:"/privacy_policy/"}},[e._v(e._s(e.$t("message.PrivacyPolicy")))])],1)])])},Q=[],J=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"scroll",value:function(e){var t=document.getElementById(e).getBoundingClientRect().top,a=document.getElementById("navbar").clientHeight;window.scroll({top:t+window.scrollY-a,left:0,behavior:"smooth"})}}]),t}(p["c"]);J=Object(d["a"])([Object(p["a"])({components:{}})],J);var X=J,Z=X,ee=(a("a75d"),Object(y["a"])(Z,V,Q,!1,null,null,null)),te=ee.exports,ae=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,null,[{key:"isXamarinApp",value:function(){return Vd.state.userAgent.toLowerCase().indexOf("xamarin")>-1}},{key:"isAndroidWebView",value:function(){return Vd.state.userAgent.toLowerCase().indexOf("; wv")>-1}},{key:"isAndroid",value:function(){return Vd.state.userAgent.toLowerCase().indexOf("android")>-1}},{key:"isFirefox",value:function(){return Vd.state.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"is_iOS",value:function(){if(navigator.platform)while(e.iDevices.length)if(navigator.platform===e.iDevices.pop())return!0;return Vd.state.userAgent.toLowerCase().indexOf("ios")>-1}},{key:"isMobileMenuOpen",value:function(){var e=document.getElementById("nav_collapse");return!!e&&e.clientHeight>80}},{key:"debugState",value:function(){return"isXamarinApp: ".concat(e.isXamarinApp(),"\n        isAndroid: ").concat(e.isAndroid(),"\n        isFirefox: ").concat(e.isFirefox(),"\n        isMobileMenuOpen: ").concat(e.isMobileMenuOpen())}}]),e}();ae.iDevices=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];var ne=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loaded=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,Vd.state.initialRoute){e.next=4;break}return e.next=4,Vd.dispatch("restoreSession");case 4:Vd.state.initialRoute||this.$router.replace("/family/tree/"),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),yp.locale=A.match(navigator.language),ae.isAndroidWebView()&&this.$router.replace("/accounts/login/");case 11:this.loaded=!0;case 12:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);ne=Object(d["a"])([Object(p["a"])({components:{Loading:w,Introduction:q,AboutComponent:te}})],ne);var ie=ne,re=ie,se=Object(y["a"])(re,$,B,!1,null,"7999a8c2",null),oe=se.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("form",{staticClass:"form-signin",attrs:{role:"form"},on:{submit:function(t){return t.preventDefault(),e.OnSubmit()}}},[a("h2",{directives:[{name:"show",rawName:"v-show",value:!e.accountLocked,expression:"!accountLocked"}],staticClass:"form-signin-heading"},[e._v(e._s(e.$t("message.PleaseSignIn")))]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.accountLocked,expression:"!accountLocked"}],staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[e._v(e._s(e.$t("message.EmailAddress")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.loginDetails.email,expression:"loginDetails.email"}],staticClass:"form-control",attrs:{type:"email",id:"username",name:"username",required:"",autofocus:""},domProps:{value:e.loginDetails.email},on:{input:function(t){t.target.composing||e.$set(e.loginDetails,"email",t.target.value)}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.accountLocked,expression:"!accountLocked"}],staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v(e._s(e.$t("message.Password")))]),a("PasswordBox",{model:{value:e.loginDetails.password,callback:function(t){e.$set(e.loginDetails,"password",t)},expression:"loginDetails.password"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loginInvalid,expression:"loginInvalid"}],staticClass:"alert alert-danger"},[e._v(e._s(e.$t("message.InvalidLogin")))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.accountLocked,expression:"accountLocked"}],staticClass:"alert alert-danger"},[e._v(e._s(e.$t("message.AccountLocked")))]),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[e._v(e._s(e.$t("message.SignIn")))]),a("router-link",{attrs:{to:"/accounts/password_reset/"}},[e._v(e._s(e.$t("message.IForgotMyPassword")))])],1),a("div",{staticClass:"signup"},[a("hr"),e._v("\n      "+e._s(e.$t("message.NoAccount"))+"\n      "),a("router-link",{attrs:{to:"/accounts/sign_up/"}},[e._v(e._s(e.$t("message.SignUp")))])],1)])},ce=[],ue=a("3882"),de=(a("28a5"),a("58b7")),pe=a.n(de),he={BaseApiUrl:"https://api.okkindred.com",ObtainTokenAPI:"/api/auth/obtain_token/",RefreshTokenAPI:"/api/auth/refresh_token/",VerifyTokenAPI:"/api/auth/verify_token/",GalleryAPI:"/api/gallery/",InviteEmailAPI:"/api/invite_email/",InviteEmailConfirmationAPI:"/api/invite_email_confirmation/",ImageAPI:"/api/image/",ImageTaggingAPI:"/api/image_tagging/",IsLockedAPI:"/api/auth/is_locked/",LeaveSiteAPI:"/api/delete_account/",LocationApi:"/api/location/",PasswordChangeAPI:"/api/password_change/",PasswordResetAPI:"/api/reset-password/",PersonAPI:"/api/person/",ProfileImageAPI:"/api/profile_image/",RelationAPI:"/api/relation/",SignUpAPI:"/api/sign_up/",SuggestedTaggingAPI:"/api/suggested_image_tagging/",UserSettingsAPI:"/api/user_settings/",UsersAPI:"/api/users/",PwnedPasswordsAPI:"https://api.pwnedpasswords.com/range/",MapboxTileAPi:"https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token={token}",MapboxToken:"pk.eyJ1Ijoib2traW5kcmVkIiwiYSI6Ild2MnY5dDQifQ.EHr6blIYPYeg4bWmSStT-g",TinyMceApiToken:"enx50wn3zw6ekck6y0dsoz784z5mo5c936go697ncer7lpzb",MinPasswordLength:8,MaxLoginAttempts:4,PaginationPageSize:20,DefaultLocation:[53.42142,-2.561041]},me=he,ge=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,null,[{key:"getNumberOfPasswordBreaches",value:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(a){var n,i,r,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a&&!(a.length<6)){t.next=2;break}throw new Error("Password must have more than 5 characters");case 2:return n=pe()(a),i=n.slice(0,5).toUpperCase(),r=n.slice(-35).toUpperCase(),t.next=7,e.fetchPasswords(i);case 7:return s=t.sent,o=e.getNumBreaches(r,s),t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})));function a(e){return t.apply(this,arguments)}return a}()},{key:"fetchPasswords",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={uri:"".concat(he.PwnedPasswordsAPI).concat(t)},e.next=4,ue["get"](a);case 4:return n=e.sent,e.abrupt("return",n.split("\n"));case 8:return e.prev=8,e.t0=e["catch"](0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getNumBreaches",value:function(e,t){var a=t.map((function(e){return e.slice(0,35)})),n=a.indexOf(e),i=0;return n>=0&&(i=1*Number(t[n].slice(36,-1))),i}}]),e}(),fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-input-group",[a("b-form-input",{attrs:{type:e.inputType,required:""},on:{input:e.handleInput},model:{value:e.valueInternal,callback:function(t){e.valueInternal=t},expression:"valueInternal"}}),a("b-input-group-append",[a("b-button",{attrs:{title:e.$t("message.ShowPassword"),variant:"outline-secondary",pressed:e.showPassword,tabIndex:"-1"},on:{click:function(t){return e.toggle()}}},[a("span",{staticClass:"oi oi-eye",attrs:{"aria-hidden":"true"}})])],1)],1)],1)},ve=[],ye=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.showPassword=!1,e.value="",e.valueInternal=e.value,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"handleInput",value:function(e){this.$emit("input",this.valueInternal)}},{key:"toggle",value:function(){this.showPassword=!this.showPassword}},{key:"inputType",get:function(){return this.showPassword?"text":"password"}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:""})],ye.prototype,"value",void 0),ye=Object(d["a"])([p["a"]],ye);var be=ye,we=be,ke=(a("5f54"),Object(y["a"])(we,fe,ve,!1,null,"fb728016",null)),_e=ke.exports,je=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loginDetails={email:"",password:""},e.loginInvalid=!1,e.accountLocked=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"OnSubmit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("login",{email:this.loginDetails.email,password:this.loginDetails.password});case 3:return e.next=5,ge.getNumberOfPasswordBreaches(this.loginDetails.password);case 5:t=e.sent,t>0&&Vd.commit("setErrorMessage",ep.passwordBreached),this.$route.query.next?(a=this.$route.query.next,this.$router.push(a)):this.$router.push("/family/tree/"),e.next=16;break;case 10:return e.prev=10,e.t0=e["catch"](0),this.loginInvalid=!0,e.next=15,this.isIpLocked();case 15:this.accountLocked=e.sent;case 16:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){yp.locale||(yp.locale=A.match(navigator.language))}},{key:"isIpLocked",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,Vd.commit("updateLoading",!0),t={uri:"".concat(me.BaseApiUrl).concat(me.IsLockedAPI),json:!0},e.next=5,ue["get"](t);case 5:return a=e.sent,e.abrupt("return",a);case 9:return e.prev=9,e.t0=e["catch"](0),Vd.commit("setErrorMessage",e.t0),e.abrupt("return",!1);case 13:return e.prev=13,Vd.commit("updateLoading",!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);je=Object(d["a"])([Object(p["a"])({components:{PasswordBox:_e}})],je);var xe=je,Oe=xe,Ce=(a("019f"),Object(y["a"])(Oe,le,ce,!1,null,"441fa0f9",null)),Pe=Ce.exports,Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("AboutComponent")],1)},Se=[],Te=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);Te=Object(d["a"])([Object(p["a"])({components:{AboutComponent:te}})],Te);var Re=Te,Ee=Re,ze=Object(y["a"])(Ee,Ie,Se,!1,null,null,null),Ae=ze.exports,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:"",justified:""},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[a("b-tab",{attrs:{active:""},on:{click:function(t){return e.route("tree")}}},[a("template",{slot:"title"},[a("span",{staticClass:"oi oi-people",attrs:{"aria-hidden":"true"}}),e._v("\r\n                "+e._s(e.$t("message.Tree"))+"\r\n            ")]),a("b-card-text",[a("FamilyTree",{ref:"tree"})],1)],2),a("b-tab",{on:{click:function(t){return e.route("profile")}}},[a("template",{slot:"title"},[a("span",{staticClass:"oi oi-person",attrs:{"aria-hidden":"true"}}),e._v("\r\n                "+e._s(e.$t("message.Profile"))+"\r\n            ")]),a("b-card-text",[a("Profile",{ref:"profile"})],1)],2),a("b-tab",{on:{click:function(t){return e.route("map")}}},[a("template",{slot:"title"},[a("span",{staticClass:"oi oi-map",attrs:{"aria-hidden":"true"}}),e._v("\r\n                "+e._s(e.$t("message.Map"))+"\r\n            ")]),a("b-card-text",[a("FamilyMap",{ref:"map"})],1)],2)],1)],1)},De=[],Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree-container",attrs:{id:"tree-container"}},[a("canvas",{class:e.treeCanvasClass,attrs:{id:"tree-canvas"}}),e.editMode?e._e():a("TreeNavControls",{on:{zoomIn:e.zoomIn,zoomOut:e.zoomOut}}),e.editMode?e._e():a("TreeEditControl",{on:{click:e.edit}}),e.editMode?a("TreeCancelEditControl",{on:{click:e.cancelEdit}}):e._e(),e.editMode?a("AddAncestor"):e._e(),e.editMode?a("AddDescendant"):e._e(),e.editMode?a("AddPartner"):e._e(),e.editMode?a("DeletePerson"):e._e(),e.editMode?a("SplitRelations"):e._e()],1)},Le=[],$e=(a("8615"),a("6c7b"),a("7f7f"),function(){function e(t,a,n){Object(s["a"])(this,e),this.x=0,this.xMid=0,this.xRight=0,this.leftMarginStart=0,this.rightMarginEnd=0,this.y=0,this.yMid=0,this.yBottom=0,this.width=t,this.height=a,this.hasXValue=!1,this.hasYValue=!1,this.spacing=n,this.widthAndSpacing=t+2*n,this.disabled=!1}return Object(o["a"])(e,[{key:"clearPosition",value:function(){this.x=0,this.xMid=0,this.xRight=0,this.y=0,this.yMid=0,this.yBottom=0,this.hasXValue=!1,this.hasYValue=!1}},{key:"setXYPosition",value:function(e,t){this.setXPosition(e),this.setYPosition(t)}},{key:"setXPosition",value:function(e){this.x=e,this.xMid=e+this.width/2,this.xRight=e+this.width,this.updateMargins(),this.hasXValue=!0}},{key:"setYPosition",value:function(e){this.y=e,this.yMid=e+this.height/2,this.yBottom=e+this.height,this.hasYValue=!0}},{key:"setCentreXPosition",value:function(e){this.xMid=e,this.x=e-this.width/2,this.xRight=e+this.width/2,this.updateMargins(),this.hasXValue=!0}},{key:"updateSpacing",value:function(e){this.spacing=e,this.widthAndSpacing=this.width+2*e,this.updateMargins()}},{key:"updateMargins",value:function(){this.leftMarginStart=this.x-this.spacing,this.rightMarginEnd=this.xRight+this.spacing}},{key:"showBordersForDebugging",value:function(e){e.beginPath(),e.strokeStyle=this.rainbow(e.canvas.width,this.x),e.lineWidth=1,e.fillStyle=e.strokeStyle,e.moveTo(this.leftMarginStart,this.y),e.lineTo(this.x,this.y),e.lineTo(this.x,this.yBottom),e.lineTo(this.leftMarginStart,this.yBottom),e.lineTo(this.leftMarginStart,this.y),e.fill(),e.moveTo(this.xRight,this.y),e.lineTo(this.rightMarginEnd,this.y),e.lineTo(this.rightMarginEnd,this.yBottom),e.lineTo(this.xRight,this.yBottom),e.lineTo(this.xRight,this.y),e.fill(),e.stroke()}},{key:"isOverlapped",value:function(e){if(this.x<e.x){if(this.rightMarginEnd>e.leftMarginStart)return!0}else if(this.leftMarginStart<e.rightMarginEnd)return!0;return!1}},{key:"rainbow",value:function(e,t){var a,n,i,r=t/e,s=Math.floor(6*r),o=6*r-s,l=1-o;switch(s%6){case 0:a=1,n=o,i=0;break;case 1:a=l,n=1,i=0;break;case 2:a=0,n=1,i=o;break;case 3:a=0,n=l,i=1;break;case 4:a=o,n=0,i=1;break;default:a=1,n=0,i=l;break}var c="rgba(".concat(255*a,",").concat(255*n,",").concat(255*i,", 0.4");return c}},{key:"isDisabled",get:function(){return this.disabled}}]),e}()),Be=function e(t,a){Object(s["a"])(this,e),this.x=t,this.y=a},Ue=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,null,[{key:"createMoreArrows",value:function(t,a){t.descendants.some((function(e){return!e.addToTree}))&&e.drawDownArrow(t,a),t.partners.some((function(e){return!e.addToTree}))&&e.drawRightArrow(t,a),t.ancestors.some((function(e){return!e.addToTree}))&&e.drawUpArrow(t,a)}},{key:"drawRightArrow",value:function(t,a){var n=new Be(t.xRight+e.MORE_ARROW_SPACING,t.yMid-e.MORE_ARROW_WIDTH),i=new Be(n.x+e.MORE_ARROW_HEIGHT,n.y+e.MORE_ARROW_WIDTH),r=new Be(n.x,i.y+e.MORE_ARROW_WIDTH);e.drawArrow(t,n,i,r,a)}},{key:"drawUpArrow",value:function(t,a){var n=new Be(t.xMid+e.MORE_ARROW_SPACING,t.y-e.MORE_ARROW_SPACING),i=new Be(n.x+e.MORE_ARROW_WIDTH,n.y-e.MORE_ARROW_HEIGHT),r=new Be(i.x+e.MORE_ARROW_WIDTH,n.y);e.drawArrow(t,n,i,r,a)}},{key:"drawDownArrow",value:function(t,a){var n=new Be(t.xMid+e.MORE_ARROW_SPACING,t.yBottom+e.MORE_ARROW_SPACING),i=new Be(n.x+e.MORE_ARROW_WIDTH,n.y+e.MORE_ARROW_HEIGHT),r=new Be(i.x+e.MORE_ARROW_WIDTH,n.y);e.drawArrow(t,n,i,r,a)}},{key:"drawArrow",value:function(t,a,n,i,r){var s=e.STROKE_STYLE,o=e.STROKE_STYLE;t.isDisabled&&(s=e.DISABLED_STROKE_STYLE,o=e.DISABLED_STROKE_STYLE),r.beginPath(),r.strokeStyle=s,r.lineWidth=1,r.moveTo(a.x,a.y),r.lineTo(n.x,n.y),r.lineTo(i.x,i.y),r.lineTo(a.x,a.y),r.stroke(),r.fillStyle=o,r.fill()}}]),e}();Ue.STROKE_STYLE="#2e6f9a",Ue.DISABLED_STROKE_STYLE="#444",Ue.MORE_ARROW_SPACING=4,Ue.MORE_ARROW_HEIGHT=12,Ue.MORE_ARROW_WIDTH=8;var Ge=function(e){function t(e,a){var n;return Object(s["a"])(this,t),n=Object(l["a"])(this,Object(c["a"])(t).call(this,t.WIDTH,t.HEIGHT,t.MIN_SPACING)),n.ctx=e,n.person=a,n.id=a.id,n.imagePath=a.small_thumbnail,a.small_thumbnail||(n.imagePath="img/portrait_80.png"),n.ancestors=new Array,n.descendants=new Array,n.partners=new Array,n.addToTree=!1,n.selected=a.id===Vd.state.person_id,n.wrappedName=n.wrapName(a.name),n.photo=null,n.highlighted=!1,n.parent=null,n}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"setDisabled",value:function(e){this.disabled=e}},{key:"render",value:function(){var e=this;if(this.hasXValue&&this.hasYValue){this.roundRect(),this.disabled?this.ctx.fillStyle=t.FONT_COLOUR:this.ctx.fillStyle=t.DISABLED_FONT_COLOUR,this.ctx.font="".concat(t.FONT_SIZE,"px ").concat(t.FONT),this.ctx.textBaseline="bottom";for(var a=this.x+t.LEFT_TEXT_MARGIN,n=this.y+t.TOP_TEXT_MARGIN,i=0;i<this.wrappedName.length;i++)this.ctx.fillText(this.wrappedName[i],a,n+(t.FONT_SIZE+5)*i);var r=1;this.disabled&&!this.selected&&(r=t.DISABLED_IMAGE_OPACITY),this.photo?(this.ctx.globalAlpha=r,this.ctx.drawImage(this.photo,this.x+t.LEFT_MARGIN,this.y+t.TOP_IMAGE_MARGIN),this.ctx.globalAlpha=1):(this.photo=new Image,this.photo.src=this.imagePath,this.photo.onload=function(){e.addToTree&&(e.ctx.globalAlpha=r,e.ctx.drawImage(e.photo,e.x+t.LEFT_MARGIN,e.y+t.TOP_IMAGE_MARGIN),e.ctx.globalAlpha=1)}),Ue.createMoreArrows(this,this.ctx)}}},{key:"clearRenderValues",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.selected||this.clearPosition(),e&&(this.spacing=t.MIN_SPACING,this.addToTree=!1,this.parent=null)}},{key:"wrapName",value:function(e){var a=new Array,n=t.WIDTH-(2*t.LEFT_TEXT_MARGIN+5),i=e.split(" "),r=i[0];this.ctx.font="".concat(t.FONT_SIZE,"px ").concat(t.FONT);for(var s=1;s<i.length;s++){var o=i[s],l=this.ctx.measureText(r+" "+o).width;l<n?r+=" "+o:(a.push(r),r=o)}return a.push(r),a}},{key:"roundRect",value:function(){var e=t.RECT_FILL_STYLE,a=t.RECT_STROKE_STYLE,n=t.RECT_LINE_WIDTH;this.selected&&(n=t.SELECTED_RECT_LINE_WIDTH),this.disabled&&!this.selected?(e=t.DISABLED_RECT_FILL_STYLE,a=t.DISABLED_RECT_STROKE_STYLE):this.highlighted&&(e=t.HIGHLIGHTED_RECT_FILL_STYLE);var i=t.RECT_ROUNDED_CORNER_RADIUS,r=this.xRight,s=this.yBottom;this.ctx.beginPath(),this.ctx.strokeStyle=a,this.ctx.lineWidth=n,this.ctx.moveTo(this.x+i,this.y),this.ctx.lineTo(r-i,this.y),this.ctx.quadraticCurveTo(r,this.y,r,this.y+i),this.ctx.lineTo(r,this.yBottom-i),this.ctx.quadraticCurveTo(r,s,r-i,s),this.ctx.lineTo(this.x+i,s),this.ctx.quadraticCurveTo(this.x,s,this.x,s-i),this.ctx.lineTo(this.x,this.y+i),this.ctx.quadraticCurveTo(this.x,this.y,this.x+i,this.y),this.ctx.stroke(),this.ctx.fillStyle=e,this.ctx.fill()}}]),t}($e);Ge.WIDTH=130,Ge.HEIGHT=140,Ge.RECT_STROKE_STYLE="#2e6f9a",Ge.DISABLED_RECT_STROKE_STYLE="#444",Ge.RECT_LINE_WIDTH=4,Ge.SELECTED_RECT_LINE_WIDTH=18,Ge.RECT_ROUNDED_CORNER_RADIUS=15,Ge.LEFT_MARGIN=25,Ge.RECT_FILL_STYLE="#EEEAEA",Ge.DISABLED_RECT_FILL_STYLE="#555",Ge.HIGHLIGHTED_RECT_FILL_STYLE="rgb(70, 255, 70)",Ge.MIN_SPACING=10,Ge.MORE_ARROW_SPACING=3,Ge.MORE_ARROW_HEIGHT=12,Ge.MORE_ARROW_WIDTH=8,Ge.TOP_IMAGE_MARGIN=10,Ge.DISABLED_IMAGE_OPACITY=.4,Ge.TOP_TEXT_MARGIN=115,Ge.LEFT_TEXT_MARGIN=10,Ge.FONT_SIZE=12,Ge.FONT_COLOUR="#000",Ge.FONT="Arial",Ge.DISABLED_FONT_COLOUR="#444";a("55dd");var He=a("013f"),We=function(){function e(t,a,n){Object(s["a"])(this,e),this.ctx=t,this.disabled=!1,a.id<n.id?this.id="".concat(a.id,"-").concat(n.id):this.id="".concat(n.id,"-").concat(a.id),this.node1=a,this.node2=n}return Object(o["a"])(e,[{key:"render",value:function(){var t=[this.node1,this.node2];t.sort((function(e,t){return e.x-t.x}));var a=new Be(t[0].xMid,t[1].yBottom),n=new Be(a.x,a.y+e.HEIGHT),i=new Be(t[1].xMid,n.y),r=new Be(i.x,t[1].yBottom);this.ctx.beginPath();var s=e.STROKE_STYLE;this.disabled&&(s=e.DISABLED_STROKE_STYLE),this.ctx.strokeStyle=s,this.ctx.lineWidth=e.LINE_WIDTH,this.ctx.moveTo(a.x,a.y),this.ctx.lineTo(n.x,n.y),this.ctx.lineTo(i.x,i.y),this.ctx.lineTo(r.x,r.y),this.ctx.stroke()}}]),e}();We.STROKE_STYLE="#2e6f9a",We.DISABLED_STROKE_STYLE="#333",We.LINE_WIDTH=2,We.HEIGHT=20;var Fe=function(e){function t(e,a,n){var i;Object(s["a"])(this,t);var r=(a.partners.length+1)*Ge.WIDTH+a.partners.length*Ge.MIN_SPACING;i=Object(l["a"])(this,Object(c["a"])(t).call(this,r,Ge.HEIGHT,t.MIN_SPACING)),i.id=a.id,i.ctx=e,i.mainNode=a,i.partners=a.partners,i.spacing=t.MIN_SPACING,i.relations=[],i.nodes=[],i.nodes.push(a),i.parent=n,a.addToTree=!0,a.parent=Object(He["a"])(i);var o=a.rightMarginEnd,u=!0,d=!1,p=void 0;try{for(var h,m=i.partners[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=h.value;g.addToTree=!0,i.nodes.push(g),g.parent=Object(He["a"])(i),a.hasXValue&&(g.setXYPosition(o+g.spacing,a.y),o=g.rightMarginEnd);var f=new We(e,a,g);i.relations.push(f)}}catch(v){d=!0,p=v}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}return a.hasXValue&&(i.updateWidth(),i.setXYPosition(a.leftMarginStart,a.y)),i}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"setContentPosition",value:function(e,t){this.mainNode.setXYPosition(e,t);var a=this.mainNode.rightMarginEnd,n=!0,i=!1,r=void 0;try{for(var s,o=this.partners[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;l.setXYPosition(a+l.spacing,t),a=l.rightMarginEnd}}catch(c){i=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.setXYPosition(this.mainNode.leftMarginStart,t)}},{key:"setPosition",value:function(e,t){var a=e+this.spacing+this.mainNode.spacing;this.setContentPosition(a,t)}},{key:"updateWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.mainNode.updateSpacing(this.mainNode.spacing+e);var t=this.mainNode.widthAndSpacing,a=!0,n=!1,i=void 0;try{for(var r,s=this.partners[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value;o.updateSpacing(o.spacing+e),t+=o.widthAndSpacing}}catch(l){n=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}this.width=t,this.widthAndSpacing=this.width+2*this.spacing}},{key:"setDisabled",value:function(e){this.disabled=e,this.mainNode.setDisabled(e);var t=!0,a=!1,n=void 0;try{for(var i,r=this.partners[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.setDisabled(e)}}catch(h){a=!0,n=h}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}var o=!0,l=!1,c=void 0;try{for(var u,d=this.relations[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value;p.disabled=e}}catch(h){l=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}},{key:"render",value:function(){this.mainNode.render();var e=!0,t=!1,a=void 0;try{for(var n,i=this.partners[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var r=n.value;r.render()}}catch(p){t=!0,a=p}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}var s=!0,o=!1,l=void 0;try{for(var c,u=this.relations[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;d.render()}}catch(p){o=!0,l=p}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}}},{key:"clearRenderValues",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.mainNode.clearRenderValues(e);var a=!0,n=!1,i=void 0;try{for(var r,s=this.partners[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value;o.clearRenderValues(e)}}catch(l){n=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}e&&(this.spacing=t.MIN_SPACING,this.relations=[],this.nodes=[])}}]),t}($e);Fe.MIN_SPACING=15;var Ye=function(e){function t(e,a,n,i,r){var o;Object(s["a"])(this,t),o=Object(l["a"])(this,Object(c["a"])(t).call(this,0,Ge.HEIGHT,t.MIN_SPACING)),o.setYPosition(i),o.ctx=e,o.id=t.getGroupIdForCommonRelatives(a),o.commonRelatives=a,o.groupedByAncestors=n,o.partnerNodes=new Array,o.partnerNodesById={},o.mainNodesWidth=0,o.parent=r,o.commonRelativesById={};var u=!0,d=!1,p=void 0;try{for(var h,m=o.commonRelatives[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=h.value;o.commonRelativesById[g.id.toString()]=g}}catch(f){d=!0,p=f}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}return o}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"addNode",value:function(e){if(!this.partnerNodesById[e.id]){var t=new Fe(this.ctx,e,this);this.partnerNodes.push(t),this.partnerNodesById[t.id]=t}}},{key:"setContentPosition",value:function(e){var t=e,a=this.partnerNodes[0];a.setContentPosition(t,this.y),t=a.rightMarginEnd;for(var n=1;n<this.partnerNodes.length;n++){var i=this.partnerNodes[n];i.setPosition(t,this.y),t=i.rightMarginEnd}this.setXPosition(this.partnerNodes[0].leftMarginStart)}},{key:"setLeftPosition",value:function(e){var t=this.partnerNodes[0],a=e+this.spacing/2+t.spacing+t.nodes[0].spacing;this.setContentPosition(a)}},{key:"setDisabled",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=this.partnerNodes[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.setDisabled(e)}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}}},{key:"render",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,i=this.partnerNodes[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var r=n.value;r.render()}}catch(s){t=!0,a=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}}},{key:"clearRenderValues",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!0,a=!1,n=void 0;try{for(var i,r=this.partnerNodes[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.clearRenderValues(e)}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}e&&(this.partnerNodes=new Array,this.partnerNodesById={})}},{key:"hasCommonRelatives",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=this.commonRelatives[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=!0,l=!1,c=void 0;try{for(var u,d=e.commonRelatives[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value;if(s.id===p.id)return!0}}catch(h){l=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}}catch(h){a=!0,n=h}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return!1}},{key:"updateWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0,n=!0,i=!1,r=void 0;try{for(var s,o=this.partnerNodes[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;l.updateWidth(t),l.updateSpacing(l.spacing+e),a+=l.widthAndSpacing}}catch(c){i=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.width=a,this.widthAndSpacing=this.width+this.spacing}},{key:"getCentrePositionOfCommonRelatives",value:function(){if(this.commonRelatives.length>0){var e=0,t=0,a=!0,n=!1,i=void 0;try{for(var r,s=this.commonRelatives[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value;o.hasXValue&&(e+=o.xMid,t++)}}catch(c){n=!0,i=c}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}var l=e/t;return l}return this.xMid}}],[{key:"getGroupIdForCommonRelatives",value:function(e){if(e){var t=e.map((function(e){return e.id})),a=t.sort().join("|");return a}return"0"}}]),t}($e);Ye.MIN_SPACING=10;var Ke=function(e){function t(e,a,n,i){var r;return Object(s["a"])(this,t),r=Object(l["a"])(this,Object(c["a"])(t).call(this,0,Ge.HEIGHT,0)),r.id=n.toString(),r.level=n,r.canvas=e,r.ctx=a,r.setYPosition(i),r.groupsById={},r.groups=[],r.setYPosition(i),r}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"addSelectedNode",value:function(e,t){if(!e.hasYValue){var a=(this.canvas.width/t-Ge.WIDTH)/2,n=(this.canvas.height/t-Ge.HEIGHT)/2;e.setXYPosition(a,n)}var i=new Ye(this.ctx,[],!0,e.y,this);this.groupsById[i.id]=i,this.groups.push(i),i.addNode(e),i.updateWidth(0,0),i.setXYPosition(i.partnerNodes[0].leftMarginStart,e.y)}},{key:"addNode",value:function(e,t,a){var n=Ye.getGroupIdForCommonRelatives(t);if(!this.groupsById[n]){var i=new Ye(this.ctx,t,a,this.y,this);this.groupsById[i.id]=i,this.groups.push(i)}this.groupsById[n].addNode(e)}},{key:"getLargestOverlap",value:function(){var e,t=0,a=!0,n=!1,i=void 0;try{for(var r,s=this.groups[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value;if(e){var l=e.rightMarginEnd-o.leftMarginStart;t=Math.max(t,l)}e=o}}catch(c){n=!0,i=c}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return t}},{key:"updateWidth",value:function(){this.width=0;var e=!0,t=!1,a=void 0;try{for(var n,i=this.groups[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var r=n.value;r.updateWidth(0,0),this.width+=r.width}}catch(s){t=!0,a=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}}},{key:"setDisabled",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=this.groups[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.setDisabled(e)}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}}},{key:"render",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,i=this.groups[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var r=n.value;r.render()}}catch(s){t=!0,a=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}}},{key:"clearRenderValues",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!0,a=!1,n=void 0;try{for(var i,r=this.groups[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.clearRenderValues(e)}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}e&&(this.groupsById={},this.groups=[])}}]),t}($e);Ke.TREE_LEVEL_SPACING=100;var qe=function(){function e(t,a,n){Object(s["a"])(this,e),this.ctx=t,this.disabled=!1;var i=a.map((function(e){return e.id})),r=i.sort().join("|");this.id="".concat(r,"-").concat(n.id),this.fromNodes=a,this.toNode=n}return Object(o["a"])(e,[{key:"render",value:function(){var e,t=this.fromNodes.filter((function(e){return e.hasXValue&&e.hasYValue})).sort((function(e,t){return e.x-t.x})),a=new Array,n=new Array,i=!0,r=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;e&&-1!==e.partners.indexOf(c)?n.push(c):(n.length>0&&a.push(n),n=new Array,n.push(c),e=c)}}catch(h){r=!0,s=h}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}n.length>0&&a.push(n);for(var u=0,d=a;u<d.length;u++){var p=d[u];p.length>1?this.renderMultipleAncestors(p):this.renderSingleAncestor(p[0])}}},{key:"renderSingleAncestor",value:function(t){var a=new Be(t.xMid,t.yBottom),n=new Be(a.x,a.y+e.INFLECTION_HEIGHT),i=new Be(this.toNode.xMid,n.y),r=new Be(i.x,this.toNode.y);this.ctx.beginPath();var s=e.STROKE_STYLE;this.disabled&&(s=e.DISABLED_STROKE_STYLE),this.ctx.strokeStyle=s,this.ctx.lineWidth=e.LINE_WIDTH,this.ctx.moveTo(a.x,a.y),this.ctx.lineTo(n.x,n.y),this.ctx.lineTo(i.x,i.y),this.ctx.lineTo(r.x,r.y),this.ctx.stroke()}},{key:"renderMultipleAncestors",value:function(t){var a=new Be(t[t.length-1].leftMarginStart,t[t.length-1].yBottom+e.HEIGHT),n=new Be(a.x,a.y+e.INFLECTION_HEIGHT),i=new Be(this.toNode.xMid,n.y),r=new Be(i.x,this.toNode.y);this.ctx.beginPath();var s=e.STROKE_STYLE;this.disabled&&(s=e.DISABLED_STROKE_STYLE),this.ctx.strokeStyle=s,this.ctx.lineWidth=e.LINE_WIDTH,this.ctx.moveTo(a.x,a.y),this.ctx.lineTo(n.x,n.y),this.ctx.lineTo(i.x,i.y),this.ctx.lineTo(r.x,r.y),this.ctx.stroke()}}]),e}();qe.STROKE_STYLE="#2e6f9a",qe.DISABLED_STROKE_STYLE="#333",qe.LINE_WIDTH=2,qe.INFLECTION_HEIGHT=40,qe.HEIGHT=20;var Ve=function(){function e(t){Object(s["a"])(this,e),this.tree=t}return Object(o["a"])(e,[{key:"position",value:function(e){var t=Object.values(this.tree.treeLevelsByLevel).filter((function(e){return e.level<0})).sort((function(e,t){return t.level-e.level})),a=!0,n=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value;this.positionAncestorGroups(o,0,0),e&&this.expandIfOverlap(o)}}catch(l){n=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}}},{key:"expandIfOverlap",value:function(e){var t=e.getLargestOverlap();if(t>0){var a=(e.level+1).toString(),n=this.tree.treeLevelsByLevel[a];n&&(this.positionAncestorGroups(n,0,t/2),this.expandIfOverlap(n)),this.positionAncestorGroups(e,0,0)}}},{key:"positionAncestorGroups",value:function(e,t,a){var n,i=!0,r=!1,s=void 0;try{for(var o,l=e.groups[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;this.centreGroupAmongRelatives(c,t,a),n&&Math.abs(n.xMid-c.xMid)<2&&c.setLeftPosition(n.rightMarginEnd),n=c}}catch(u){r=!0,s=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}}},{key:"centreGroupAmongRelatives",value:function(e,t,a){var n=e.getCentrePositionOfCommonRelatives();e.updateWidth(t,a);var i=n-e.widthAndSpacing/2;e.setLeftPosition(i)}}]),e}(),Qe=function(){function e(t){Object(s["a"])(this,e),this.tree=t}return Object(o["a"])(e,[{key:"position",value:function(e){e&&this.setInitialLevelSpacing();var t=this.tree.treeLevels.filter((function(e){return e.level>0})).sort((function(e,t){return e.level-t.level}));if(t.length>0){var a,n=!0,i=!1,r=void 0;try{for(var s,o=t[0].groups[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;this.centreGroupAmongRelatives(l),a&&l.isOverlapped(a)&&l.setLeftPosition(a.rightMarginEnd+l.spacing/2),a=l}}catch(m){i=!0,r=m}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}for(var c=1;c<t.length;c++){var u=t[c];this.lineUpWithRelatives(u.groups[0],null);for(var d=u.groups[0],p=1;p<u.groups.length;p++){var h=u.groups[p];this.lineUpWithRelatives(h,d),d=h}}}},{key:"centreGroupAmongRelatives",value:function(e){var t,a=e.getCentrePositionOfCommonRelatives();if(e.updateWidth(0,0),1===e.partnerNodes.length){var n=e.partnerNodes[0];t=a-Ge.WIDTH/2-n.mainNode.spacing-n.spacing}else t=a-e.width/2;var i=t,r=!0,s=!1,o=void 0;try{for(var l,c=e.partnerNodes[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;u.setPosition(i,e.y),i=(u.xRight||i)+u.spacing}}catch(d){s=!0,o=d}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}e.setXPosition(t)}},{key:"lineUpWithRelatives",value:function(e,t){var a=this.getParentPartnerNode(e);a?e.setLeftPosition(a.leftMarginStart+e.spacing/2):this.centreGroupAmongRelatives(e),t&&e.isOverlapped(t)&&e.setLeftPosition(t.rightMarginEnd+e.spacing/2)}},{key:"getParentPartnerNode",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=e.commonRelatives[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=s.parent;if(o)return o}}catch(l){a=!0,n=l}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return null}},{key:"setInitialLevelSpacing",value:function(){var e,t=Object.values(this.tree.treeLevelsByLevel).filter((function(e){return e.level>0})).sort((function(e,t){return t.level-e.level})),a=!0,n=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value,l=!0,c=!1,u=void 0;try{for(var d,p=o.groups[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var h=d.value,m=h.spacing,g=!0,f=!1,v=void 0;try{for(var y,b=h.partnerNodes[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var w=y.value,k=w.mainNode.descendants.length,_=!0,j=!1,x=void 0;try{for(var O,C=w.mainNode.descendants[Symbol.iterator]();!(_=(O=C.next()).done);_=!0){var P=O.value;k+=P.partners.length}}catch(W){j=!0,x=W}finally{try{_||null==C.return||C.return()}finally{if(j)throw x}}var I=Math.max(0,k-w.partners.length-.5),S=Ge.WIDTH/2+Ge.MIN_SPACING,T=I*S,R=0;if(e){var E=!0,z=!1,A=void 0;try{for(var M,D=e.groups[Symbol.iterator]();!(E=(M=D.next()).done);E=!0){var N=M.value;if(N.commonRelativesById[w.id]){var L=!0,$=!1,B=void 0;try{for(var U,G=N.partnerNodes[Symbol.iterator]();!(L=(U=G.next()).done);L=!0){var H=U.value;R+=H.spacing-Fe.MIN_SPACING}}catch(W){$=!0,B=W}finally{try{L||null==G.return||G.return()}finally{if($)throw B}}}}}catch(W){z=!0,A=W}finally{try{E||null==D.return||D.return()}finally{if(z)throw A}}}w.spacing=Fe.MIN_SPACING+T+R,w.spacing>m&&(m=w.spacing)}}catch(W){f=!0,v=W}finally{try{g||null==b.return||b.return()}finally{if(f)throw v}}}}catch(W){c=!0,u=W}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}o.updateWidth(),e=o}}catch(W){n=!0,i=W}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}}}]),e}(),Je=function(){function e(t){Object(s["a"])(this,e),this.tree=t,this.level0=this.tree.treeLevelsByLevel["0"]}return Object(o["a"])(e,[{key:"position",value:function(){var e=this.level0.groups[0].partnerNodes[0];if(!e)throw new Error("Nodes not set up properly on Level 0");if(!e.mainNode.hasYValue){var t=(this.tree.canvas.width/this.tree.dpr-Ge.WIDTH)/2,a=(this.tree.canvas.height/this.tree.dpr-Ge.HEIGHT)/2;e.mainNode.setXYPosition(t,a)}var n=e.mainNode.rightMarginEnd,i=!0,r=!1,s=void 0;try{for(var o,l=e.partners[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;e.mainNode.hasXValue&&(c.setXYPosition(n+e.spacing,e.mainNode.y),n=c.rightMarginEnd)}}catch(u){r=!0,s=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}e.updateWidth(),e.setXYPosition(e.mainNode.leftMarginStart,e.mainNode.y),this.level0.xRight=n,this.level0.updateMargins()}}]),e}(),Xe=function e(){Object(s["a"])(this,e)};Xe.PARTNERED=1,Xe.RAISED=2,Xe.RAISED_BY=3,Xe.NAMES=["","message.Partnered","message.Raised","mesaage.RaisedBy"];var Ze=function(){function e(t){Object(s["a"])(this,e),this.parent=t,this.nodes=[]}return Object(o["a"])(e,[{key:"ClearRenderValues",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,i=this.nodes[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var r=n.value;r.clearRenderValues()}}catch(s){t=!0,a=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}this.nodes=[]}},{key:"setDisabled",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=this.nodes[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.setDisabled(e)}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}}},{key:"addSiblings",value:function(e){var t=this.groupNodesByAncestor(e),a=this.parent.treeLevelsByLevel["0"],n=a.rightMarginEnd,i=Object.keys(t).sort(),r=!0,s=!1,o=void 0;try{for(var l,c=i[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=!0,p=!1,h=void 0;try{for(var m,g=t[u][Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var f=m.value;if(!1===f.addToTree){f.addToTree=!0,f.setXYPosition(n,a.y),this.nodes.push(f),n=f.rightMarginEnd;var v=new qe(this.parent.ctx,f.ancestors,f);this.parent.raisedRelationsById[v.id]||(this.parent.raisedRelationsById[v.id]=v)}}}catch(y){p=!0,h=y}finally{try{d||null==g.return||g.return()}finally{if(p)throw h}}}}catch(y){s=!0,o=y}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}}},{key:"render",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,i=this.nodes[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var r=n.value;r.render()}}catch(s){t=!0,a=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}}},{key:"positionSiblings",value:function(){var e=this.parent.treeLevelsByLevel["0"],t=e.groups[0],a=e.rightMarginEnd+t.spacing,n=!0,i=!1,r=void 0;try{for(var s,o=this.nodes[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;l.setXYPosition(a+t.spacing,t.y),a=l.rightMarginEnd}}catch(c){i=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"groupNodesByAncestor",value:function(e){var t=Ye.getGroupIdForCommonRelatives(e.ancestors),a={},n=!0,i=!1,r=void 0;try{for(var s,o=e.ancestors[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value,c=!0,u=!1,d=void 0;try{for(var p,h=l.descendants[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value;if(m.id!==e.id){var g=Ye.getGroupIdForCommonRelatives(m.ancestors);g===t&&(g=" "+g),a[g]||(a[g]=new Array),a[g].push(m)}}}catch(f){u=!0,d=f}finally{try{c||null==h.return||h.return()}finally{if(u)throw d}}}}catch(f){i=!0,r=f}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return a}}]),e}(),et=function(){function e(t,a,n){Object(s["a"])(this,e),this.selectedPersonId="";var i=t.getBoundingClientRect().top,r=window.devicePixelRatio||1;t.width=window.innerWidth*r,t.height=(window.innerHeight-i)*r;var o=t.getContext("2d");if(!o)throw new Error("No 2d canvas element!");o.scale(r,r),this.dpr=r,this.canvas=t,this.ctx=o,this.nodesById={},this.treeLevels=[],this.treeLevelsByLevel={},this.raisedRelationsById={},this.disabled=!1,this.siblingNodeGroup=new Ze(this);var l=!0,c=!1,u=void 0;try{for(var d,p=a[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var h=d.value,m=new Ge(o,h);this.nodesById[m.id]=m}}catch(j){c=!0,u=j}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}var g=!0,f=!1,v=void 0;try{for(var y,b=n[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var w=y.value,k=this.nodesById[w.from_person_id],_=this.nodesById[w.to_person_id];w.relation_type===Xe.RAISED?(k.descendants.push(_),_.ancestors.push(k)):(k.partners.push(_),_.partners.push(k))}}catch(j){f=!0,v=j}finally{try{g||null==b.return||b.return()}finally{if(f)throw v}}this.selectedNode=this.nodesById[Vd.state.person_id],this.selectedNode.selected=!0,this.hoverNode=null}return Object(o["a"])(e,[{key:"setDisabled",value:function(e){this.disabled=e;var t=!0,a=!1,n=void 0;try{for(var i,r=this.treeLevels[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.setDisabled(e)}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}this.siblingNodeGroup.setDisabled(e),Object.values(this.raisedRelationsById).forEach((function(t){t.disabled=e}))}},{key:"render",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];window.console.log("Tree.Render()"),this.clearCanvas(e),e&&(this.addLevel0(),this.addAncestors(),this.addDescendants(),this.setDisabled(this.disabled));var t=new Je(this);t.position();var a=new Ve(this);a.position(e);var n=new Qe(this);n.position(e),this.siblingNodeGroup.addSiblings(this.selectedNode),this.siblingNodeGroup.positionSiblings();var i=!0,r=!1,s=void 0;try{for(var o,l=this.treeLevels[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;c.render()}}catch(u){r=!0,s=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}this.siblingNodeGroup.render(),Object.values(this.raisedRelationsById).forEach((function(e){e.render()}))}},{key:"click",value:function(e,t){var a=this.getNodeAtXY(e,t);a&&Vd.dispatch("changePerson",a.id.toString())}},{key:"changeSelectedPerson",value:function(e,t){this.nodesById[t].selected=!1,this.selectedPersonId=e,this.nodesById[e].selected=!0,this.render(!0)}},{key:"hover",value:function(e,t){var a=this.getNodeAtXY(e,t);if(a!==this.hoverNode){if(Object.values(this.nodesById).forEach((function(e){e.highlighted=!1})),a){a.highlighted=!0;var n=a.ancestors.concat(a.descendants).concat(a.partners),i=!0,r=!1,s=void 0;try{for(var o,l=n[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;c.highlighted=!0}}catch(u){r=!0,s=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}}this.hoverNode=a,this.render(!1)}}},{key:"getNodeAtXY",value:function(e,t){var a=!0,n=!1,i=void 0;try{for(var r,s=this.getDrawnNodes()[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value;if(o.hasXValue&&o.hasYValue&&o.x<e&&o.xRight>e&&o.y<t&&o.yBottom>t)return o}}catch(l){n=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return null}},{key:"getDrawnNodes",value:function(){var e=new Array,t=!0,a=!1,n=void 0;try{for(var i,r=this.treeLevels[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=!0,l=!1,c=void 0;try{for(var u,d=s.groups[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value,h=!0,m=!1,g=void 0;try{for(var f,v=p.partnerNodes[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){var y=f.value,b=!0,w=!1,k=void 0;try{for(var _,j=y.nodes[Symbol.iterator]();!(b=(_=j.next()).done);b=!0){var x=_.value;e.push(x)}}catch(O){w=!0,k=O}finally{try{b||null==j.return||j.return()}finally{if(w)throw k}}}}catch(O){m=!0,g=O}finally{try{h||null==v.return||v.return()}finally{if(m)throw g}}}}catch(O){l=!0,c=O}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}}catch(O){a=!0,n=O}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return e.push.apply(e,Object(N["a"])(this.siblingNodeGroup.nodes)),e}},{key:"clearCanvas",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!0,a=!1,n=void 0;try{for(var i,r=this.treeLevels[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.clearRenderValues(e)}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}this.siblingNodeGroup.ClearRenderValues(),e&&(this.treeLevelsByLevel={},this.treeLevels=[],this.raisedRelationsById={}),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore()}},{key:"addLevel0",value:function(){var e=new Ke(this.canvas,this.ctx,0,0);this.selectedNode=this.nodesById[Vd.state.person_id],e.addSelectedNode(this.selectedNode,this.dpr),this.createRelations(this.selectedNode),this.treeLevelsByLevel[e.id]=e,this.treeLevels.push(e)}},{key:"addAncestors",value:function(){var e={},t=new Array;t.push(this.selectedNode),e[this.selectedNode.id]=this.selectedNode;var a=-1;while(t.length>0){var n=this.selectedNode.y+a*(Ge.HEIGHT+Ke.TREE_LEVEL_SPACING),i=new Ke(this.canvas,this.ctx,a,n),r=new Array,s=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value,p=!0,h=!1,m=void 0;try{for(var g,f=d.ancestors[Symbol.iterator]();!(p=(g=f.next()).done);p=!0){var v=g.value;e[v.id]||(r.push(v),e[v.id]=v,!1===v.addToTree&&i.addNode(v,v.descendants,!0),this.createRelations(v))}}catch(y){h=!0,m=y}finally{try{p||null==f.return||f.return()}finally{if(h)throw m}}}}catch(y){o=!0,l=y}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}i.groups.length>0&&(this.treeLevelsByLevel[i.id]=i,this.treeLevels.push(i)),t=r,a--}}},{key:"addDescendants",value:function(){var e={},t=new Array;t.push(this.selectedNode),e[this.selectedNode.id]=this.selectedNode;var a=1;while(t.length>0){var n=this.selectedNode.y+a*(Ge.HEIGHT+Ke.TREE_LEVEL_SPACING),i=new Ke(this.canvas,this.ctx,a,n),r=new Array,s=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value,p=!0,h=!1,m=void 0;try{for(var g,f=d.descendants[Symbol.iterator]();!(p=(g=f.next()).done);p=!0){var v=g.value;e[v.id]||(r.push(v),e[v.id]=v,!1===v.addToTree&&i.addNode(v,v.ancestors,!0),this.createRelations(v))}}catch(y){h=!0,m=y}finally{try{p||null==f.return||f.return()}finally{if(h)throw m}}}}catch(y){o=!0,l=y}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}i.groups.length>0&&(this.treeLevelsByLevel[i.id]=i,this.treeLevels.push(i)),t=r,a++}}},{key:"createRelations",value:function(e){if(e.ancestors.length>0){var t=new qe(this.ctx,e.ancestors,e);this.raisedRelationsById[t.id]||(this.raisedRelationsById[t.id]=t)}}}]),e}(),tt={tree:null,canvas:null,ctx:null,lastPoint:{x:0,y:0,x2:0,y2:0},dragStart:[null,null],dragStartTime:(new Date).getTime(),multiTouch:!1,minZoom:.1,maxZoom:5,initialize:function(e,t){tt.tree=t,tt.canvas=e,tt.ctx=t.ctx,tt.trackTransforms(tt.ctx),tt.lastPoint.x=e.width/2,tt.lastPoint.y=e.height/2,tt.lastPoint.x2=tt.lastPoint.x,tt.lastPoint.y2=tt.lastPoint.y,e.addEventListener("mousedown",tt.mousedown,!1),e.addEventListener("touchstart",tt.touchstart,!1),e.addEventListener("mousemove",tt.mouseMove,!1),e.addEventListener("touchmove",tt.touchmove,!1),e.addEventListener("mouseup",tt.mouseUp,!1),e.addEventListener("touchend",tt.mouseUp,!1),e.addEventListener("DOMMouseScroll",tt.handleScroll,!1),e.addEventListener("mousewheel",tt.handleScroll,!1)},mousedown:function(e){if(!tt.tree.disabled){var t=tt.canvasOffset();tt.lastPoint.x=e.clientX-t.left,tt.lastPoint.y=e.clientY-t.top,tt.dragStart[0]=tt.ctx.transformedPoint(tt.lastPoint.x,tt.lastPoint.y),tt.dragStartTime=(new Date).getTime()}},touchstart:function(e){if(!tt.tree.disabled){var t=tt.getTouchPos(e);return tt.lastPoint.x=t.x,tt.lastPoint.y=t.y,t.multiTouch&&(tt.lastPoint.x2=t.x2,tt.lastPoint.y2=t.y2,tt.multiTouch=!0,tt.dragStart[1]=tt.ctx.transformedPoint(tt.lastPoint.x2,tt.lastPoint.y2)),tt.dragStart[0]=tt.ctx.transformedPoint(tt.lastPoint.x,tt.lastPoint.y),tt.dragStartTime=(new Date).getTime(),e.preventDefault()&&!1}},mouseMove:function(e){if(!tt.tree.disabled){var t=tt.canvasOffset();tt.lastPoint.x=e.pageX-t.left,tt.lastPoint.y=e.pageY-t.top;var a=tt.ctx.transformedPoint(tt.lastPoint.x,tt.lastPoint.y);if(tt.dragStart[0]){var n=a.x-tt.dragStart[0].x,i=a.y-tt.dragStart[0].y;tt.ctx.translate(n,i),tt.tree.render(!1)}else tt.tree.hover(a.x,a.y)}},touchmove:function(e){if(!tt.tree.disabled){var t=tt.getTouchPos(e);return tt.dragStart[0]&&(tt.dragStart[1]?tt.pinchZoom(t):tt.singleTouchMove(t)),e.preventDefault()&&!1}},pinchZoom:function(e){if(!tt.tree.disabled){var t=tt.ctx.transformedPoint(e.x,e.y),a=tt.ctx.transformedPoint(e.x2,e.y2),n=Math.pow(tt.dragStart[0].x-tt.dragStart[1].x,2)+Math.pow(tt.dragStart[0].y-tt.dragStart[1].y,2),i=Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2),r=Math.pow(i/n,.5);if(r>1&&tt.ctx.getTransform().a<tt.maxZoom||r<1&&tt.ctx.getTransform().a>tt.minZoom){var s={x:(t.x+a.x)/2,y:(t.y+a.y)/2};tt.ctx.translate(s.x,s.y),tt.ctx.scale(r,r),tt.ctx.translate(-s.x,-s.y)}tt.tree.render(!1)}},smoothTranslateTo:function(e,t){var a=tt.ctx.transformedPoint(tt.canvas.width/2/tt.tree.dpr,tt.canvas.height/2/tt.tree.dpr),n=10,i=(a.x-e)/n,r=(a.y-t)/n;tt.animateMove(1,n,i,r)},animateMove:function(e,t,a,n){tt.ctx.translate(a,n),tt.tree.render(!1),e<t&&window.setTimeout((function(){tt.animateMove(e+1,t,a,n)}))},smoothTranslateAndZoomTo:function(e,t,a){var n=tt.ctx.transformedPoint(tt.canvas.width/2/tt.tree.dpr,tt.canvas.height/2/tt.tree.dpr),i=(tt.ctx.transformedPoint(e,t),10),r=(n.x-e)/i,s=(n.y-t)/i,o=Math.pow(a/tt.ctx.getTransform().a,1/i);tt.animateMoveAndZoom(1,i,r,s,i,o,e,t)},animateMoveAndZoom:function(e,t,a,n,i,r,s,o){e<t?(tt.ctx.translate(a,n),tt.tree.render(!1),window.setTimeout((function(){tt.animateMoveAndZoom(e+1,t,a,n,i,r,s,o)}))):e<i+t?(tt.ctx.translate(s,o),tt.ctx.scale(r,r),tt.ctx.translate(-s,-o),tt.tree.render(!1),window.setTimeout((function(){tt.animateMoveAndZoom(e+1,t,a,n,i,r,s,o)}))):tt.smoothTranslateTo(s,o)},singleTouchMove:function(e){if(!tt.tree.disabled){tt.lastPoint.x=e.x,tt.lastPoint.y=e.y;var t=tt.ctx.transformedPoint(tt.lastPoint.x,tt.lastPoint.y),a=t.x-tt.dragStart[0].x,n=t.y-tt.dragStart[0].y;tt.ctx.translate(a,n),tt.tree.render(!1)}},mouseUp:function(){if(!tt.tree.disabled){var e=(new Date).getTime()-tt.dragStartTime;if(e<150&&!tt.dragStart[1]){var t=tt.ctx.transformedPoint(tt.lastPoint.x,tt.lastPoint.y);tt.tree.click(t.x,t.y)}tt.dragStart[0]=null,tt.dragStart[1]=null,tt.dragStartTime=null}},handleScroll:function(e){if(!tt.tree.disabled){var t=e.wheelDelta?e.wheelDelta/80:e.detail?-e.detail:0;if(t){var a=1.1,n=Math.pow(a,t);if(n>1&&tt.ctx.getTransform().a<tt.maxZoom||n<1&&tt.ctx.getTransform().a>tt.minZoom){var i=tt.ctx.transformedPoint(tt.lastPoint.x,tt.lastPoint.y);tt.ctx.translate(i.x,i.y),tt.ctx.scale(n,n),tt.ctx.translate(-i.x,-i.y)}tt.tree.render(!1)}return e.preventDefault()&&!1}},getTouchPos:function(e){if(!tt.tree.disabled){var t=tt.canvas.getBoundingClientRect(),a=e.touches.length>1,n=0,i=0;return a&&(n=e.touches[1].clientX-t.left,i=e.touches[1].clientY-t.top),{multiTouch:a,x:e.touches[0].clientX-t.left,y:e.touches[0].clientY-t.top,x2:n,y2:i}}},trackTransforms:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=t.createSVGMatrix();e.getTransform=function(){return a};var n=[],i=e.save;e.save=function(){return n.push(a.translate(0,0)),i.call(e)};var r=e.restore;e.restore=function(){return a=n.pop(),n=[],r.call(e)};var s=e.scale;e.scale=function(t,n){return a=a.scaleNonUniform(t,n),s.call(e,t,n)};var o=e.rotate;e.rotate=function(t){return a=a.rotate(180*t/Math.PI),o.call(e,t)};var l=e.translate;e.translate=function(t,n){return a=a.translate(t,n),l.call(e,t,n)};var c=e.transform;e.transform=function(n,i,r,s,o,l){var u=t.createSVGMatrix();return u.a=n,u.b=i,u.c=r,u.d=s,u.e=o,u.f=l,a=a.multiply(u),c.call(e,n,i,r,s,o,l)};var u=e.setTransform;e.setTransform=function(t,n,i,r,s,o){return a.a=t,a.b=n,a.c=i,a.d=r,a.e=s,a.f=o,u.call(e,t,n,i,r,s,o)};var d=t.createSVGPoint();e.transformedPoint=function(e,t){return d.x=e,d.y=t,d.matrixTransform(a.inverse())}},canvasOffset:function(){var e=this.canvas.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,a=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+a,left:e.left+t}},getViewBoundary:function(){var e=tt.ctx.transformedPoint(0,0),t=tt.ctx.transformedPoint(this.canvas.width,this.canvas.height);return{top:e.y,left:e.x,bottom:t.y,right:t.x}}},at=tt,nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree-nav-control-container"},[a("div",[a("button",{staticClass:"btn btn-light zoom-control",attrs:{type:"button"},on:{click:function(t){return e.zoomIn()}}},[a("span",{staticClass:"oi oi-plus",attrs:{"aria-hidden":"true"}})])]),a("div",[a("button",{staticClass:"btn btn-light zoom-control",attrs:{type:"button"},on:{click:function(t){return e.zoomOut()}}},[a("span",{staticClass:"oi oi-minus",attrs:{"aria-hidden":"true"}})])])])},it=[],rt=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"zoomIn",value:function(){this.$emit("zoomIn")}},{key:"zoomOut",value:function(){this.$emit("zoomOut")}}]),t}(p["c"]);rt=Object(d["a"])([p["a"]],rt);var st=rt,ot=st,lt=(a("c15c"),Object(y["a"])(ot,nt,it,!1,null,"76968fd3",null)),ct=lt.exports,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree-edit-control-container"},[a("button",{staticClass:"btn btn-secondary btn-round",attrs:{title:e.$t("message.Edit"),type:"button"},on:{click:e.click}},[a("span",{staticClass:"oi oi-pencil edit-button",attrs:{"aria-hidden":"true"}})])])},dt=[],pt=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"click",value:function(){this.$emit("click")}}]),t}(p["c"]);pt=Object(d["a"])([p["a"]],pt);var ht=pt,mt=ht,gt=(a("a471"),Object(y["a"])(mt,ut,dt,!1,null,"c1358408",null)),ft=gt.exports,vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree-cancel-edit-control-container"},[a("button",{staticClass:"btn btn-success btn-round",attrs:{title:e.$t("message.Done"),type:"button"},on:{click:e.click}},[a("span",{staticClass:"oi oi-check cancel-button",attrs:{"aria-hidden":"true"}})])])},yt=[],bt=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"click",value:function(){this.$emit("click")}}]),t}(p["c"]);bt=Object(d["a"])([p["a"]],bt);var wt=bt,kt=wt,_t=(a("ab47"),Object(y["a"])(kt,vt,yt,!1,null,"82079de4",null)),jt=_t.exports,xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-button",{staticClass:"add-relative-control",style:e.positionStyle,attrs:{variant:"outline-primary"},on:{click:e.click}},[a("div",[a("img",{staticClass:"button-image",attrs:{src:"img/portrait_80.png"}})]),a("span",{staticClass:"oi oi-plus",attrs:{"aria-hidden":"true"}}),e._v("\r\n      "+e._s(e.$t("message.AddAncestor"))+"\r\n    ")]),a("div",{staticClass:"vertical-line",style:e.linePositionStyle}),a("AddRelativeModal",{ref:"addRelativeModal",attrs:{title:e.$t("message.AddAncestor"),relationType:e.relationType}})],1)},Ot=[],Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-modal",{ref:"modal",attrs:{centered:"","no-close-on-esc":!0,"no-close-on-backdrop":!0,title:e.title,okTitle:e.$t("message.Ok"),cancelTitle:e.$t("message.Cancel"),"button-size":"lg"},on:{ok:e.handleOk,show:e.resetModal,hidden:e.resetModal,busy:e.busy}},[a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:"",justified:""}},[a("b-tab",{attrs:{active:""},on:{click:function(t){return e.setState("NewPerson")}}},[a("template",{slot:"title"},[a("span",{staticClass:"oi oi-plus",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"oi oi-person",attrs:{"aria-hidden":"true"}}),e._v("\r\n                        "+e._s(e.$t("message.NewPerson"))+"\r\n                    ")]),a("b-card-text",[a("NewRelative",{ref:"newRelativeControl",attrs:{relationType:e.relationType},on:{onError:e.onError,personCreated:e.personCreated}})],1)],2),a("b-tab",{on:{click:function(t){return e.setState("ExistingPerson")}}},[a("template",{slot:"title"},[a("span",{staticClass:"oi oi-magnifying-glass",attrs:{"aria-hidden":"true"}}),e._v("\r\n                        "+e._s(e.$t("message.ExistingPerson"))+"\r\n                    ")]),a("b-card-text",[a("ExistingRelative",{ref:"existingRelativeControl",attrs:{relationType:e.relationType},on:{onError:e.onError,relationCreated:e.relationCreated}})],1)],2)],1)],1),e.busy?a("Loading"):e._e(),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\r\n            "+e._s(e.errorMessage)+"\r\n        ")])],1),a("SuggestedRelativeModal",{ref:"suggestedRelativeModal"})],1)},Pt=[],It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-form",{ref:"form",on:{submit:e.submit}},[a("b-form-group",{attrs:{label:e.$t("message.Name")+"*","label-for":"name",state:e.form.nameState}},[a("b-form-input",{attrs:{id:"nameInput",state:e.form.nameState,required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("b-form-group",{attrs:{label:e.$t("message.Gender")+"*"}},[a("b-form-select",{attrs:{options:e.options,required:""},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}})],1),a("b-form-group",{attrs:{label:e.$t("message.BirthYear"),state:e.form.birthYearState}},[a("b-form-input",{attrs:{id:"birthYear",type:"number",state:e.form.birthYearState},model:{value:e.form.birthYear,callback:function(t){e.$set(e.form,"birthYear",t)},expression:"form.birthYear"}})],1),a("b-form-group",{attrs:{label:e.$t("message.Location")}},[a("b-form-input",{model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),a("small",{staticClass:"font-italic"},[e._v("* "+e._s(e.$t("message.Required")))])],1)},St=[],Tt=function e(t,a){Object(s["a"])(this,e),this.value=t,this.text=a},Rt=function(){function e(t){Object(s["a"])(this,e),this.localisedGendersByKey={},this.localisedGendersByKey[e.FEMALE]=t.$t("message.Female").toString(),this.localisedGendersByKey[e.MALE]=t.$t("message.Male").toString(),this.localisedGendersByKey[e.NON_BINARY]=t.$t("message.NonBinary").toString(),this.localisedGendersByKey[e.OTHER]=t.$t("message.Other").toString(),this.localisedGendersByKey[e.PREFER_NOT_TO_SAY]=t.$t("message.PreferNotToSay").toString()}return Object(o["a"])(e,[{key:"createDropDownOptions",value:function(){var e=this,t=new Array;return Object.keys(this.localisedGendersByKey).forEach((function(a){t.push(new Tt(a,e.localisedGendersByKey[a]))})),t}}]),e}();Rt.FEMALE="F",Rt.MALE="M",Rt.NON_BINARY="N",Rt.OTHER="O",Rt.PREFER_NOT_TO_SAY="P";var Et=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.options=[],e.form={name:"",nameState:null,gender:"F",birthYear:"",birthYearState:null,location:""},e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"submit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$refs.form.checkValidity(),this.form.nameState=t?"valid":"invalid",t){e.next=5;break}return this.$emit("onError"),e.abrupt("return");case 5:return e.prev=5,a=Vd.state.person_id,n={uri:"".concat(he.BaseApiUrl).concat(he.PersonAPI),headers:Vd.getters.ajaxHeader,body:{from_person_id:a,relation_type:this.relationType,name:this.form.name,gender:this.form.gender,birth_year:this.form.birthYear,address:this.form.location},json:!0},e.next=10,ue["post"](n);case 10:i=e.sent,Vd.dispatch("addPeople",[i.person]),Vd.dispatch("addRelations",[i.relation]),this.$emit("personCreated",i.person),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](5),this.$emit("onError",e.t0);case 19:case"end":return e.stop()}}),e,this,[[5,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=new Rt(this);this.options=e.createDropDownOptions();var t=document.getElementById("nameInput");t&&setTimeout((function(){t.focus(),t.select()}),100)}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:1})],Et.prototype,"relationType",void 0),Et=Object(d["a"])([p["a"]],Et);var zt=Et,At=zt,Mt=Object(y["a"])(At,It,St,!1,null,"b451a23a",null),Dt=Mt.exports,Nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],staticClass:"form-control",attrs:{id:"relative-search-box",type:"text",placeholder:e.$t("message.Search"),"aria-label":e.$t("message.Search"),autocomplete:"off"},domProps:{value:e.searchValue},on:{input:[function(t){t.target.composing||(e.searchValue=t.target.value)},function(t){return e.searchValue=t.target.value}]}}),a("b-list-group",e._l(e.peopleResults,(function(t){return a("b-list-group-item",{key:t.id,attrs:{active:t===e.selectedPerson},on:{click:function(a){return e.selectPerson(t)}}},[a("img",{staticClass:"search-thumb",attrs:{src:t.small_thumbnail}}),e._v("\n            "+e._s(t.name)+"\n        ")])})),1)],1)},Lt=[],$t=function(){function e(t){Object(s["a"])(this,e),this.partners=[],this.ancestors=[],this.descendants=[],this.person=t,this.person.small_thumbnail||(this.person.small_thumbnail="img/portrait_80.png")}return Object(o["a"])(e,[{key:"partnersContain",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=this.partners[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;if(s.person.id===e)return!0}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return!1}},{key:"ancestorsContain",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=this.ancestors[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;if(s.person.id===e)return!0}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return!1}},{key:"descendantsContain",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=this.descendants[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;if(s.person.id===e)return!0}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return!1}}]),e}(),Bt=function e(t,a,n){Object(s["a"])(this,e),this.fromPerson=t,this.toPerson=a,this.relationType=n,this.fromPersonName=t.name,this.toPersonName=a.name,this.id="".concat(this.fromPerson.id,"-").concat(this.toPerson.id),this.fromPersonImage=t.small_thumbnail,this.toPersonImage=a.small_thumbnail,this.fromPersonImage||(this.fromPerson.small_thumbnail="img/portrait_80.png"),this.toPersonImage||(this.toPerson.small_thumbnail="img/portrait_80.png")},Ut=function(){function e(t,a,n){Object(s["a"])(this,e),this.personAndRelationshipById={};var i=!0,r=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;this.personAndRelationshipById[u.id]=new $t(u)}}catch(b){r=!0,o=b}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}var d=!0,p=!1,h=void 0;try{for(var m,g=a[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var f=m.value,v=this.personAndRelationshipById[f.from_person_id],y=this.personAndRelationshipById[f.to_person_id];f.relation_type===Xe.RAISED?(v.descendants.push(y),y.ancestors.push(v)):(v.partners.push(y),y.partners.push(v))}}catch(b){p=!0,h=b}finally{try{d||null==g.return||g.return()}finally{if(p)throw h}}this.selectedPerson=this.personAndRelationshipById[n]}return Object(o["a"])(e,[{key:"getAllRelationshipSuggestions",value:function(){var e=new Array,t=!0,a=!1,n=void 0;try{for(var i,r=this.getRelationshipSuggestions(Xe.PARTNERED)[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=new Bt(this.selectedPerson.person,s,Xe.PARTNERED);e.push(o)}}catch(_){a=!0,n=_}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}var l=!0,c=!1,u=void 0;try{for(var d,p=this.getRelationshipSuggestions(Xe.RAISED)[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var h=d.value,m=new Bt(this.selectedPerson.person,h,Xe.RAISED);e.push(m)}}catch(_){c=!0,u=_}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}var g=!0,f=!1,v=void 0;try{for(var y,b=this.getRelationshipSuggestions(Xe.RAISED_BY)[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var w=y.value,k=new Bt(w,this.selectedPerson.person,Xe.RAISED);e.push(k)}}catch(_){f=!0,v=_}finally{try{g||null==b.return||b.return()}finally{if(f)throw v}}return e}},{key:"getRelationshipSuggestions",value:function(e){switch(e){case Xe.PARTNERED:return this.getSuggestedPartners();case Xe.RAISED:return this.getSuggestedDescendants();case Xe.RAISED_BY:return this.getSuggestedAncestors();default:throw new Error("Invalid relationType ".concat(e))}}},{key:"getSuggestedPartners",value:function(){var e=new Array,t=!0,a=!1,n=void 0;try{for(var i,r=this.selectedPerson.descendants[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=!0,l=!1,c=void 0;try{for(var u,d=s.ancestors[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value,h=p.person.id;h===this.selectedPerson.person.id||this.selectedPerson.partnersContain(h)||e.push(p.person)}}catch(m){l=!0,c=m}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}}catch(m){a=!0,n=m}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return e}},{key:"getSuggestedDescendants",value:function(){var e=new Array,t=!0,a=!1,n=void 0;try{for(var i,r=this.selectedPerson.partners[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=!0,l=!1,c=void 0;try{for(var u,d=s.descendants[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value,h=p.person.id;h===this.selectedPerson.person.id||this.selectedPerson.descendantsContain(h)||e.push(p.person)}}catch(m){l=!0,c=m}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}}catch(m){a=!0,n=m}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return e}},{key:"getSuggestedAncestors",value:function(){var e=new Array,t=!0,a=!1,n=void 0;try{for(var i,r=this.selectedPerson.ancestors[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=!0,l=!1,c=void 0;try{for(var u,d=s.partners[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value,h=p.person.id;h===this.selectedPerson.person.id||this.selectedPerson.ancestorsContain(h)||e.push(p.person)}}catch(m){l=!0,c=m}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}}catch(m){a=!0,n=m}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return e}}]),e}(),Gt=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.searchValue="",e.peopleResults=[],e.selectedPerson=null,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"submit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectedPerson){e.next=3;break}return this.$emit("onError"),e.abrupt("return");case 3:return e.prev=3,t=Number(Vd.state.person_id),a={uri:"".concat(he.BaseApiUrl).concat(he.RelationAPI),headers:Vd.getters.ajaxHeader,body:{from_person_id:t,to_person_id:Number(this.selectedPerson.id),relation_type:this.relationType},json:!0},e.next=8,ue["post"](a);case 8:n=e.sent,Vd.dispatch("addRelations",[n]),this.$emit("relationCreated"),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),this.$emit("onError",e.t0);case 16:case"end":return e.stop()}}),e,this,[[3,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){this.predictRelations(),this.selectedPerson=null}},{key:"onChange",value:function(){var e=this;if(this.selectedPerson=null,this.searchValue.length>0){var t=Vd.state.people.filter((function(t){return t.name.toLocaleLowerCase().indexOf(e.searchValue.toLocaleLowerCase())>-1})),a=!0,n=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value;o.small_thumbnail||(o.small_thumbnail="img/portrait_80.png")}}catch(l){n=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}this.peopleResults=t}else this.predictRelations()}},{key:"predictRelations",value:function(){var e=Vd.state.people,t=Vd.state.relations,a=Vd.state.person_id;this.relationPredictor=new Ut(e,t,a),this.peopleResults=this.relationPredictor.getRelationshipSuggestions(this.relationType||1)}},{key:"selectPerson",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedPerson=t;case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:1})],Gt.prototype,"relationType",void 0),Object(d["a"])([Object(p["d"])("searchValue")],Gt.prototype,"onChange",null),Gt=Object(d["a"])([p["a"]],Gt);var Ht=Gt,Wt=Ht,Ft=Object(y["a"])(Wt,Nt,Lt,!1,null,"4cffb01a",null),Yt=Ft.exports,Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"modal",attrs:{centered:"","no-close-on-esc":!0,"no-close-on-backdrop":!0}},[a("template",{slot:"modal-header"},[a("h4",[e._v(e._s(e.$t("message.SuggestedRelations")))])]),a("template",{slot:"default"},e._l(e.relationPredictions,(function(t){return a("div",{key:t.id},[e.selectedId===t.id?a("SuggestedRelative",{ref:"SuggestRelative"+t.id,refInFor:!0,attrs:{relationPrediction:t}}):e._e()],1)})),0),a("template",{slot:"modal-footer"},[a("b-button",{attrs:{size:"lg",variant:"primary"},on:{click:function(t){return e.onYes()}}},[e._v("\n            "+e._s(e.$t("message.Yes"))+"\n        ")]),a("b-button",{attrs:{size:"lg",variant:"primary"},on:{click:function(t){return e.onNo()}}},[e._v("\n            "+e._s(e.$t("message.No"))+"\n        ")])],1),e.busy?a("Loading"):e._e(),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")])],2)},qt=[],Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"image-container"},[a("div",{staticClass:"prediction-image-left"},[a("img",{attrs:{src:e.relationPrediction.fromPersonImage}}),a("div",[a("small",[e._v(e._s(e.relationPrediction.fromPersonName))])])]),a("div",{staticClass:"prediction-image-right"},[a("img",{attrs:{src:e.relationPrediction.toPersonImage}}),a("div",[a("small",[e._v(e._s(e.relationPrediction.toPersonName))])])])]),e.partnered?a("h5",[e._v("\r\n        "+e._s(e.$t("message.AreXandYPartners",e.relationPrediction))+"\r\n    ")]):e._e(),e.raised?a("h5",[e._v("\r\n        "+e._s(e.$t("message.DidXraiseY",e.relationPrediction))+"\r\n    ")]):e._e()])},Qt=[],Jt=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"submit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.relationPrediction){e.next=3;break}return this.$emit("onError"),e.abrupt("return");case 3:return Vd.state.person_id,t={uri:"".concat(he.BaseApiUrl).concat(he.RelationAPI),headers:Vd.getters.ajaxHeader,body:{from_person_id:this.relationPrediction.fromPerson.id,relation_type:this.relationPrediction.relationType,to_person_id:this.relationPrediction.toPerson.id},json:!0},e.next=7,ue["post"](t);case 7:a=e.sent,Vd.dispatch("addRelations",[a]);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){}},{key:"partnered",get:function(){return!!this.relationPrediction&&this.relationPrediction.relationType===Xe.PARTNERED}},{key:"raised",get:function(){return!!this.relationPrediction&&this.relationPrediction.relationType===Xe.RAISED}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:null})],Jt.prototype,"relationPrediction",void 0),Jt=Object(d["a"])([p["a"]],Jt);var Xt=Jt,Zt=Xt,ea=(a("ce78"),Object(y["a"])(Zt,Vt,Qt,!1,null,"3b791be3",null)),ta=ea.exports,aa=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.relationPredictions=[],e.selectedIndex=0,e.busy=!1,e.errorMessage="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"init",value:function(e){this.busy=!0;var t=Vd.state.people,a=Vd.state.relations,n=new Ut(t,a,e);this.relationPredictions=n.getAllRelationshipSuggestions(),this.relationPredictions.length>0&&(this.selectedIndex=0,this.$refs.modal.show()),this.busy=!1}},{key:"mounted",value:function(){}},{key:"onYes",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.busy=!0,this.errorMessage="",t="SuggestRelative"+this.selectedId,e.prev=3,e.next=6,this.$refs[t][0].submit();case 6:this.moveNext(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),this.errorMessage=e.t0.toString();case 12:this.busy=!1;case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onNo",value:function(){this.moveNext()}},{key:"moveNext",value:function(){this.selectedIndex<this.relationPredictions.length-1?this.selectedIndex++:this.$refs.modal.hide()}},{key:"selectedId",get:function(){return this.relationPredictions[this.selectedIndex].id}},{key:"showError",get:function(){return!!(this.errorMessage&&this.errorMessage.length>0)}}]),t}(p["c"]);aa=Object(d["a"])([Object(p["a"])({components:{SuggestedRelative:ta,Loading:w}})],aa);var na=aa,ia=na,ra=Object(y["a"])(ia,Kt,qt,!1,null,"536227ac",null),sa=ra.exports,oa=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.busy=!1,e.showError=!1,e.errorMessage="",e.state="NewPerson",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(){this.$refs.modal.show()}},{key:"setState",value:function(e){this.state=e,"ExistingPerson"===e&&this.$nextTick((function(){var e=document.getElementById("relative-search-box");e&&setTimeout((function(){e.focus(),e.select()}),100)}))}},{key:"handleOk",value:function(e){e.preventDefault(),this.submit()}},{key:"resetModal",value:function(){}},{key:"submit",value:function(){switch(this.showError=!1,this.busy=!0,this.state){case"NewPerson":this.$refs.newRelativeControl.submit();break;case"ExistingPerson":this.$refs.existingRelativeControl.submit();break}}},{key:"onError",value:function(e){e&&(this.showError=!0,this.errorMessage=e),this.busy=!1}},{key:"personCreated",value:function(e){this.busy=!1,this.$refs.modal.hide(),this.$refs.suggestedRelativeModal.init(e.id)}},{key:"relationCreated",value:function(){this.busy=!1,this.$refs.modal.hide()}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:""})],oa.prototype,"title",void 0),Object(d["a"])([Object(p["b"])({default:1})],oa.prototype,"relationType",void 0),oa=Object(d["a"])([Object(p["a"])({components:{NewRelative:Dt,Loading:w,ExistingRelative:Yt,SuggestedRelativeModal:sa}})],oa);var la,ca=oa,ua=ca,da=Object(y["a"])(ua,Ct,Pt,!1,null,"df0e1226",null),pa=da.exports,ha=la=function(e){function t(){var e;Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).call(this)),e.positionStyle={},e.linePositionStyle={},e.relationType=Xe.RAISED_BY;var a=la.HEIGHT,n=la.HEIGHT;return e.positionStyle.width="".concat(n,"px"),e.positionStyle["margin-left"]="".concat(-n/2,"px"),e.positionStyle.height="".concat(a,"px"),e.positionStyle["margin-top"]="".concat(-a-Ge.HEIGHT/2-la.BOTTOM_MARGIN,"px"),e.positionStyle["border-radius"]="".concat(a/2,"px"),e.linePositionStyle.height="".concat(la.BOTTOM_MARGIN+25,"px"),e.linePositionStyle["margin-top"]="".concat(-la.BOTTOM_MARGIN-Ge.HEIGHT/2,"px"),e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"click",value:function(){this.$refs.addRelativeModal.show()}}]),t}(p["c"]);ha.BOTTOM_MARGIN=10,ha.HEIGHT=100,ha=la=Object(d["a"])([Object(p["a"])({components:{AddRelativeModal:pa}})],ha);var ma,ga=ha,fa=ga,va=(a("3cf4"),Object(y["a"])(fa,xt,Ot,!1,null,"174ab571",null)),ya=va.exports,ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-button",{staticClass:"add-relative-control",style:e.positionStyle,attrs:{variant:"outline-primary"},on:{click:e.click}},[a("div",[a("img",{staticClass:"button-image",attrs:{src:"img/portrait_80.png"}})]),a("span",{staticClass:"oi oi-plus",attrs:{"aria-hidden":"true"}}),e._v("\r\n      "+e._s(e.$t("message.AddDescendant"))+"\r\n    ")]),a("div",{staticClass:"vertical-line",style:e.linePositionStyle}),a("AddRelativeModal",{ref:"addRelativeModal",attrs:{title:e.$t("message.AddDescendant"),relationType:e.relationType}})],1)},wa=[],ka=ma=function(e){function t(){var e;Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).call(this)),e.positionStyle={},e.linePositionStyle={},e.relationType=Xe.RAISED;var a=ma.HEIGHT,n=ma.HEIGHT;return e.positionStyle.width="".concat(n,"px"),e.positionStyle["margin-left"]="".concat(-n/2,"px"),e.positionStyle.height="".concat(a,"px"),e.positionStyle["margin-top"]="".concat(Ge.HEIGHT/2+ma.BOTTOM_MARGIN,"px"),e.positionStyle["border-radius"]="".concat(a/2,"px"),e.linePositionStyle.height="".concat(ma.BOTTOM_MARGIN-25,"px"),e.linePositionStyle["margin-top"]="".concat(Ge.HEIGHT/2+25,"px"),e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"click",value:function(){this.$refs.addRelativeModal.show()}}]),t}(p["c"]);ka.BOTTOM_MARGIN=60,ka.HEIGHT=100,ka=ma=Object(d["a"])([Object(p["a"])({components:{AddRelativeModal:pa}})],ka);var _a,ja=ka,xa=ja,Oa=(a("48fd"),Object(y["a"])(xa,ba,wa,!1,null,"ff7eeeec",null)),Ca=Oa.exports,Pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-button",{staticClass:"add-relative-control",style:e.positionStyle,attrs:{variant:"outline-primary"},on:{click:e.click}},[a("div",[a("img",{staticClass:"button-image",attrs:{src:"img/portrait_80.png"}})]),a("span",{staticClass:"oi oi-plus",attrs:{"aria-hidden":"true"}}),e._v("\r\n      "+e._s(e.$t("message.AddPartner"))+"\r\n    ")]),a("div",{staticClass:"horizontal-line",style:e.linePositionStyle}),a("AddRelativeModal",{ref:"addRelativeModal",attrs:{title:e.$t("message.AddPartner"),relationType:e.relationType}})],1)},Ia=[],Sa=_a=function(e){function t(){var e;Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).call(this)),e.positionStyle={},e.linePositionStyle={},e.relationType=Xe.PARTNERED;var a=_a.HEIGHT,n=_a.HEIGHT;return e.positionStyle.width="".concat(n,"px"),e.positionStyle["margin-left"]="".concat(Ge.WIDTH/2+_a.LEFT_MARGIN,"px"),e.positionStyle.height="".concat(a,"px"),e.positionStyle["margin-top"]="".concat(-a/2+25,"px"),e.positionStyle["border-radius"]="".concat(a/2,"px"),e.linePositionStyle.width="".concat(_a.LEFT_MARGIN-14,"px"),e.linePositionStyle["margin-left"]="".concat(Ge.WIDTH/2+14,"px"),e.linePositionStyle["margin-top"]="".concat(25,"px"),e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"click",value:function(){this.$refs.addRelativeModal.show()}}]),t}(p["c"]);Sa.LEFT_MARGIN=10,Sa.HEIGHT=100,Sa=_a=Object(d["a"])([Object(p["a"])({components:{AddRelativeModal:pa}})],Sa);var Ta,Ra=Sa,Ea=Ra,za=(a("650d"),Object(y["a"])(Ea,Pa,Ia,!1,null,"2de7c5b6",null)),Aa=za.exports,Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.deleteAllowed?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.delete-modal",modifiers:{"delete-modal":!0}}],staticClass:"delete-control",style:e.positionStyle,attrs:{title:e.$t("message.Delete"),variant:"danger"}},[a("span",{staticClass:"oi oi-trash",attrs:{"aria-hidden":"true"}})]):e._e(),a("b-modal",{ref:"modal",attrs:{id:"delete-modal",centered:"",okVariant:"danger",title:e.$t("message.Delete"),okTitle:e.$t("message.Delete"),cancelTitle:e.$t("message.Cancel")},on:{ok:e.handleOk}},[a("p",[e._v(" "+e._s(e.$t("message.AreYouSureDelete")))])])],1)},Da=[],Na=Ta=function(e){function t(){var e;Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).call(this)),e.deleteAllowed=!1,e.positionStyle={};var a=Ta.HEIGHT,n=Ta.HEIGHT;return e.positionStyle.width="".concat(n,"px"),e.positionStyle["margin-left"]="".concat(-Ge.WIDTH/2-n-Ta.LEFT_MARGIN,"px"),e.positionStyle.height="".concat(a,"px"),e.positionStyle["margin-top"]="".concat(-a/2+100,"px"),e.positionStyle["border-radius"]="".concat(a/2,"px"),e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"handleOk",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,Vd.commit("updateLoading",!0),t=Vd.state.person_id,a={uri:"".concat(he.BaseApiUrl).concat(he.PersonAPI).concat(t,"/"),headers:Vd.getters.ajaxHeader,json:!0},e.next=6,ue["delete"](a);case 6:return e.next=8,Vd.dispatch("removePerson",t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),Vd.commit("setErrorMessage",e.t0);case 13:Vd.commit("updateLoading",!1),this.$refs.modal.hide();case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Vd.state.person_id,a={uri:"".concat(he.BaseApiUrl).concat(he.PersonAPI).concat(t,"/"),headers:Vd.getters.ajaxHeader,json:!0},e.next=4,ue["get"](a);case 4:n=e.sent,n.user_id||(this.deleteAllowed=!0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Na.LEFT_MARGIN=-25,Na.HEIGHT=60,Na=Ta=Object(d["a"])([p["a"]],Na);var La,$a=Na,Ba=$a,Ua=(a("7d00"),Object(y["a"])(Ba,Ma,Da,!1,null,"e3a35888",null)),Ga=Ua.exports,Ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.hasRelations?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.split-modal",modifiers:{"split-modal":!0}}],staticClass:"split-control",style:e.positionStyle,attrs:{title:e.$t("message.BreakLinks"),variant:"warning"}},[a("span",{staticClass:"oi oi-link-broken",attrs:{"aria-hidden":"true"}})]):e._e(),a("b-modal",{attrs:{id:"split-modal",centered:"","ok-only":"",title:e.$t("message.BreakLinks"),okTitle:e.$t("message.Close")}},[e._l(e.relations,(function(t){return a("SplitRelationItem",{key:t.id,attrs:{splitRelation:t},on:{split:e.split}})})),e.loading?a("Loading"):e._e()],2)],1)},Wa=[],Fa=function(){function e(t){Object(s["a"])(this,e),this.fromPersonName="",this.toPersonName="",this.fromPersonImage="",this.toPersonImage="",this.id=t.id,this.fromPersonId=t.from_person_id.toString(),this.toPersonId=t.to_person_id.toString(),this.relationType=t.relation_type,this.relationName=Xe.NAMES[this.relationType],this.relation=t}return Object(o["a"])(e,[{key:"setFromPerson",value:function(e){this.fromPersonName=e.name,this.fromPersonImage=e.small_thumbnail,this.fromPersonImage||(this.fromPersonImage="img/portrait_80.png")}},{key:"setToPerson",value:function(e){this.toPersonName=e.name,this.toPersonImage=e.small_thumbnail,this.toPersonImage||(this.toPersonImage="img/portrait_80.png")}}],[{key:"createSplitRelations",value:function(t,a,n){var i={},r=!0,s=!1,o=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;i[u.id]=u}}catch(b){s=!0,o=b}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}var d=new Array,p=!0,h=!1,m=void 0;try{for(var g,f=a[Symbol.iterator]();!(p=(g=f.next()).done);p=!0){var v=g.value;if(v.from_person_id===t||v.to_person_id===t){var y=new e(v);y.setFromPerson(i[v.from_person_id]),y.setToPerson(i[v.to_person_id]),d.push(y)}}}catch(b){h=!0,m=b}finally{try{p||null==f.return||f.return()}finally{if(h)throw m}}return d}}]),e}(),Ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row text-center split-rel-row",attrs:{id:"parent_"+e.splitRelation.id}},[a("canvas",{staticClass:"lineCanvas",attrs:{id:"lineCanvas"+e.splitRelation.id}}),a("div",{staticClass:"col split-rel-col"},[a("img",{staticClass:"split-rel-image",attrs:{id:"from_"+e.splitRelation.id,src:e.splitRelation.fromPersonImage}}),a("div",{staticClass:"split-rel-desc"},[e._v("\r\n      "+e._s(e.splitRelation.fromPersonName)+"\r\n    ")])]),a("div",{staticClass:"col split-rel-col"},[a("b-button",{staticClass:"split-button",attrs:{variant:"danger",id:"button_"+e.splitRelation.id},on:{click:e.click}},[a("span",{staticClass:"oi oi-x",attrs:{"aria-hidden":"true"}})]),a("div",{staticClass:"split-rel-desc"},[e._v("\r\n        "+e._s(e.$t(e.splitRelation.relationName))+"\r\n      ")])],1),a("div",{staticClass:"col split-rel-col"},[a("img",{staticClass:"split-rel-image",attrs:{id:"to_"+e.splitRelation.id,src:e.splitRelation.toPersonImage}}),a("div",{staticClass:"split-rel-desc"},[e._v("\r\n        "+e._s(e.splitRelation.toPersonName)+"\r\n      ")])])])},Ka=[],qa=function(){function e(t,a,n,i){Object(s["a"])(this,e),this.start=t,this.end=a,this.strokeStyle=n,this.lineWidth=i}return Object(o["a"])(e,[{key:"draw",value:function(e){e.beginPath(),e.strokeStyle=this.strokeStyle,e.lineWidth=this.lineWidth,e.moveTo(this.start.x,this.start.y),e.lineTo(this.end.x,this.end.y),e.stroke()}}]),e}(),Va=La=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=this;window.setTimeout((function(){return e.drawLines()}),200)}},{key:"drawLines",value:function(){if(this.splitRelation){var e=document.getElementById("lineCanvas"+this.splitRelation.id),t=this.setupCanvas(e),a=document.getElementById("parent_"+this.splitRelation.id).getBoundingClientRect(),n=document.getElementById("from_"+this.splitRelation.id).getBoundingClientRect(),i=(document.getElementById("button_"+this.splitRelation.id).getBoundingClientRect(),document.getElementById("to_"+this.splitRelation.id).getBoundingClientRect()),r=new Be(n.left-a.left+n.width,n.height/2),s=new Be(i.left-a.left,n.height/2),o=new qa(r,s,La.STROKE_STYLE,La.LINE_WIDTH);o.draw(t)}}},{key:"setupCanvas",value:function(e){var t=window.devicePixelRatio||1,a=e.getBoundingClientRect();e.width=a.width*t,e.height=a.height*t;var n=e.getContext("2d");if(!n)throw new Error("No 2d canvas element!");return n.scale(t,t),n}},{key:"click",value:function(){this.$emit("split",this.splitRelation)}}]),t}(p["c"]);Va.STROKE_STYLE="#2e6f9a",Va.LINE_WIDTH=2,Object(d["a"])([Object(p["b"])({default:null})],Va.prototype,"splitRelation",void 0),Va=La=Object(d["a"])([p["a"]],Va);var Qa,Ja=Va,Xa=Ja,Za=(a("2a75"),Object(y["a"])(Xa,Ya,Ka,!1,null,"1cdc4a5b",null)),en=Za.exports,tn=Qa=function(e){function t(){var e;Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).call(this)),e.relations=[],e.loading=!1,e.positionStyle={};var a=Qa.HEIGHT,n=Qa.HEIGHT;return e.positionStyle.width="".concat(n,"px"),e.positionStyle["margin-left"]="".concat(-Ge.WIDTH/2-n-Qa.LEFT_MARGIN,"px"),e.positionStyle.height="".concat(a,"px"),e.positionStyle["margin-top"]="".concat(-a-Ge.HEIGHT/2+50,"px"),e.positionStyle["border-radius"]="".concat(a/2,"px"),e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){this.relations=Fa.createSplitRelations(Number(Vd.state.person_id),Vd.state.relations,Vd.state.people)}},{key:"split",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,a={uri:"".concat(he.BaseApiUrl).concat(he.RelationAPI).concat(t.id,"/"),headers:Vd.getters.ajaxHeader,json:!0},e.next=5,ue["delete"](a);case 5:e.sent,Vd.dispatch("removeRelations",[t.relation]),this.relations=Fa.createSplitRelations(Number(Vd.state.person_id),Vd.state.relations,Vd.state.people),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$emit("onError",e.t0);case 13:this.loading=!1;case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"hasRelations",get:function(){return this.relations.length>0}}]),t}(p["c"]);tn.LEFT_MARGIN=-25,tn.HEIGHT=60,tn=Qa=Object(d["a"])([Object(p["a"])({components:{SplitRelationItem:en,Loading:w}})],tn);var an=tn,nn=an,rn=(a("4946"),Object(y["a"])(nn,Ha,Wa,!1,null,"07a47e0d",null)),sn=rn.exports,on=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.editMode=!1,e.treeCanvasClass="tree-canvas",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"onPeopleChanged",value:function(e,t){t&&t.length>0&&this.initializeTree()}},{key:"onRelationsChanged",value:function(e,t){t&&t.length>0&&this.initializeTree()}},{key:"initializeTree",value:function(){var e=document.getElementById("tree-canvas");if(e.offsetParent&&(this.setCanvasSize(),this.people&&this.relations&&this.people.length>0)){var t=new et(e,this.people,this.relations);if(at.initialize(e,t),t.setDisabled(this.editMode),t.render(),ae.isMobileMenuOpen()&&!ae.is_iOS()){var a=e.getBoundingClientRect().top;this.monitorHeightChange(a)}}}},{key:"mounted",value:function(){var e=this;this.setCanvasSize(),window.addEventListener("resize",(function(){return e.initializeTree()}),!1)}},{key:"onSelectedPersonChange",value:function(e,t){window.console.log("FamilyTree.onSelectedPersonChange()");var a=document.getElementById("tree-canvas");if(a.offsetParent&&a.clientHeight>0){var n=at.tree;if(n&&n.selectedPersonId!==e){n.changeSelectedPerson(e,t);var i=at.getViewBoundary();window.console.log("boundary top: ".concat(i.top,", left: ").concat(i.left,", bottom: ").concat(i.bottom,", right: ").concat(i.right)),window.console.log("selected node x: ".concat(n.selectedNode.x,", y: ").concat(n.selectedNode.y));var r=n.selectedNode;(i.left>r.xMid||i.right<r.xMid||i.top>r.yMid||i.bottom<r.yMid)&&this.initializeTree()}}}},{key:"monitorHeightChange",value:function(e){var t=this,a=document.getElementById("tree-canvas");if(a&&a.offsetParent){var n=a.getBoundingClientRect().top;n+10<e&&this.initializeTree(),ae.isMobileMenuOpen()&&window.setTimeout((function(){return t.monitorHeightChange(n)}),1e3)}}},{key:"zoomIn",value:function(){var e=at.canvas.height/2,t=at.canvas.width/2;at.ctx.translate(-t,-e),at.ctx.scale(1.1,1.1),at.ctx.translate(t,e),at.tree.render()}},{key:"edit",value:function(){var e=this,t=at.tree;at.smoothTranslateAndZoomTo(t.selectedNode.xMid,t.selectedNode.yMid,1),window.setTimeout((function(){e.editMode=!0,t.setDisabled(!0),t.render(!1),e.treeCanvasClass="tree-canvas-disabled"}),300)}},{key:"cancelEdit",value:function(){this.editMode=!1;var e=at.tree;e.setDisabled(!1),e.render(!1),this.treeCanvasClass="tree-canvas"}},{key:"zoomOut",value:function(){var e=at.canvas.height/2,t=at.canvas.width/2;at.ctx.translate(-t,-e),at.ctx.scale(.9,.9),at.ctx.translate(t,e),at.tree.render()}},{key:"setCanvasSize",value:function(){var e=document.getElementById("tree-canvas");if(e.offsetParent){var t=window.innerHeight-e.getBoundingClientRect().top-10;e.style.width="".concat(window.innerWidth,"px"),e.style.height="".concat(t,"px")}}},{key:"people",get:function(){return Vd.state.people}},{key:"relations",get:function(){return Vd.state.relations}},{key:"selectedPersonId",get:function(){return Vd.state.person_id}}]),t}(p["c"]);Object(d["a"])([Object(p["d"])("people",{deep:!0})],on.prototype,"onPeopleChanged",null),Object(d["a"])([Object(p["d"])("relations",{deep:!0})],on.prototype,"onRelationsChanged",null),Object(d["a"])([Object(p["d"])("selectedPersonId")],on.prototype,"onSelectedPersonChange",null),on=Object(d["a"])([Object(p["a"])({components:{TreeNavControls:ct,TreeEditControl:ft,TreeCancelEditControl:jt,AddAncestor:ya,AddDescendant:Ca,AddPartner:Aa,DeletePerson:Ga,SplitRelations:sn}})],on);var ln=on,cn=ln,un=(a("c337"),Object(y["a"])(cn,Ne,Le,!1,null,"337b34d4",null)),dn=un.exports,pn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fullscreen_map",attrs:{id:"person-map"}},[a("b-alert",{staticClass:"map-alert",attrs:{variant:"danger",dismissible:""},on:{dismissed:e.onAlertDismissed},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}},[a("strong",[e._v(e._s(e.alert))])])],1)},hn=[],mn=a("e11e"),gn=a.n(mn),fn=(a("2573"),a("6cc5"),a("8243"),a("3ac1"),function e(t){Object(s["a"])(this,e),this.personId=t}),vn=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.map=null,e.mapSelectedPersonId="",e.alert="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"renderMap",value:function(){var e=this;this.initializeSize();var t=Vd.state.people,n=t.filter((function(e){return 0!==e.longitude&&0!==e.latitude}));this.map&&(this.map.off(),this.map.remove());var i={token:me.MapboxToken,detectRetina:!0,zoomOffset:-1,tileSize:512},r=gn.a.tileLayer(me.MapboxTileAPi,i),s=me.DefaultLocation,o=Vd.getters.selectedPerson;this.mapSelectedPersonId=o.id,0!==o.latitude&&0!==o.longitude?(s=[o.latitude,o.longitude],this.alert=""):this.alert=this.$t("message.LocationForPersonNotSpecified");var l={center:s,zoom:8,zoomControl:!1,minZoom:2,scrollWheelZoom:!0,maxBounds:[[-90,-150],[90,150]],layers:[r]};if(this.map=gn.a.map("person-map",l),delete gn.a.Icon.Default.prototype._getIconUrl,gn.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),this.map.addControl(gn.a.control.zoom({position:"bottomleft"})),this.displayMapPoints(n),this.map.on("popupopen",(function(t){var a=t.popup._source.options.personId;e.mapSelectedPersonId=a,Vd.dispatch("changePerson",a)})),ae.isMobileMenuOpen()&&!ae.is_iOS()){var c=document.getElementById("person-map");this.monitorHeightChange(c.getBoundingClientRect().top)}}},{key:"mounted",value:function(){window.addEventListener("resize",this.initializeSize,!1)}},{key:"centerOnSelectedPerson",value:function(){var e=document.getElementById("person-map");if(e&&e.parentNode&&this.map&&e.clientHeight>0){var t=[53.421458,-2.560874],a=Vd.getters.selectedPerson;this.mapSelectedPersonId!==a.id&&(0!==a.latitude&&0!==a.longitude?(t=[a.latitude,a.longitude],this.alert="",this.map.flyTo(t),this.mapSelectedPersonId=a.id):this.alert=this.$t("message.LocationForPersonNotSpecified")),ae.isMobileMenuOpen()&&!ae.is_iOS()&&this.monitorHeightChange(e.getBoundingClientRect().top)}}},{key:"initializeSize",value:function(){var e=document.getElementById("person-map");if(e.parentNode){var t=window.innerHeight-e.getBoundingClientRect().top-10;e.style.height="".concat(t,"px"),e.style.width="".concat(window.innerWidth-10,"px")}}},{key:"displayMapPoints",value:function(e){var t=gn.a.markerClusterGroup(),a=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value,l=void 0;l=o.small_thumbnail?o.small_thumbnail:"img/portrait_80.png";var c='\n          <div class="map-popup-container">\n            <div class="map-popup-content">\n              <img src="'.concat(l,'" alt="').concat(o.name,'"/>\n              ').concat(o.name,"\n            </div>\n          </div>\n        "),u=new fn(o.id);u.title=o.name;var d=gn.a.marker(new gn.a.LatLng(o.latitude,o.longitude),u);d.bindPopup(c),t.addLayer(d)}}catch(p){n=!0,i=p}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}this.map&&this.map.addLayer(t)}},{key:"onAlertDismissed",value:function(){this.alert=""}},{key:"monitorHeightChange",value:function(e){var t=this,a=document.getElementById("person-map");if(a&&this.map&&a.offsetParent){var n=a.getBoundingClientRect().top;n+10<e&&(this.initializeSize(),this.map.invalidateSize()),ae.isMobileMenuOpen()&&window.setTimeout((function(){return t.monitorHeightChange(n)}),1e3)}}},{key:"showAlert",get:function(){return this.alert.length>0},set:function(e){e||(this.alert="")}},{key:"selectedPersonId",get:function(){return Vd.state.person_id}}]),t}(p["c"]);Object(d["a"])([Object(p["d"])("selectedPersonId")],vn.prototype,"centerOnSelectedPerson",null),vn=Object(d["a"])([Object(p["a"])({components:{}})],vn);var yn=vn,bn=yn,wn=(a("069c"),a("6fe9"),Object(y["a"])(bn,pn,hn,!1,null,"9def60ac",null)),kn=wn.exports,_n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container profile-container"},[a("div",{staticClass:"row"},[e.person?a("div",{staticClass:"col-md-4 photo-column"},[a("img",{attrs:{id:"profile-image",src:e.profileImage,alt:e.person.name}}),e.editMode?e._e():a("ProfileGalleryButton",{attrs:{personId:e.person.id}}),e.editMode?a("b-button",{staticClass:"btn-edit",attrs:{variant:"outline-primary"},on:{click:function(t){return e.uploadNewPhoto()}}},[a("span",{staticClass:"oi oi-data-transfer-upload",attrs:{"aria-hidden":"true"}}),a("small",[e._v(e._s(e.$t("message.UploadNewPhoto")))])]):e._e(),e.isLocked||e.editMode?e._e():a("b-button",{staticClass:"btn-edit",attrs:{variant:"outline-secondary"},on:{click:function(t){return e.edit()}}},[a("span",{staticClass:"oi oi-pencil",attrs:{"aria-hidden":"true"}}),e._v("\n        "+e._s(e.$t("message.Edit"))+" \n      ")]),e.editMode?a("b-button",{staticClass:"btn-edit",attrs:{variant:"outline-success"},on:{click:function(t){return e.finishEdit()}}},[a("span",{staticClass:"oi oi-check",attrs:{"aria-hidden":"true"}}),e._v("\n        "+e._s(e.$t("message.Done"))+" \n      ")]):e._e(),e.editMode?e._e():a("ProfileInviteToJoinButton",{attrs:{personId:e.person.id,yearOfDeath:e.person.year_of_death,personUserId:e.person.user_id,email:e.person.email,language:e.person.language},on:{profileUpdated:e.LoadPersonData}})],1):e._e(),a("div",{staticClass:"col-md-8"},[e.person?a("table",{staticClass:"table table-striped"},[a("tbody",[a("tr",{directives:[{name:"show",rawName:"v-show",value:e.showLockedControl,expression:"showLockedControl"}]},[a("th",[e._v(e._s(e.$t("message.LockedForOtherUsers")))]),a("td",[a("BooleanField",{attrs:{personId:e.person.id,propertyName:"locked",value:e.person.locked},on:{valueUpdated:e.personUpdated}})],1)]),a("tr",[a("th",[e._v(e._s(e.$t("message.Name")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.name))]),e.editMode?a("TextField",{attrs:{personId:e.person.id,propertyName:"name",value:e.person.name,maxFieldLength:50},on:{valueUpdated:e.personUpdated}}):e._e()],1)]),a("tr",[a("th",[e._v(e._s(e.$t("message.Gender")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.gender))]),e.editMode?a("GenderDropDown",{attrs:{personId:e.person.id,value:e.person.gender},on:{valueUpdated:e.personUpdated}}):e._e()],1)]),e.person.birth_year||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.BirthYear")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.birth_year))]),e.editMode?a("NumberField",{attrs:{personId:e.person.id,propertyName:"birth_year",value:e.person.birth_year,maxFieldLength:4},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.year_of_death||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.DeathYear")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.year_of_death))]),e.editMode?a("NumberField",{attrs:{personId:e.person.id,propertyName:"year_of_death",value:e.person.year_of_death,maxFieldLength:4},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.spoken_languages||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.SpokenLanguages")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.spoken_languages))]),e.editMode?a("TextField",{attrs:{personId:e.person.id,propertyName:"spoken_languages",value:e.person.spoken_languages,maxFieldLength:100},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.email&&!e.editMode||e.editMode&&!e.person.user_id?a("tr",[a("th",[e._v(e._s(e.$t("message.Email")))]),a("td",[e.editMode?e._e():a("div",[a("a",{attrs:{href:"mailto:"+e.person.email}},[e._v(e._s(e.person.email))])]),e.editMode?a("EmailField",{attrs:{personId:e.person.id,propertyName:"email",value:e.person.email,maxFieldLength:255},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.occupation||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.Occupation")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.occupation))]),e.editMode?a("TextField",{attrs:{personId:e.person.id,propertyName:"occupation",value:e.person.occupation,maxFieldLength:100},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.telephone_number||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.TelephoneNumber")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.telephone_number))]),e.editMode?a("TextField",{attrs:{personId:e.person.id,propertyName:"telephone_number",value:e.person.telephone_number,maxFieldLength:30},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.address||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.Location")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.address))]),e.editMode?a("TextField",{attrs:{personId:e.person.id,propertyName:"address",value:e.person.address,maxFieldLength:255},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.website||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.Website")))]),a("td",[e.editMode?e._e():a("div",[a("a",{attrs:{href:e.person.website}},[e._v(e._s(e.person.website))])]),e.editMode?a("TextField",{attrs:{personId:e.person.id,propertyName:"website",value:e.person.website,maxFieldLength:100},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.skype_name||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.SkypeName")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.skype_name))]),e.editMode?a("TextField",{attrs:{personId:e.person.id,propertyName:"skype_name",value:e.person.skype_name,maxFieldLength:100},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.facebook||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.Facebook")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.facebook))]),e.editMode?a("TextField",{attrs:{personId:e.person.id,propertyName:"facebook",value:e.person.facebook,maxFieldLength:100},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.twitter||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.Twitter")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.twitter))]),e.editMode?a("TextField",{attrs:{personId:e.person.id,propertyName:"twitter",value:e.person.twitter,maxFieldLength:100},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e(),e.person.linkedin||e.editMode?a("tr",[a("th",[e._v(e._s(e.$t("message.LinkedIn")))]),a("td",[e.editMode?e._e():a("div",[e._v(e._s(e.person.linkedin))]),e.editMode?a("TextField",{attrs:{personId:e.person.id,propertyName:"linkedin",value:e.person.linkedin,maxFieldLength:100},on:{valueUpdated:e.personUpdated}}):e._e()],1)]):e._e()])]):e._e()])]),a("hr"),e.person?a("div",{staticClass:"row"},[a("Biography",{attrs:{personId:e.person.id,biography:e.person.biography,locked:e.isLocked},on:{biographyUpdated:e.personUpdated}})],1):e._e(),a("hr"),a("CoreFamilyMembers",{directives:[{name:"show",rawName:"v-show",value:e.person,expression:"person"}],ref:"coreFamilyMembers"})],1)},jn=[],xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-12"},[a("h4",[e._v("\n      "+e._s(e.$t("message.Biography"))+"\n      "),e.locked||e.editMode?e._e():a("b-button",{staticClass:"btn-edit",attrs:{variant:"outline-secondary"},on:{click:function(t){return e.edit()}}},[a("span",{staticClass:"oi oi-pencil",attrs:{"aria-hidden":"true"}}),e._v("\n        "+e._s(e.$t("message.Edit"))+" \n      ")]),e.editMode?a("b-button",{staticClass:"btn-edit",attrs:{variant:"outline-success"},on:{click:function(t){return e.doneEditing()}}},[a("span",{staticClass:"oi oi-pencil",attrs:{"aria-hidden":"true"}}),e._v("\n        "+e._s(e.$t("message.Done"))+" \n      ")]):e._e()],1),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.editMode,expression:"!editMode"}],staticClass:"biography-paragraph",domProps:{innerHTML:e._s(e.biographyDisplay)}}),a("vue-editor",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}],staticClass:"biography-editor",attrs:{editorToolbar:e.customToolbar},model:{value:e.biographyEdited,callback:function(t){e.biographyEdited=t},expression:"biographyEdited"}})],1)},On=[],Cn=a("5118"),Pn=function e(t,a,n,i){Object(s["a"])(this,e),this.person=t,this.propertyNameUpdated=a,this.newValue=n,this.oldValue=i},In=a("5873"),Sn=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.biographyEdited="",e.customToolbar=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,!1]}],[{font:[]}]],e.editMode=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){}},{key:"edit",value:function(){this.biographyEdited=this.biography,this.editMode=!0}},{key:"onBlur",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doneEditing();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"doneEditing",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.editMode=!1,this.timeOutHandle&&window.clearTimeout(this.timeOutHandle),Vd.commit("updateLoading",!0),e.next=5,this.save();case 5:Vd.commit("updateLoading",!1);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onChange",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.biographyEdited!==this.biography&&(this.timeOutHandle&&window.clearTimeout(this.timeOutHandle),this.timeOutHandle=Object(Cn["setTimeout"])(Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.save();case 2:case"end":return e.stop()}}),e)}))),3e3));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"save",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.biography===this.biographyEdited){e.next=13;break}return e.prev=1,t={uri:"".concat(me.BaseApiUrl).concat(me.PersonAPI).concat(this.personId,"/"),headers:Vd.getters.ajaxHeader,body:{fieldName:"biography",value:this.biographyEdited},json:!0},e.next=5,ue["patch"](t);case 5:a=e.sent,n=new Pn(a,"biography",this.biographyEdited,this.biography),this.$emit("biographyUpdated",n),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),Vd.commit("setErrorMessage",e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"biographyDisplay",get:function(){return this.biography?this.biography:this.$t("message.BiographyNotExist").toString()}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:""})],Sn.prototype,"personId",void 0),Object(d["a"])([Object(p["b"])({default:""})],Sn.prototype,"biography",void 0),Object(d["a"])([Object(p["b"])({default:!1})],Sn.prototype,"locked",void 0),Object(d["a"])([Object(p["d"])("biographyEdited")],Sn.prototype,"onChange",null),Sn=Object(d["a"])([Object(p["a"])({components:{VueEditor:In["a"]}})],Sn);var Tn=Sn,Rn=Tn,En=(a("3d8d"),Object(y["a"])(Rn,xn,On,!1,null,null,null)),zn=En.exports,An=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.displayButton?a("b-button",{staticClass:"btn-profile",attrs:{variant:"outline-secondary"},on:{click:e.inviteClicked}},[a("span",{staticClass:"oi oi-envelope-closed",attrs:{"aria-hidden":"true"}}),e._v("\n  "+e._s(e.$t("message.InviteToJoin"))+"\n\n    "),a("EmailModal",{ref:"emailModal",attrs:{personId:e.personId,email:e.email,language:e.language},on:{profileUpdated:e.profileUpdated}})],1):e._e()},Mn=[],Dn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"emailModalForm",attrs:{title:e.$t("message.InviteToJoin"),centered:"","button-size":"lg"},on:{ok:e.submit,busy:e.busy}},[a("b-form",{on:{submit:e.submit}},[a("label",{attrs:{for:e.email}},[e._v(e._s(e.$t("message.EmailAddress")))]),a("b-form-input",{attrs:{type:"email",placeholder:e.$t("message.EmailAddress"),autocomplete:"off"},model:{value:e.editedEmail,callback:function(t){e.editedEmail=t},expression:"editedEmail"}}),a("b-form-group",{attrs:{label:e.$t("message.LanguageLabel"),"label-for":"language"}},[a("b-form-select",{attrs:{options:e.languageOptions},model:{value:e.editedLanguage,callback:function(t){e.editedLanguage=t},expression:"editedLanguage"}})],1)],1),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n      "+e._s(e.errorMessage)+"\n  ")]),a("Loading",{directives:[{name:"show",rawName:"v-show",value:e.busy,expression:"busy"}]})],1)},Nn=[],Ln=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,null,[{key:"createDropDownOptions",value:function(){var e=new Array;return Object.keys(E).forEach((function(t){var a=t.replace("_","-");e.push(new Tt(a,E[t]))})),e}}]),e}(),$n=(a("3b2b"),function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,null,[{key:"validateEmail",value:function(e){var t=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,a=new RegExp(t);return a.test(e)}}]),e}()),Bn=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.languageOptions=[],e.editedEmail="",e.editedLanguage="en",e.busy=!1,e.errorMessage="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"initialize",value:function(){this.languageOptions=Ln.createDropDownOptions(),this.email&&(this.editedEmail=this.email),this.language&&(this.editedLanguage=this.language),this.$refs.emailModalForm.show()}},{key:"submit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.errorMessage="",this.busy=!0,e.prev=3,$n.validateEmail(this.editedEmail)){e.next=6;break}throw this.$t("message.InvalidEmail").toString();case 6:if(this.email===this.editedEmail){e.next=9;break}return e.next=9,this.updatePersonDetail("email",this.editedEmail);case 9:if(this.language===this.editedLanguage){e.next=12;break}return e.next=12,this.updatePersonDetail("language",this.editedLanguage);case 12:this.$emit("profileUpdated"),this.$refs.emailModalForm.hide(),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](3),this.errorMessage=e.t0.toString();case 19:this.busy=!1;case 20:case"end":return e.stop()}}),e,this,[[3,16]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updatePersonDetail",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={uri:"".concat(he.BaseApiUrl).concat(he.PersonAPI).concat(this.personId,"/"),headers:Vd.getters.ajaxHeader,body:{fieldName:t,value:a},json:!0},e.next=3,ue["patch"](n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"showError",get:function(){return!!(this.errorMessage&&this.errorMessage.length>0)}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:null})],Bn.prototype,"personId",void 0),Object(d["a"])([Object(p["b"])({default:null})],Bn.prototype,"email",void 0),Object(d["a"])([Object(p["b"])({default:null})],Bn.prototype,"language",void 0),Bn=Object(d["a"])([Object(p["a"])({components:{Loading:w}})],Bn);var Un=Bn,Gn=Un,Hn=Object(y["a"])(Gn,Dn,Nn,!1,null,"40e916c0",null),Wn=Hn.exports,Fn=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.displayButton=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"initialize",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.invite_allowed();case 2:this.displayButton=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"profileIsCurrentUser",value:function(){return!!this.personId&&Vd.state.users_person_id===this.personId}},{key:"invite_allowed",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.personId&&!this.profileIsCurrentUser()){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.personUserId&&0===this.yearOfDeath){e.next=6;break}return e.abrupt("return",!1);case 6:return t={uri:"".concat(he.BaseApiUrl).concat(he.InviteEmailAPI).concat(this.personId,"/"),headers:Vd.getters.ajaxHeader,json:!0},e.prev=7,e.next=10,ue["get"](t);case 10:return a=e.sent,this.pendingInvite=a,n=this.email||"",e.abrupt("return",n!==a.email_address);case 16:return e.prev=16,e.t0=e["catch"](7),e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,this,[[7,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"inviteClicked",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.emailModal.initialize();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"profileUpdated",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createInvite();case 2:this.$emit("profileUpdated");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createInvite",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={uri:"".concat(he.BaseApiUrl).concat(he.InviteEmailAPI),headers:Vd.getters.ajaxHeader,body:{person_id:this.personId},json:!0},e.prev=1,Vd.commit("updateLoading",!0),e.next=5,ue["post"](t);case 5:e.sent,this.displayButton=!1,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),Vd.commit("setErrorMessage",e.t0);case 12:Vd.commit("updateLoading",!1);case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:null})],Fn.prototype,"personId",void 0),Object(d["a"])([Object(p["b"])({default:0})],Fn.prototype,"yearOfDeath",void 0),Object(d["a"])([Object(p["b"])({default:null})],Fn.prototype,"personUserId",void 0),Object(d["a"])([Object(p["b"])({default:""})],Fn.prototype,"email",void 0),Object(d["a"])([Object(p["b"])({default:""})],Fn.prototype,"language",void 0),Fn=Object(d["a"])([Object(p["a"])({components:{EmailModal:Wn}})],Fn);var Yn=Fn,Kn=Yn,qn=(a("de06"),Object(y["a"])(Kn,An,Mn,!1,null,"20780f79",null)),Vn=qn.exports,Qn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.displayButton?a("b-button",{staticClass:"btn-profile",attrs:{variant:"primary"},on:{click:e.click}},[a("span",{staticClass:"oi oi-image",attrs:{"aria-hidden":"true"}}),e._v("\n  "+e._s(e.$t("message.Photos"))+"\n")]):e._e()},Jn=[],Xn=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.displayButton=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"initialize",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doesPersonHaveTaggedPictures();case 2:this.displayButton=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"doesPersonHaveTaggedPictures",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.personId){e.next=2;break}return e.abrupt("return",!1);case 2:return t={uri:"".concat(he.BaseApiUrl).concat(he.ImageAPI,"?person_id=").concat(this.personId),headers:Vd.getters.ajaxHeader,json:!0},e.prev=3,e.next=6,ue["get"](t);case 6:return a=e.sent,e.abrupt("return",a.count>0);case 10:return e.prev=10,e.t0=e["catch"](3),Vd.commit("setErrorMessage",e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"click",value:function(){this.$router.push("/person_gallery/?page=1")}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:null})],Xn.prototype,"personId",void 0),Xn=Object(d["a"])([Object(p["a"])({})],Xn);var Zn=Xn,ei=Zn,ti=(a("6618"),Object(y["a"])(ei,Qn,Jn,!1,null,"ddc35452",null)),ai=ti.exports,ni=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.value&&!e.editMode?a("a",{staticClass:"editable-link",attrs:{href:"#"},on:{click:function(t){return e.edit()}}},[e._v("\n    "+e._s(e.value)+"\n  ")]):e._e(),e.value||e.editMode?e._e():a("a",{staticClass:"editable-link",attrs:{href:"#"},on:{click:function(t){return e.edit()}}},[e._v("\n    "+e._s(e.$t("message.ClickToEdit"))+"\n  ")]),a("b-form-input",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}],attrs:{id:e.id,maxlength:e.maxFieldLength},on:{blur:e.onBlur},model:{value:e.valueEdited,callback:function(t){e.valueEdited=t},expression:"valueEdited"}})],1)},ii=[],ri=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,null,[{key:"newGuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,a="x"===e?t:3&t|8;return a.toString(16)}))}}]),e}(),si=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).call(this)),e.valueEdited="",e.editMode=!1,e.id=ri.newGuid(),e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=document.getElementById(this.id);e&&e.addEventListener("keyup",this.onKeyup)}},{key:"onKeyup",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(13!==t.keyCode){e.next=3;break}return e.next=3,this.endEdit();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"edit",value:function(){this.valueEdited=this.value,this.editMode=!0;var e=document.getElementById(this.id);e&&Object(Cn["setTimeout"])((function(){e.focus(),e.select()}),100)}},{key:"onBlur",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.endEdit();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"endEdit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.editMode=!1,Vd.commit("updateLoading",!0),e.next=4,this.save();case 4:Vd.commit("updateLoading",!1);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"save",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.value===this.valueEdited){e.next=13;break}return t={uri:"".concat(me.BaseApiUrl).concat(me.PersonAPI).concat(this.personId,"/"),headers:Vd.getters.ajaxHeader,body:{fieldName:this.propertyName,value:this.valueEdited},json:!0},e.prev=2,e.next=5,ue["patch"](t);case 5:a=e.sent,n=new Pn(a,this.propertyName||"",this.valueEdited,this.value),this.$emit("valueUpdated",n),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),Vd.commit("setErrorMessage",e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:""})],si.prototype,"personId",void 0),Object(d["a"])([Object(p["b"])({default:""})],si.prototype,"propertyName",void 0),Object(d["a"])([Object(p["b"])({default:10})],si.prototype,"maxFieldLength",void 0),Object(d["a"])([Object(p["b"])({default:""})],si.prototype,"value",void 0),si=Object(d["a"])([Object(p["a"])({components:{}})],si);var oi=si,li=oi,ci=(a("928c"),Object(y["a"])(li,ni,ii,!1,null,"6e4855a6",null)),ui=ci.exports,di=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.value&&!e.editMode?a("a",{staticClass:"editable-link",attrs:{href:"#"},on:{click:function(t){return e.edit()}}},[e._v("\n    "+e._s(e.value)+"\n  ")]):e._e(),e.value||e.editMode?e._e():a("a",{staticClass:"editable-link",attrs:{href:"#"},on:{click:function(t){return e.edit()}}},[e._v("\n    "+e._s(e.$t("message.ClickToEdit"))+"\n  ")]),a("b-form-input",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}],attrs:{id:e.id,maxlength:e.maxFieldLength},on:{blur:e.onBlur},model:{value:e.valueEdited,callback:function(t){e.valueEdited=t},expression:"valueEdited"}})],1)},pi=[],hi=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).call(this)),e.valueEdited="",e.editMode=!1,e.id=ri.newGuid(),e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=document.getElementById(this.id);e&&e.addEventListener("keyup",this.onKeyup)}},{key:"onKeyup",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(13!==t.keyCode){e.next=3;break}return e.next=3,this.endEdit();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"edit",value:function(){this.valueEdited=this.value,this.editMode=!0;var e=document.getElementById(this.id);e&&Object(Cn["setTimeout"])((function(){e.focus(),e.select()}),100)}},{key:"onBlur",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.endEdit();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"endEdit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.editMode=!1,Vd.commit("updateLoading",!0),e.next=4,this.save();case 4:Vd.commit("updateLoading",!1);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"save",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.value===this.valueEdited||!this.valueEdited){e.next=15;break}if(t={uri:"".concat(me.BaseApiUrl).concat(me.PersonAPI).concat(this.personId,"/"),headers:Vd.getters.ajaxHeader,body:{fieldName:this.propertyName,value:this.valueEdited},json:!0},e.prev=2,$n.validateEmail(this.valueEdited)){e.next=5;break}throw this.$t("message.InvalidEmail").toString();case 5:return e.next=7,ue["patch"](t);case 7:a=e.sent,n=new Pn(a,this.propertyName||"",this.valueEdited,this.value),this.$emit("valueUpdated",n),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),Vd.commit("setErrorMessage",e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:""})],hi.prototype,"personId",void 0),Object(d["a"])([Object(p["b"])({default:""})],hi.prototype,"propertyName",void 0),Object(d["a"])([Object(p["b"])({default:10})],hi.prototype,"maxFieldLength",void 0),Object(d["a"])([Object(p["b"])({default:""})],hi.prototype,"value",void 0),hi=Object(d["a"])([Object(p["a"])({components:{}})],hi);var mi=hi,gi=mi,fi=(a("446d"),Object(y["a"])(gi,di,pi,!1,null,"e56e1962",null)),vi=fi.exports,yi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[0==e.value||e.editMode?e._e():a("a",{staticClass:"editable-link",attrs:{href:"#"},on:{click:function(t){return e.edit()}}},[e._v("\n    "+e._s(e.value)+"\n  ")]),0!=e.value||e.editMode?e._e():a("a",{staticClass:"editable-link",attrs:{href:"#"},on:{click:function(t){return e.edit()}}},[e._v("\n    "+e._s(e.$t("message.ClickToEdit"))+"\n  ")]),a("b-form-input",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}],attrs:{id:e.id,type:"number"},on:{blur:e.onBlur},model:{value:e.valueEdited,callback:function(t){e.valueEdited=t},expression:"valueEdited"}})],1)},bi=[],wi=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).call(this)),e.valueEdited=0,e.editMode=!1,e.id=ri.newGuid(),e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=document.getElementById(this.id);e&&e.addEventListener("keyup",this.onKeyup)}},{key:"onKeyup",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(13!==t.keyCode){e.next=3;break}return e.next=3,this.endEdit();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"edit",value:function(){this.valueEdited=this.value,this.editMode=!0;var e=document.getElementById(this.id);e&&Object(Cn["setTimeout"])((function(){e.focus(),e.select()}),100)}},{key:"onBlur",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.endEdit();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"endEdit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.editMode=!1,Vd.commit("updateLoading",!0),e.next=4,this.save();case 4:Vd.commit("updateLoading",!1);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"save",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.value===this.valueEdited){e.next=15;break}return t=this.valueEdited,t||(t=0),a={uri:"".concat(me.BaseApiUrl).concat(me.PersonAPI).concat(this.personId,"/"),headers:Vd.getters.ajaxHeader,body:{fieldName:this.propertyName,value:t},json:!0},e.prev=4,e.next=7,ue["patch"](a);case 7:n=e.sent,i=new Pn(n,this.propertyName||"",this.valueEdited,this.value),this.$emit("valueUpdated",i),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](4),Vd.commit("setErrorMessage",e.t0);case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:""})],wi.prototype,"personId",void 0),Object(d["a"])([Object(p["b"])({default:""})],wi.prototype,"propertyName",void 0),Object(d["a"])([Object(p["b"])({default:10})],wi.prototype,"maxFieldLength",void 0),Object(d["a"])([Object(p["b"])({default:0})],wi.prototype,"value",void 0),wi=Object(d["a"])([Object(p["a"])({components:{}})],wi);var ki=wi,_i=ki,ji=(a("6dd0"),Object(y["a"])(_i,yi,bi,!1,null,"f7f77658",null)),xi=ji.exports,Oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{change:e.onChange},model:{value:e.valueEdited,callback:function(t){e.valueEdited=t},expression:"valueEdited"}})],1)},Ci=[],Pi=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.valueEdited=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){this.valueEdited=this.value}},{key:"onChange",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(Cn["setTimeout"])(Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.save();case 2:case"end":return e.stop()}}),e)}))),200);case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"save",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Vd.commit("updateLoading",!0),this.value===this.valueEdited){e.next=14;break}return t={uri:"".concat(me.BaseApiUrl).concat(me.PersonAPI).concat(this.personId,"/"),headers:Vd.getters.ajaxHeader,body:{fieldName:this.propertyName,value:this.valueEdited},json:!0},e.prev=3,e.next=6,ue["patch"](t);case 6:a=e.sent,n=new Pn(a,this.propertyName||"",this.valueEdited,this.value),this.$emit("valueUpdated",n),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),Vd.commit("setErrorMessage",e.t0);case 14:Vd.commit("updateLoading",!1);case 15:case"end":return e.stop()}}),e,this,[[3,11]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:""})],Pi.prototype,"personId",void 0),Object(d["a"])([Object(p["b"])({default:""})],Pi.prototype,"propertyName",void 0),Object(d["a"])([Object(p["b"])({default:!1})],Pi.prototype,"value",void 0),Pi=Object(d["a"])([Object(p["a"])({components:{}})],Pi);var Ii,Si=Pi,Ti=Si,Ri=Object(y["a"])(Ti,Oi,Ci,!1,null,"60a5c020",null),Ei=Ri.exports,zi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.editMode?e._e():a("a",{staticClass:"editable-link",attrs:{href:"#"},on:{click:function(t){return e.edit()}}},[e._v("\n    "+e._s(e.genderDisplayByValue[e.value])+"\n  ")]),e.editMode?a("b-form-select",{attrs:{options:e.options},on:{change:e.onChange},model:{value:e.valueEdited,callback:function(t){e.valueEdited=t},expression:"valueEdited"}}):e._e()],1)},Ai=[],Mi=Ii=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.options=[],e.genderDisplayByValue={},e.valueEdited="",e.editMode=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=new Rt(this);this.genderDisplayByValue=e.localisedGendersByKey,this.options=e.createDropDownOptions()}},{key:"edit",value:function(){this.valueEdited=this.value,this.editMode=!0}},{key:"onChange",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.endEdit();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"endEdit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.editMode=!1,Vd.commit("updateLoading",!0),e.next=4,this.save();case 4:Vd.commit("updateLoading",!1);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"save",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.value===this.valueEdited){e.next=13;break}return t={uri:"".concat(me.BaseApiUrl).concat(me.PersonAPI).concat(this.personId,"/"),headers:Vd.getters.ajaxHeader,body:{fieldName:Ii.propertyName,value:this.valueEdited},json:!0},e.prev=2,e.next=5,ue["patch"](t);case 5:a=e.sent,n=new Pn(a,Ii.propertyName,this.valueEdited,this.value),this.$emit("valueUpdated",n),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),Vd.commit("setErrorMessage",e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Mi.propertyName="gender",Object(d["a"])([Object(p["b"])({default:""})],Mi.prototype,"personId",void 0),Object(d["a"])([Object(p["b"])({default:""})],Mi.prototype,"value",void 0),Mi=Ii=Object(d["a"])([Object(p["a"])({components:{}})],Mi);var Di=Mi,Ni=Di,Li=(a("733c"),Object(y["a"])(Ni,zi,Ai,!1,null,"0a9ef2b6",null)),$i=Li.exports,Bi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"core-family-members-container"},[a("h4",[e._v("\n      "+e._s(e.$t("message.CoreFamilyMembers"))+"\n    ")]),e.showParents?a("h5",{staticClass:"member-separator"},[e._v("\n      "+e._s(e.$t("message.Parents"))+"\n    ")]):e._e(),a("div",{staticClass:"row"},e._l(e.parents,(function(e){return a("CoreFamilyMember",{key:e.id,attrs:{person:e}})})),1),e.showSiblings?a("h5",{staticClass:"member-separator"},[e._v("\n      "+e._s(e.$t("message.Siblings"))+"\n    ")]):e._e(),a("div",{staticClass:"row"},e._l(e.siblings,(function(e){return a("CoreFamilyMember",{key:e.id,attrs:{person:e}})})),1),e.showPartners?a("h5",{staticClass:"member-separator"},[e._v("\n      "+e._s(e.$t("message.Partners"))+"\n    ")]):e._e(),a("div",{staticClass:"row"},e._l(e.partners,(function(e){return a("CoreFamilyMember",{key:e.id,attrs:{person:e}})})),1),e.showChildren?a("h5",{staticClass:"member-separator"},[e._v("\n      "+e._s(e.$t("message.Children"))+"\n    ")]):e._e(),a("div",{staticClass:"row"},e._l(e.children,(function(e){return a("CoreFamilyMember",{key:e.id,attrs:{person:e}})})),1)])},Ui=[],Gi=(a("2fdb"),a("6762"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-lg-3 col-md-4 col-sm-6 col-8 core-family-member",on:{click:e.onClick}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-pixel-width-80"},[a("img",{attrs:{src:e.imageUrl}})]),a("div",{staticClass:"col member-name"},[e._v("\n      "+e._s(e.name)+"\n    ")])])])}),Hi=[],Wi=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onClick",value:function(){this.person&&Vd.dispatch("changePerson",this.person.id)}},{key:"imageUrl",get:function(){return this.person&&this.person.small_thumbnail?this.person.small_thumbnail:"img/portrait_80.png"}},{key:"name",get:function(){return this.person&&this.person.name?this.person.name:""}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])()],Wi.prototype,"person",void 0),Wi=Object(d["a"])([Object(p["a"])({components:{}})],Wi);var Fi=Wi,Yi=Fi,Ki=(a("1bee"),Object(y["a"])(Yi,Gi,Hi,!1,null,"426fce0a",null)),qi=Ki.exports,Vi=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.parents=[],e.siblings=[],e.partners=[],e.children=[],e.personId="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"initialise",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.personId=t,this.parents=[],this.siblings=[],this.partners=[],this.children=[],!this.personId){e.next=13;break}if(Vd.state.people&&0!==Vd.state.people.length){e.next=9;break}return e.next=9,Vd.dispatch("loadTreeData");case 9:a=Vd.state.relations,n=Vd.state.people,i=Number(this.personId),this.buildArrays(n,a,i);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createPersonLookup",value:function(e){var t={},a=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value;t[o.id]=o}}catch(l){n=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return t}},{key:"buildArrays",value:function(e,t,a){var n=this.createPersonLookup(e),i=!0,r=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;if(c.from_person_id===a){var u=n[c.to_person_id.toString()];switch(c.relation_type){case Xe.RAISED:this.children.push(u);break;case Xe.PARTNERED:this.partners.push(u);break}}else if(c.to_person_id===a){var d=n[c.from_person_id.toString()];switch(c.relation_type){case Xe.RAISED:this.parents.push(d);break;case Xe.PARTNERED:this.partners.push(d);break}}}}catch(p){r=!0,s=p}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}this.parents.length>0&&this.buildSiblings(t,a,n)}},{key:"buildSiblings",value:function(e,t,a){var n=[],i=!0,r=!1,s=void 0;try{for(var o,l=this.parents[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;n.push(Number(c.id))}}catch(v){r=!0,s=v}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}var u=!0,d=!1,p=void 0;try{for(var h,m=e[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=h.value;if(g.relation_type===Xe.RAISED&&n.includes(g.from_person_id)&&t!==g.to_person_id){var f=a[g.to_person_id.toString()];this.siblings.includes(f)||this.siblings.push(f)}}}catch(v){d=!0,p=v}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}}},{key:"showParents",get:function(){return this.parents.length>0}},{key:"showSiblings",get:function(){return this.siblings.length>0}},{key:"showPartners",get:function(){return this.partners.length>0}},{key:"showChildren",get:function(){return this.children.length>0}}]),t}(p["c"]);Vi=Object(d["a"])([Object(p["a"])({components:{CoreFamilyMember:qi}})],Vi);var Qi=Vi,Ji=Qi,Xi=(a("fa93"),Object(y["a"])(Ji,Bi,Ui,!1,null,"e9e2d8ec",null)),Zi=Xi.exports,er=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.person=null,e.gender="",e.editMode=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"initialize",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.LoadPersonData();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),Vd.commit("setErrorMessage",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){}},{key:"onSelectedPersonChanged",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=document.getElementById("profile-image"),!(t&&t.parentNode&&t.clientHeight>0)){e.next=4;break}return e.next=4,this.LoadPersonData();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"edit",value:function(){this.editMode=!0}},{key:"finishEdit",value:function(){this.editMode=!1}},{key:"LoadPersonData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.person=null,Vd.commit("updateLoading",!0),t=Vd.state.person_id,a={uri:"".concat(he.BaseApiUrl).concat(he.PersonAPI).concat(t,"/"),headers:Vd.getters.ajaxHeader,json:!0},e.next=6,ue["get"](a);case 6:if(this.person=e.sent,!this.person){e.next=13;break}return n=new Rt(this),this.gender=n.localisedGendersByKey[this.person.gender],this.person.large_thumbnail?this.profileImage=this.person.large_thumbnail:this.profileImage="img/portrait_200.png",e.next=13,this.$refs.coreFamilyMembers.initialise(this.person.id);case 13:Vd.commit("updateLoading",!1),this.editMode=!1;case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"personUpdated",value:function(e){this.person=e.person,Vd.dispatch("updatePerson",e.person)}},{key:"uploadNewPhoto",value:function(){Vd.dispatch("setFilesToUpload",[]),this.$router.push("/new_profile_photo/")}},{key:"selectedPersonId",get:function(){return Vd.state.person_id}},{key:"isLocked",get:function(){return!this.person||!!this.person.locked&&!this.profileIsCurrentUser}},{key:"profileIsCurrentUser",get:function(){return!(!this.person||!Vd.state.users_person_id)&&Number(Vd.state.users_person_id)===Number(this.person.id)}},{key:"showLockedControl",get:function(){return this.editMode&&this.profileIsCurrentUser}}]),t}(p["c"]);Object(d["a"])([Object(p["d"])("selectedPersonId")],er.prototype,"onSelectedPersonChanged",null),er=Object(d["a"])([Object(p["a"])({components:{Biography:zn,ProfileInviteToJoinButton:Vn,ProfileGalleryButton:ai,TextField:ui,EmailField:vi,NumberField:xi,GenderDropDown:$i,BooleanField:Ei,CoreFamilyMembers:Zi}})],er);var tr=er,ar=tr,nr=(a("2c17"),Object(y["a"])(ar,_n,jn,!1,null,"5952deb4",null)),ir=nr.exports,rr=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.state="",e.tabIndex=0,e.tabIndexByState={tree:0,profile:1,map:2},e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return document.body.scrollTop=document.documentElement.scrollTop=0,e.next=3,this.initialize();case 3:document.body.scrollTop=document.documentElement.scrollTop=0,Vd.dispatch("updateRouteLoaded");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"route",value:function(e){this.$router.push("/family/".concat(e,"/").concat(this.personId,"/")),this.state=e}},{key:"onSelectedPersonIdChange",value:function(){this.personId&&this.selectPersonId!==this.personId&&this.$router.push("/family/".concat(this.urlState,"/").concat(this.selectPersonId,"/"))}},{key:"onPersonIdChange",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.personId||this.selectPersonId===this.personId){e.next=3;break}return e.next=3,Vd.dispatch("changePerson",this.personId);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onUrlStateChange",value:function(){if(this.urlState&&this.urlState!==this.state){var e=this.tabIndexByState[this.urlState];this.tabIndex=e,this.state=this.urlState}}},{key:"onStateChange",value:function(){if(Vd.state.people.length>0)switch(this.state){case"tree":var e=this.$refs.tree;this.$nextTick((function(){return e.initializeTree()}));break;case"map":var t=this.$refs.map;this.$nextTick((function(){return t.renderMap()}));break;case"profile":var a=this.$refs.profile;this.$nextTick(Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.initialize();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));break}}},{key:"initialize",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.urlState){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Vd.dispatch("restoreSession");case 5:if(0!==Vd.state.people.length){e.next=8;break}return e.next=8,this.LoadData();case 8:if(this.personId||this.$router.replace("/family/".concat(this.urlState,"/").concat(Vd.state.person_id,"/")),t=this.tabIndexByState[this.urlState],this.tabIndex=t,a=Vd.state.people.filter((function(e){return Number(e.id)===Number(n.personId)})).length>0,!a){e.next=17;break}return e.next=15,Vd.dispatch("changePerson",this.personId);case 15:e.next=18;break;case 17:this.$router.replace("/family/".concat(this.urlState,"/").concat(Vd.state.person_id,"/"));case 18:this.state=this.urlState,e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](2),this.$router.push("/accounts/login/?next=".concat(this.$router.currentRoute.fullPath));case 24:case"end":return e.stop()}}),e,this,[[2,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"LoadData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vd.dispatch("loadTreeData");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),Vd.commit("setErrorMessage",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"selectPersonId",get:function(){return Vd.state.person_id}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:"tree"})],rr.prototype,"urlState",void 0),Object(d["a"])([Object(p["b"])({default:0})],rr.prototype,"personId",void 0),Object(d["a"])([Object(p["d"])("selectPersonId")],rr.prototype,"onSelectedPersonIdChange",null),Object(d["a"])([Object(p["d"])("personId")],rr.prototype,"onPersonIdChange",null),Object(d["a"])([Object(p["d"])("urlState")],rr.prototype,"onUrlStateChange",null),Object(d["a"])([Object(p["d"])("state")],rr.prototype,"onStateChange",null),rr=Object(d["a"])([Object(p["a"])({components:{FamilyTree:dn,FamilyMap:kn,Profile:ir}})],rr);var sr=rr,or=sr,lr=(a("1ae6"),Object(y["a"])(or,Me,De,!1,null,"b03c9fbe",null)),cr=lr.exports,ur=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e.submitted?e._e():a("form",{attrs:{role:"form"},on:{submit:function(t){return t.preventDefault(),e.OnSubmit()}}},[a("h2",[e._v(e._s(e.$t("message.PasswordReset")))]),a("p",[e._v(e._s(e.$t("message.PasswordResetDescription")))]),a("div",{staticClass:"form-group form-password-reset"},[a("label",{attrs:{for:"username"}},[e._v(e._s(e.$t("message.EmailAddress")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"username",name:"username",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v(e._s(e.$t("message.ResetMyPassword")))])],1),e.submitted?a("div",[a("h2",[e._v(e._s(e.$t("message.PasswordResetRequested")))]),a("p",[e._v(e._s(e.$t("message.CheckYourEmailForReset")))])]):e._e()])},dr=[],pr=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.email="",e.submitted=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"OnSubmit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),e.prev=1,document.getElementById("search-box"),t={uri:"".concat(he.BaseApiUrl).concat(he.PasswordResetAPI),body:{email:this.email},json:!0},e.next=6,ue["post"](t);case 6:e.sent,this.submitted=!0,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),Vd.commit("setErrorMessage",e.t0);case 13:Vd.commit("updateLoading",!1);case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);pr=Object(d["a"])([p["a"]],pr);var hr=pr,mr=hr,gr=(a("37ab"),Object(y["a"])(mr,ur,dr,!1,null,"792c70d1",null)),fr=gr.exports,vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("h2",[e._v(e._s(e.$t("message.PasswordResetConfirmation")))]),a("p",[e._v(e._s(e.$t("message.PasswordResetConfirmationDescription")))]),e.submitted?e._e():a("form",{staticClass:"form-password-reset",attrs:{role:"form"},on:{submit:function(t){return t.preventDefault(),e.OnSubmit()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v(e._s(e.$t("message.Password")))]),a("PasswordBox",{model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password2"}},[e._v(e._s(e.$t("message.PasswordConfirmation")))]),a("PasswordBox",{model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPwnedPassword,expression:"isPwnedPassword"}],staticClass:"alert alert-danger"},[a("strong",[e._v(e._s(e.$t("message.PasswordBreach1")))]),a("div",[e._v(e._s(e.$t("message.PasswordBreach2")))]),a("div",[e._v("\n              "+e._s(e.$t("message.ForMoreInformation"))+"\n              "),a("a",{attrs:{href:"https://haveibeenpwned.com/Passwords"}},[e._v("https://haveibeenpwned.com/Passwords")])])]),a("b-button",{staticClass:"submitButton",attrs:{type:"submit",disabled:e.submitDisabled,variant:"primary"}},[e._v("\n          "+e._s(e.$t("message.UpdateMyPassword"))+"\n      ")])],1)])},yr=[],br=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.token="",e.password="",e.password2="",e.isPwnedPassword=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){try{var e;this.token=this.$route.query.token,e=this.$route.query.language?this.$route.query.language:navigator.language,yp.locale=A.match(e)}catch(t){this.$router.push("/accounts/login/")}}},{key:"OnSubmit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),this.isPwnedPassword=!1,e.next=4,ge.getNumberOfPasswordBreaches(this.password);case 4:if(t=e.sent,!(t>0)){e.next=9;break}this.isPwnedPassword=!0,e.next=21;break;case 9:return e.prev=9,document.getElementById("search-box"),a={uri:"".concat(he.BaseApiUrl).concat(he.PasswordResetAPI,"confirm/"),body:{password:this.password,token:this.token},json:!0},e.next=14,ue["post"](a);case 14:e.sent,this.$router.push("/accounts/login/"),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](9),Vd.commit("setErrorMessage",e.t0);case 21:Vd.commit("updateLoading",!1);case 22:case"end":return e.stop()}}),e,this,[[9,18]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"submitDisabled",get:function(){return!this.password||this.password.length<he.MinPasswordLength||this.password!==this.password2}}]),t}(p["c"]);br=Object(d["a"])([Object(p["a"])({components:{PasswordBox:_e}})],br);var wr=br,kr=wr,_r=(a("3e6e"),Object(y["a"])(kr,vr,yr,!1,null,"b8d76d48",null)),jr=_r.exports,xr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:"",justified:""}},[a("b-tab",{attrs:{active:""},on:{click:function(t){return e.userSettingsInit()}}},[a("template",{slot:"title"},[a("span",{staticClass:"oi oi-wrench",attrs:{"aria-hidden":"true"}}),e._v("\r\n                    "+e._s(e.$t("message.UserSettings"))+"\r\n                ")]),a("b-card-text",[a("UserSettings",{ref:"userSettings"})],1)],2),a("b-tab",{on:{click:function(t){return e.changePasswordInit()}}},[a("template",{slot:"title"},[a("span",{staticClass:"oi oi-key",attrs:{"aria-hidden":"true"}}),e._v("\r\n                    "+e._s(e.$t("message.ChangePassword"))+"\r\n                ")]),a("b-card-text",[a("ChangePassword",{ref:"changePassword"})],1)],2),a("b-tab",{on:{click:function(t){return e.leaveInit()}}},[a("template",{slot:"title"},[a("span",{staticClass:"oi oi-warning",attrs:{"aria-hidden":"true"}}),e._v("\r\n                    "+e._s(e.$t("message.LeaveokKindred"))+"\r\n                ")]),a("b-card-text",[a("LeaveSite",{ref:"leaveSite"})],1)],2)],1)],1)],1)},Or=[],Cr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",[e._v(e._s(e.$t("message.UserSettings")))]),a("b-form",[a("b-form-group",{attrs:{label:e.$t("message.LanguageLabel"),"label-for":"language"}},[a("b-form-select",{attrs:{options:e.languageOptions},on:{change:e.onLanguageChange},model:{value:e.userProperties.language,callback:function(t){e.$set(e.userProperties,"language",t)},expression:"userProperties.language"}})],1),a("b-form-group",[a("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{change:e.onChange},model:{value:e.userProperties.receive_update_emails,callback:function(t){e.$set(e.userProperties,"receive_update_emails",t)},expression:"userProperties.receive_update_emails"}},[e._v("\n          "+e._s(e.$t("message.ReceiveFamilyEmailUpdates"))+"\n          ")])],1),a("b-form-group",[a("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{change:e.onChange},model:{value:e.userProperties.receive_photo_update_emails,callback:function(t){e.$set(e.userProperties,"receive_photo_update_emails",t)},expression:"userProperties.receive_photo_update_emails"}},[e._v("\n          "+e._s(e.$t("message.ReceivePhotoTaggingEmailUpdates"))+"\n          ")])],1),a("p",{staticClass:"spinner-container"},[a("b-spinner",{directives:[{name:"show",rawName:"v-show",value:e.saving,expression:"saving"}]}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.saved,expression:"saved"}],staticClass:"saved-message"},[a("span",{staticClass:"oi oi-check",attrs:{"aria-hidden":"true"}}),e._v("\n              "+e._s(e.$t("message.UserSettingsSaved"))+"\n          ")])],1)],1)],1)},Pr=[],Ir=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.userProperties={language:"en",receive_update_emails:!1,receive_photo_update_emails:!1,date_joined:new Date(1900,1,1)},e.languageOptions=[],e.saving=!1,e.saved=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"initialize",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.saving=!1,this.saved=!1,e.next=4,this.loadData();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),e.prev=1,t={uri:"".concat(he.BaseApiUrl).concat(he.UserSettingsAPI),headers:Vd.getters.ajaxHeader,json:!0},e.next=5,ue["get"](t);case 5:this.userProperties=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),Vd.commit("setErrorMessage",e.t0);case 11:Vd.commit("updateLoading",!1);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onLanguageChange",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),e.next=3,this.save();case 3:Vd.dispatch("changeLanguage",this.userProperties.language),Vd.commit("updateLoading",!1);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onChange",value:function(){var e=this;this.timeOutHandle&&window.clearTimeout(this.timeOutHandle),this.timeOutHandle=setTimeout(Object(U["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.save();case 2:case"end":return t.stop()}}),t)}))),1e3)}},{key:"save",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.saving=!0,this.saved=!1,this.userProperties.language,e.prev=3,t={uri:"".concat(he.BaseApiUrl).concat(he.UserSettingsAPI),headers:Vd.getters.ajaxHeader,body:this.userProperties,json:!0},e.next=7,ue["patch"](t);case 7:this.saved=!0,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),Vd.commit("setErrorMessage",e.t0);case 13:this.saving=!1;case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.languageOptions=Ln.createDropDownOptions();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Ir=Object(d["a"])([p["a"]],Ir);var Sr=Ir,Tr=Sr,Rr=(a("03ff"),Object(y["a"])(Tr,Cr,Pr,!1,null,"548a1de6",null)),Er=Rr.exports,zr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("h2",[e._v(e._s(e.$t("message.ChangePassword")))]),a("p",[e._v(e._s(e.$t("message.ChangePasswordDescription")))]),a("form",{staticClass:"form-password-reset",attrs:{role:"form"},on:{submit:function(t){return t.preventDefault(),e.OnSubmit()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"old_password"}},[e._v(e._s(e.$t("message.OldPassword")))]),a("PasswordBox",{model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v(e._s(e.$t("message.NewPassword")))]),a("PasswordBox",{model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password2"}},[e._v(e._s(e.$t("message.PasswordConfirmation")))]),a("PasswordBox",{model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPwnedPassword,expression:"isPwnedPassword"}],staticClass:"alert alert-danger"},[a("strong",[e._v(e._s(e.$t("message.PasswordBreach1")))]),a("div",[e._v(e._s(e.$t("message.PasswordBreach2")))]),a("div",[e._v("\n          "+e._s(e.$t("message.ForMoreInformation"))+"\n          "),a("a",{attrs:{href:"https://haveibeenpwned.com/Passwords"}},[e._v("https://haveibeenpwned.com/Passwords")])])]),a("b-button",{attrs:{type:"submit",disabled:e.submitDisabled,variant:"primary"}},[e._v(e._s(e.$t("message.UpdateMyPassword")))]),a("b-spinner",{directives:[{name:"show",rawName:"v-show",value:e.saving,expression:"saving"}],staticClass:"password-spinner",attrs:{small:""}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.saved,expression:"saved"}],staticClass:"saved-message"},[a("span",{staticClass:"oi oi-check",attrs:{"aria-hidden":"true"}}),e._v("\n          "+e._s(e.$t("message.PasswordUpdated"))+"\n      ")])],1)])},Ar=[],Mr=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.oldPassword="",e.password="",e.password2="",e.isPwnedPassword=!1,e.saving=!1,e.saved=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"OnSubmit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.saving=!0,this.saved=!1,this.isPwnedPassword=!1,e.next=5,ge.getNumberOfPasswordBreaches(this.password);case 5:if(t=e.sent,!(t>0)){e.next=10;break}this.isPwnedPassword=!0,e.next=24;break;case 10:return e.prev=10,document.getElementById("search-box"),a={uri:"".concat(he.BaseApiUrl).concat(he.PasswordChangeAPI),headers:Vd.getters.ajaxHeader,body:{old_password:this.oldPassword,new_password:this.password},json:!0},e.next=15,ue["post"](a);case 15:e.sent,this.saved=!0,e.next=24;break;case 19:e.prev=19,e.t0=e["catch"](10),n=e.t0.toString(),e.t0.toString().includes("Incorrect previous password")&&(n=this.$t("message.IncorrectOldPassword").toString()),Vd.commit("setErrorMessage",n);case 24:this.saving=!1;case 25:case"end":return e.stop()}}),e,this,[[10,19]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"submitDisabled",get:function(){return!!this.saving||(!this.oldPassword||this.oldPassword.length<5||(!this.password||this.password.length<he.MinPasswordLength||this.password!==this.password2))}}]),t}(p["c"]);Mr=Object(d["a"])([Object(p["a"])({components:{PasswordBox:_e}})],Mr);var Dr=Mr,Nr=Dr,Lr=(a("a3ea"),Object(y["a"])(Nr,zr,Ar,!1,null,"73890e6a",null)),$r=Lr.exports,Br=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",[e._v(e._s(e.$t("message.LeaveSite")))]),e.showOptions?a("div",[e.otherUsers?e._e():a("LeaveSiteSingleUser"),e.otherUsers?a("LeaveSiteMultipleUsers",{attrs:{users:e.users}}):e._e()],1):e._e()])},Ur=[],Gr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v(e._s(e.$t("message.LeaveSiteSingleUserDescription")))]),a("b-form",{staticClass:"leave-form",on:{submit:function(t){return t.preventDefault(),e.leaveSite()}}},[a("b-form-group",{attrs:{label:e.$t("message.EnterYourPasswordToConfirm"),"label-for":"password"}},[a("PasswordBox",{model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("b-button",{attrs:{type:"submit",disabled:e.submitDisabled,variant:"danger"}},[e._v("\n          "+e._s(e.$t("message.LeaveSite"))+"\n      ")])],1)],1)},Hr=[],Wr=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.password="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"leaveSite",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),e.prev=1,t={uri:"".concat(he.BaseApiUrl).concat(he.LeaveSiteAPI),headers:Vd.getters.ajaxHeader,body:{password:this.password},json:!0},e.next=5,ue["post"](t);case 5:return e.next=7,this.$store.dispatch("logout");case 7:this.$router.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),Vd.commit("setErrorMessage",e.t0);case 13:Vd.commit("updateLoading",!1);case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"submitDisabled",get:function(){return!this.password||this.password.length<he.MinPasswordLength}}]),t}(p["c"]);Wr=Object(d["a"])([Object(p["a"])({components:{PasswordBox:_e}})],Wr);var Fr=Wr,Yr=Fr,Kr=(a("23bb"),Object(y["a"])(Yr,Gr,Hr,!1,null,"6eb85c0c",null)),qr=Kr.exports,Vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v(e._s(e.$t("message.CurrentUsersAccessToFamilyData")))]),a("ul",e._l(e.users,(function(t){return a("li",{key:t.email},[a("strong",[e._v(e._s(t.name))]),e._v(" \n      "+e._s(t.email)+"\n    ")])})),0),a("p",[e._v(e._s(e.$t("message.LeaveSiteMultipleUsersDescription")))]),a("p",[e._v(e._s(e.$t("message.LeaveSiteMultipleUsersDescription2")))]),a("b-form",{staticClass:"leave-form",on:{submit:function(t){return t.preventDefault(),e.leaveSite()}}},[a("b-form-group",[a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.deleteProfile,callback:function(t){e.deleteProfile=t},expression:"deleteProfile"}},[e._v("\n        "+e._s(e.$t("message.DeleteMyProfile"))+"\n      ")])],1),a("p",[a("strong",[e.deleteProfile?e._e():a("span",[e._v(e._s(e.$t("message.LeaveSiteKeepMyProfile")))]),e.deleteProfile?a("span",[e._v(e._s(e.$t("message.LeaveSiteDeleteMyProfile")))]):e._e()])]),a("b-form-group",{attrs:{label:e.$t("message.EnterYourPasswordToConfirm"),"label-for":"password"}},[a("PasswordBox",{model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("b-button",{attrs:{type:"submit",disabled:e.submitDisabled,variant:"danger"}},[e._v("\n        "+e._s(e.$t("message.LeaveSite"))+"\n      ")])],1)],1)},Qr=[],Jr=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.password="",e.deleteProfile=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"leaveSite",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),e.prev=1,t={uri:"".concat(he.BaseApiUrl).concat(he.LeaveSiteAPI),body:{delete_profile:this.deleteProfile,password:this.password},headers:Vd.getters.ajaxHeader,json:!0},e.next=5,ue["post"](t);case 5:return e.next=7,this.$store.dispatch("logout");case 7:this.$router.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),Vd.commit("setErrorMessage",e.t0);case 13:Vd.commit("updateLoading",!1);case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"submitDisabled",get:function(){return!this.password||this.password.length<he.MinPasswordLength}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:function(){return[]}})],Jr.prototype,"users",void 0),Jr=Object(d["a"])([Object(p["a"])({components:{PasswordBox:_e}})],Jr);var Xr=Jr,Zr=Xr,es=(a("bad2"),Object(y["a"])(Zr,Vr,Qr,!1,null,"e47a213e",null)),ts=es.exports,as=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.email="",e.showOptions=!1,e.users=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"initialize",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.showOptions=!1,Vd.commit("updateLoading",!0),e.prev=2,t={uri:"".concat(he.BaseApiUrl).concat(he.UsersAPI),headers:Vd.getters.ajaxHeader,json:!0},e.next=6,ue["get"](t);case 6:this.users=e.sent,this.showOptions=!0,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),Vd.commit("setErrorMessage",e.t0);case 13:Vd.commit("updateLoading",!1);case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"otherUsers",get:function(){return this.users.length>1}}]),t}(p["c"]);as=Object(d["a"])([Object(p["a"])({components:{LeaveSiteSingleUser:qr,LeaveSiteMultipleUsers:ts}})],as);var ns=as,is=ns,rs=Object(y["a"])(is,Br,Ur,!1,null,"27377ad8",null),ss=rs.exports,os=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.state="usersettings",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"userSettingsInit",value:function(){this.state="usersettings";var e=this.$refs.userSettings;e&&setTimeout(Object(U["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initialize();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),100)}},{key:"changePasswordInit",value:function(){this.state="changePassword"}},{key:"leaveInit",value:function(){this.state="leaveSite";var e=this.$refs.leaveSite;e&&setTimeout(Object(U["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initialize();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),100)}},{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vd.dispatch("restoreSession");case 3:return t=this.$refs.userSettings,e.next=6,t.initialize();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$router.push("/accounts/login/");case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);os=Object(d["a"])([Object(p["a"])({components:{UserSettings:Er,ChangePassword:$r,LeaveSite:ss}})],os);var ls=os,cs=ls,us=Object(y["a"])(cs,xr,Or,!1,null,"48db6b0c",null),ds=us.exports,ps=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container signup-container"},[a("h3",[e._v("\n      "+e._s(e.$t("message.JoinSite"))+" \n  ")]),e.formSubmitted?a("div",[a("p",[e._v(e._s(e.$t("message.ThankYou")))]),a("p",[e._v(e._s(e.$t("message.PleaseCheckEmail",e.form)))])]):e._e(),e.formSubmitted?e._e():a("div",[a("p",[e._v("\n          "+e._s(e.$t("message.JoinSiteDescription"))+"\n      ")]),a("b-form",{ref:"form",on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{label:e.$t("message.Name")+"*","label-for":"name",state:e.form.nameState}},[a("b-form-input",{attrs:{id:"nameInput",state:e.form.nameState,required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("b-form-group",{attrs:{label:e.$t("message.Email")+"*","label-for":"email",state:e.form.emailState}},[a("b-form-input",{attrs:{id:"emailInput",state:e.form.emailState,required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("b-form-group",{attrs:{label:e.$t("message.LanguageLabel")+"*","label-for":"language"}},[a("b-form-select",{attrs:{options:e.languageOptions},model:{value:e.form.language,callback:function(t){e.$set(e.form,"language",t)},expression:"form.language"}})],1),a("b-form-group",{attrs:{label:e.$t("message.Gender")+"*"}},[a("b-form-select",{attrs:{options:e.genderOptions,required:""},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}})],1),a("b-form-group",{attrs:{label:e.$t("message.BirthYear")}},[a("b-form-input",{attrs:{id:"birthYear",type:"number"},model:{value:e.form.birthYear,callback:function(t){e.$set(e.form,"birthYear",t)},expression:"form.birthYear"}})],1),a("b-form-group",{attrs:{label:e.$t("message.Location")}},[a("b-form-input",{model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),a("div",{staticClass:"text-right"},[a("small",{staticClass:"font-italic"},[e._v("* "+e._s(e.$t("message.Required")))])]),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n              "+e._s(e.errorMessage)+" "),a("br"),e._v("\n              "+e._s(e.$t("message.AlreadySignedUp"))+"\n              "),a("router-link",{attrs:{to:"/accounts/login/"}},[e._v(e._s(e.$t("message.Login")))])],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v(e._s(e.$t("message.Confirm")))])],1),a("div",{staticClass:"login"},[a("hr"),e._v("\n          "+e._s(e.$t("message.AlreadySignedUp"))+"\n          "),a("router-link",{attrs:{to:"/accounts/login/"}},[e._v(e._s(e.$t("message.Login")))])],1)],1),a("div",{staticClass:"privacy-policy"},[a("router-link",{attrs:{to:"/privacy_policy/"}},[e._v(e._s(e.$t("message.PrivacyPolicy")))])],1)])},hs=[],ms=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.genderOptions=[],e.languageOptions=[],e.form={name:"",nameState:null,email:"",emailState:null,language:"en",gender:"F",birthYear:"",location:""},e.errorMessage="",e.formSubmitted=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"onSubmit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.errorMessage="",$n.validateEmail(this.form.email)){e.next=5;break}return this.errorMessage=this.$t("message.InvalidEmail").toString(),e.abrupt("return");case 5:return e.prev=5,Vd.commit("updateLoading",!0),a={uri:"".concat(me.BaseApiUrl).concat(me.SignUpAPI),body:{name:this.form.name,email:this.form.email,gender:this.form.gender,birth_year:this.form.birthYear,address:this.form.location,language:this.form.language},json:!0},e.next=10,ue["post"](a);case 10:this.formSubmitted=!0,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](5),e.t0.toString().includes("Email in Use")?this.errorMessage=this.$t("message.EmailInUse").toString():this.errorMessage=e.t0.toString();case 16:Vd.commit("updateLoading",!1);case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){yp.locale=A.match(navigator.language),this.languageOptions=Ln.createDropDownOptions();var e=new Rt(this);this.genderOptions=e.createDropDownOptions()}},{key:"languageChanged",value:function(){yp.locale=A.match(this.form.language);var e=new Rt(this);this.genderOptions=e.createDropDownOptions()}},{key:"showError",get:function(){return this.errorMessage.length>0}}]),t}(p["c"]);Object(d["a"])([Object(p["d"])("form.language")],ms.prototype,"languageChanged",null),ms=Object(d["a"])([p["a"]],ms);var gs=ms,fs=gs,vs=(a("ba2e"),Object(y["a"])(fs,ps,hs,!1,null,"6089faa0",null)),ys=vs.exports,bs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container signup-container"},[a("h3",[e._v("\n      "+e._s(e.$t("message.AccountConfirmation"))+" \n  ")]),a("p",[e._v("\n      "+e._s(e.$t("message.PleaseCreatePassword"))+" \n  ")]),e.hasConfirmationCode?a("form",{staticClass:"form-password-reset",attrs:{role:"form"},on:{submit:function(t){return t.preventDefault(),e.onSubmit()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v(e._s(e.$t("message.Password")))]),a("PasswordBox",{model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"passwordConfirmation"}},[e._v(e._s(e.$t("message.PasswordConfirmation")))]),a("PasswordBox",{model:{value:e.passwordConfirmation,callback:function(t){e.passwordConfirmation=t},expression:"passwordConfirmation"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPwnedPassword,expression:"isPwnedPassword"}],staticClass:"alert alert-danger"},[a("strong",[e._v(e._s(e.$t("message.PasswordBreach1")))]),a("div",[e._v(e._s(e.$t("message.PasswordBreach2")))]),a("div",[e._v("\n          "+e._s(e.$t("message.ForMoreInformation"))+"\n          "),a("a",{attrs:{href:"https://haveibeenpwned.com/Passwords"}},[e._v("https://haveibeenpwned.com/Passwords")])])]),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n          "+e._s(e.errorMessage)+"\n      ")]),a("b-button",{staticClass:"submitButton",attrs:{type:"submit",disabled:e.submitDisabled,variant:"primary"}},[e._v("\n          "+e._s(e.$t("message.Confirm"))+"\n      ")])],1):e._e()])},ws=[],ks=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.password="",e.passwordConfirmation="",e.confirmationToken="",e.isPwnedPassword=!1,e.errorMessage="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"onSubmit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.errorMessage="",this.isPwnedPassword=!1,Vd.commit("updateLoading",!0),e.next=5,ge.getNumberOfPasswordBreaches(this.password);case 5:if(t=e.sent,!(t>0)){e.next=10;break}this.isPwnedPassword=!0,e.next=23;break;case 10:return e.prev=10,a={uri:"".concat(me.BaseApiUrl).concat(me.SignUpAPI).concat(this.confirmationToken,"/"),body:{password:this.password},json:!0},e.next=14,ue["put"](a);case 14:return n=e.sent,e.next=17,this.$store.dispatch("login",{email:n.email,password:this.password});case 17:this.$router.push("/family/tree/"),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](10),this.errorMessage=e.t0.toString();case 23:Vd.commit("updateLoading",!1);case 24:case"end":return e.stop()}}),e,this,[[10,20]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e;this.confirmationToken=this.$route.params.confirmationToken,e=this.$route.query.language?this.$route.query.language:navigator.language,yp.locale=A.match(e),Vd.dispatch("updateRouteLoaded")}},{key:"hasConfirmationCode",get:function(){return this.confirmationToken.length>0}},{key:"submitDisabled",get:function(){return!this.password||this.password.length<me.MinPasswordLength||this.password!==this.passwordConfirmation}},{key:"showError",get:function(){return this.errorMessage.length>0}}]),t}(p["c"]);ks=Object(d["a"])([Object(p["a"])({components:{PasswordBox:_e}})],ks);var _s=ks,js=_s,xs=(a("28bb"),Object(y["a"])(js,bs,ws,!1,null,"0a437735",null)),Os=xs.exports,Cs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("h2",{attrs:{id:"new-profile-photo-header"}},[e._v(e._s(e.$t("message.NewProfilePhoto")))]),a("ChooseFile",{directives:[{name:"show",rawName:"v-show",value:"ChooseFile"===e.state,expression:"state==='ChooseFile'"}],on:{fileSelected:e.fileSelected}}),a("CropFile",{directives:[{name:"show",rawName:"v-show",value:"CropFile"===e.state,expression:"state==='CropFile'"}],ref:"cropFile",on:{back:function(t){return e.chooseFile()},next:e.uploadFile}}),a("ImageUpload",{directives:[{name:"show",rawName:"v-show",value:"ImageUpload"===e.state,expression:"state==='ImageUpload'"}],ref:"imageUpload",on:{done:e.uploadDone,failed:function(t){return e.chooseFile()}}})],1)},Ps=[],Is=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[a("img",{attrs:{src:e.currentPhoto}})]),a("p",[e._v("\n    "+e._s(e.$t("message.UploadNewProfilePhoto",{personName:e.name}))+"\n  ")]),a("button",{staticClass:"btn btn-lg btn-success",on:{click:e.buttonClick}},[a("span",{staticClass:"oi oi-plus",attrs:{"aria-hidden":"true"}}),e._v("\n    "+e._s(e.$t("message.SelectFile"))+"\n    "),a("input",{attrs:{id:"file-input",type:"file",hidden:"",accept:"image/x-png,image/gif,image/jpeg"},on:{change:e.fileSelected}})])])},Ss=[],Ts=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.name="",e.currentPhoto="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Vd.getters.selectedPerson;e?(this.name=e.name,e.small_thumbnail?this.currentPhoto=e.small_thumbnail:this.currentPhoto="img/portrait_80.png"):this.$router.push("/family/tree/")}},{key:"buttonClick",value:function(){if(ae.isXamarinApp()&&ae.isAndroid())window.location.href="/xamarin_external_filepicker/";else{var e=document.getElementById("file-input");e.click()}}},{key:"fileSelected",value:function(e){var t=e.target.files||e.dataTransfer.files;1===t.length&&this.$emit("fileSelected",t[0])}}]),t}(p["c"]);Ts=Object(d["a"])([p["a"]],Ts);var Rs=Ts,Es=Rs,zs=Object(y["a"])(Es,Is,Ss,!1,null,"11a459b9",null),As=zs.exports,Ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("\n    "+e._s(e.$t("message.PleaseTrimImage"))+"\n  ")]),a("div",[a("button",{staticClass:"btn btn-lg btn-danger control-padding",on:{click:e.backClick}},[a("span",{staticClass:"oi oi-arrow-thick-left",attrs:{"aria-hidden":"true"}}),e._v("\n      "+e._s(e.$t("message.Back"))+"\n    ")]),a("button",{staticClass:"btn btn-lg btn-primary control-padding",on:{click:e.rotateAntiClockwise}},[a("span",{staticClass:"oi oi-reload icon-flipped",attrs:{"aria-hidden":"true"}})]),a("button",{staticClass:"btn btn-lg btn-primary control-padding",on:{click:e.rotateClockwise}},[a("span",{staticClass:"oi oi-reload",attrs:{"aria-hidden":"true"}})]),a("button",{staticClass:"btn btn-lg btn-success control-padding",on:{click:e.nextClick}},[a("span",{staticClass:"oi oi-check",attrs:{"aria-hidden":"true"}}),e._v("\n      "+e._s(e.$t("message.Ok"))+"\n    ")])]),a("div",{attrs:{id:"image-container"}},[a("img",{style:e.rotationStyle,attrs:{id:"crop-image"}})]),a("div",{style:e.overlayStyle,attrs:{id:"overlay"}})])},Ds=[],Ns=a("23c7"),Ls=(a("71b6"),function(){function e(t,a,n,i,r){Object(s["a"])(this,e),this.personId=t,this.naturalHeight=a.naturalHeight,this.naturalWidth=a.naturalWidth,this.displayHeight=a.height,this.displayWidth=a.width,this.file=n,this.cropDisplayX=i.x,this.cropDisplayY=i.y,this.cropDisplayWidth=i.w,this.cropDisplayHeight=i.h,this.clockwiseRotation=r}return Object(o["a"])(e,[{key:"cropX",get:function(){return Math.round(this.cropDisplayX*(this.naturalWidth/this.displayWidth))}},{key:"cropY",get:function(){return Math.round(this.cropDisplayY*(this.naturalHeight/this.displayHeight))}},{key:"cropWidth",get:function(){return Math.round(this.cropDisplayWidth*(this.naturalWidth/this.displayWidth))}},{key:"cropHeight",get:function(){return Math.round(this.cropDisplayHeight*(this.naturalHeight/this.displayHeight))}},{key:"antiClockwiseRotation",get:function(){return 360-this.clockwiseRotation}}]),e}()),$s=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).call(this)),e.file=null,e.rotationStyle={},e.overlayStyle={},e.rotation=0,e.fileReader=new FileReader,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"loadFile",value:function(e){this.fileReader.onload=this.fileReaderOnLoad,this.file=e,this.fileReader.readAsDataURL(e)}},{key:"resetRotation",value:function(){this.rotation=0,this.rotationStyle={}}},{key:"mounted",value:function(){}},{key:"fileReaderOnLoad",value:function(e){var t=this,a=document.getElementById("crop-image");a.onload=function(){return t.initialiseJcrop(a)},a.src=e.target.result;var n=window.innerHeight-a.getBoundingClientRect().top-20;a.style.maxHeight="".concat(n,"px")}},{key:"initialiseJcrop",value:function(e){this.setOverlay(e);var t=Math.min(e.width,e.height),a=Ns["a"].Rect.fromPoints([10,10],[.75*t,.75*t]);if(this.jcrop||(this.jcrop=Ns["a"].attach("overlay",{multiMax:1,canRemove:!1})),this.jcrop.active)this.jcrop.active.pos=a,this.jcrop.active.render();else this.jcrop.newWidget(a,{aspectRatio:a.aspect,canRemove:!1});this.refreshJcrop()}},{key:"rotateClockwise",value:function(){this.rotation>=270?this.rotation=0:this.rotation+=90,this.setRotation()}},{key:"rotateAntiClockwise",value:function(){this.rotation<90?this.rotation=270:this.rotation-=90,this.setRotation()}},{key:"nextClick",value:function(){var e=new Ls(Vd.state.person_id,document.getElementById("crop-image"),this.file,this.jcrop.active.pos,this.rotation);this.$emit("next",e)}},{key:"backClick",value:function(){this.resetRotation(),Vd.dispatch("setFilesToUpload",[]),this.$emit("back")}},{key:"setRotation",value:function(){var e=this,t=document.getElementById("crop-image"),a="rotate(".concat(this.rotation,"deg)"),n="0",i="0",r="";switch(this.rotation){case 0:break;case 90:n="".concat(t.height,"px"),r="0 0";break;case 180:break;case 270:i="".concat(t.width,"px"),r="0 0";break}this.rotationStyle={"-webkit-transform":a,"-moz-transform":a,"-o-transform":a,"-ms-transform":a,transform:a,"transform-origin":r,"margin-left":n,"margin-top":i},this.$nextTick((function(){e.setOverlay(t),e.refreshJcrop(),e.$nextTick((function(){return e.moveCropArea()}))}))}},{key:"setOverlay",value:function(e){var t=e.getBoundingClientRect();this.overlayStyle={position:"absolute","z-index":2,top:"".concat(t.top,"px"),left:"".concat(t.left,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")}}},{key:"refreshJcrop",value:function(){var e=this;window.setTimeout((function(){e.jcrop&&e.jcrop.refresh()}),100)}},{key:"moveCropArea",value:function(){var e=document.getElementById("overlay"),t=e.getBoundingClientRect(),a=this.jcrop.active.pos.x+this.jcrop.active.pos.w,n=this.jcrop.active.pos.y+this.jcrop.active.pos.h;if(a>t.width||n>t.height){var i=Math.min(t.width,t.height),r=Ns["a"].Rect.fromPoints([10,10],[.75*i,.75*i]);this.jcrop.active.pos=r,this.jcrop.active.render()}}}]),t}(p["c"]);$s=Object(d["a"])([p["a"]],$s);var Bs=$s,Us=Bs,Gs=(a("7092"),Object(y["a"])(Us,Ms,Ds,!1,null,"7ec227c7",null)),Hs=Gs.exports,Ws=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("\n        "+e._s(e.$t("message.UploadingImagePleaseWait"))+"\n    ")]),a("b-progress",{attrs:{value:e.progress,max:100,height:"2rem","show-progress":"",animated:"",variant:e.variant}}),"pending"===e.state?a("div",{staticClass:"pending"},[e._v("\n        "+e._s(e.$t("message.Pending"))+"\n    ")]):e._e(),"uploading"===e.state?a("div",{staticClass:"uploading"},[e._v("\n        "+e._s(e.$t("message.Uploading"))+"\n    ")]):e._e(),"processing"===e.state?a("div",{staticClass:"processing"},[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}}),e._v("\n        "+e._s(e.$t("message.Processing"))+"\n    ")]):e._e(),"done"===e.state?a("div",{staticClass:"done"},[a("span",{staticClass:"oi oi-check"}),e._v("\n        "+e._s(e.$t("message.Done"))+"\n    ")]):e._e(),"failed"===e.state?a("div",{staticClass:"failed"},[a("span",{staticClass:"oi oi-x"}),e._v("\n        "+e._s(e.$t("message.Failed"))+"\n    ")]):e._e()],1)},Fs=[],Ys=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.progress=3,e.fileSize=0,e.req=new XMLHttpRequest,e.state="uploading",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"upload",value:function(e){Vd.commit("updateLoading",!0),this.state="uploading",this.progress=0,this.fileSize=e.file.size,this.req=new XMLHttpRequest,this.req.responseType="json";var t=new FormData;t.append("picture",e.file),t.append("x",e.cropX.toString()),t.append("y",e.cropY.toString()),t.append("w",e.cropWidth.toString()),t.append("h",e.cropHeight.toString()),t.append("r",e.antiClockwiseRotation.toString()),this.req.onload=this.onLoad,this.req.upload.onprogress=this.updateProgress,this.req.onerror=this.transferFailed,this.req.open("PUT","".concat(me.BaseApiUrl).concat(me.ProfileImageAPI).concat(e.personId,"/")),this.req.setRequestHeader("Authorization","Bearer ".concat(Vd.state.access_token)),this.req.send(t)}},{key:"mounted",value:function(){}},{key:"updateProgress",value:function(e){this.progress=Math.min(100,e.loaded/this.fileSize*100),this.progress>99&&(this.state="processing")}},{key:"onLoad",value:function(e){if(200===this.req.status){this.progress=100;var t=this.req.response;Vd.dispatch("updatePerson",t),Vd.commit("updateLoading",!1),this.$emit("done")}else this.transferFailed(e)}},{key:"transferFailed",value:function(e){Vd.commit("updateLoading",!1),Vd.commit("setErrorMessage",this.req.response),this.$emit("failed")}},{key:"variant",get:function(){switch(this.state){case"failed":return"danger";case"processing":return"warning";case"done":return"success";default:return"default"}}}]),t}(p["c"]);Ys=Object(d["a"])([p["a"]],Ys);var Ks=Ys,qs=Ks,Vs=(a("3989"),Object(y["a"])(qs,Ws,Fs,!1,null,"79249c9c",null)),Qs=Vs.exports,Js=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.state="ChooseFile",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.chooseFile(),Vd.dispatch("updateRouteLoaded");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"chooseFile",value:function(){this.$refs.cropFile.resetRotation(),0===Vd.state.filesToUpload.length?this.setState("ChooseFile"):this.fileSelected(Vd.state.filesToUpload[0])}},{key:"filesUploadedFromApp",value:function(){var e=document.getElementById("new-profile-photo-header");e.offsetParent&&this.appFilesToUpload.length>0&&this.fileSelected(this.appFilesToUpload[0])}},{key:"fileSelected",value:function(e){this.setState("CropFile"),this.$refs.cropFile.loadFile(e)}},{key:"setState",value:function(e){this.state=e}},{key:"uploadFile",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.setState("ImageUpload"),Vd.dispatch("setFilesToUpload",[]),e.next=4,this.$refs.imageUpload.upload(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"uploadDone",value:function(){this.$router.push("/family/tree/")}},{key:"appFilesToUpload",get:function(){return Vd.state.filesToUpload}}]),t}(p["c"]);Object(d["a"])([Object(p["d"])("appFilesToUpload")],Js.prototype,"filesUploadedFromApp",null),Js=Object(d["a"])([Object(p["a"])({components:{ChooseFile:As,CropFile:Hs,ImageUpload:Qs}})],Js);var Xs=Js,Zs=Xs,eo=Object(y["a"])(Zs,Cs,Ps,!1,null,null,null),to=eo.exports,ao=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"gallerylist-container"}},[a("div",{staticClass:"gallery-header"},[a("h1",{staticClass:"gallery-title"},[e._v("\n            "+e._s(e.$t("message.AllGalleries"))+"\n        ")]),a("GalleryListActionButton",{ref:"galleryListActionButton",attrs:{selectedGalleryIds:e.selectedGalleryIds},on:{actionButtonClicked:e.actionButtonClicked,galleriesDeleted:e.galleriesDeleted}})],1),a("div",{attrs:{id:"gallery-container"}},e._l(e.galleryRows,(function(t){return a("GalleryRow",{key:e.galleryRows.indexOf(t),attrs:{galleryRow:t,width:e.galleryWidth,editMode:e.editMode},on:{selectionChanged:e.selectionChanged}})})),1),e.showNoImagesMessage?a("div",{staticClass:"no-images-message"},[e._v("\n        "+e._s(e.$t("message.NoGalleries"))+"\n        "),a("a",{attrs:{href:"#"},on:{click:e.addGallery}},[e._v(e._s(e.$t("message.AddNewGallery")))])]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>1,expression:"totalCount > 1"}],staticClass:"overflow-auto"},[a("b-pagination-nav",{attrs:{align:"center","link-gen":e.linkGen,"number-of-pages":e.numberOfPages,"use-router":""}})],1)])},no=[],io=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gallery-row"},e._l(e.galleryItems,(function(t){return a("GalleryItem",{key:t.id+"_"+t.display_width,attrs:{gallery:t,editMode:e.editMode},on:{selectionChanged:e.selectionChanged}})})),1)},ro=[],so=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gallery-thumb-container",attrs:{to:"/gallery/"+this.gallery.id+"/?page=1"},on:{click:e.click}},[e.hasThumbnail?a("img",{attrs:{src:e.gallery.thumbnail,width:e.gallery.display_width,height:e.gallery.display_height}}):e._e(),e.hasThumbnail?e._e():a("div",{staticClass:"default-gallery-thumbnail",style:{width:e.width,height:e.height}},[a("img",{attrs:{src:"img/gallery/folder.svg",width:e.gallery.display_width/2,height:e.gallery.display_height/2}})]),a("div",{staticClass:"bottom-left",style:{width:e.width}},[e._v(e._s(e.gallery.title))]),e.editMode?a("CheckBox",{ref:"checkBox",staticClass:"top-left",on:{checkboxChanged:e.checkboxChanged}}):e._e()],1)},oo=[],lo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}],staticClass:"oi oi-check tick"})])},co=[],uo=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.checked=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"toggle",value:function(){this.checked=!this.checked,this.$emit("checkboxChanged",this.checked)}}]),t}(p["c"]);uo=Object(d["a"])([p["a"]],uo);var po=uo,ho=po,mo=(a("8c72"),Object(y["a"])(ho,lo,co,!1,null,"56d9a022",null)),go=mo.exports,fo=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"click",value:function(){this.gallery&&(this.editMode?this.$refs.checkBox.toggle():this.$router.push("/gallery/".concat(this.gallery.id,"/?page=1")))}},{key:"checkboxChanged",value:function(e){this.gallery&&this.$emit("selectionChanged",this.gallery.id,e)}},{key:"checked",get:function(){return this.$refs.checkBox.checked}},{key:"hasThumbnail",get:function(){return!(!this.gallery||!this.gallery.thumbnail)}},{key:"width",get:function(){return this.gallery&&this.gallery.display_width?this.gallery.display_width.toString()+"px":"200px"}},{key:"height",get:function(){return this.gallery&&this.gallery.display_height?this.gallery.display_height.toString()+"px":"200px"}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])()],fo.prototype,"gallery",void 0),Object(d["a"])([Object(p["b"])({default:!1})],fo.prototype,"editMode",void 0),fo=Object(d["a"])([Object(p["a"])({components:{CheckBox:go}})],fo);var vo,yo=fo,bo=yo,wo=(a("75e0"),Object(y["a"])(bo,so,oo,!1,null,"4a32abed",null)),ko=wo.exports,_o=vo=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.galleryItems=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"renderGalleryItems",value:function(){if(this.galleryRow&&this.width){var e=this.getHeight(),t=!0,a=!1,n=void 0;try{for(var i,r=this.galleryRow[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=1;s.thumbnail_height>0&&(o=e/s.thumbnail_height),s.display_height=s.thumbnail_height*o,s.display_width=s.thumbnail_width*o}}catch(l){a=!0,n=l}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}this.galleryItems=this.galleryRow}}},{key:"mounted",value:function(){this.renderGalleryItems()}},{key:"getHeight",value:function(){if(!this.galleryRow||!this.width)return vo.DEFAULT_HEIGHT;var e=0,t=!0,a=!1,n=void 0;try{for(var i,r=this.galleryRow[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.thumbnail_height>0&&(e+=s.thumbnail_width/s.thumbnail_height)}}catch(l){a=!0,n=l}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}var o=this.width/e;return Math.min(vo.MAX_HEIGHT,o)}},{key:"selectionChanged",value:function(e,t){this.$emit("selectionChanged",e,t)}}]),t}(p["c"]);_o.DEFAULT_HEIGHT=200,_o.MAX_HEIGHT=300,Object(d["a"])([Object(p["b"])({default:[]})],_o.prototype,"galleryRow",void 0),Object(d["a"])([Object(p["b"])({default:800})],_o.prototype,"width",void 0),Object(d["a"])([Object(p["b"])({default:!1})],_o.prototype,"editMode",void 0),Object(d["a"])([Object(p["d"])("galleryRow")],_o.prototype,"renderGalleryItems",null),_o=vo=Object(d["a"])([Object(p["a"])({components:{GalleryItem:ko}})],_o);var jo=_o,xo=jo,Oo=(a("4d6d"),Object(y["a"])(xo,io,ro,!1,null,"b674a20e",null)),Co=Oo.exports,Po=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"action-button-container"},[a("transition",{attrs:{name:"slide-fade"}},[e.opened?a("b-button",{staticClass:"gallery-list-button add-button",attrs:{variant:"success",title:e.$t("message.CreateNewGallery")},on:{click:e.addGalleryClicked}},[a("sup",[a("small",[a("span",{staticClass:"oi oi-plus"})])]),a("span",{staticClass:"oi oi-folder"})]):e._e()],1),a("transition",{attrs:{name:"slide-fade"}},[e.opened?a("b-button",{staticClass:"gallery-list-button delete-button",attrs:{variant:"danger",title:e.$t("message.Delete"),disabled:!e.deleteEnabled},on:{click:e.deleteClicked}},[a("span",{staticClass:"oi oi-trash"})]):e._e()],1),e.opened?a("b-button",{staticClass:"gallery-list-button close-button",attrs:{variant:"primary",title:e.$t("message.Close")},on:{click:e.menuButtonClicked}},[a("span",{staticClass:"oi oi-x"})]):e._e(),e.opened?e._e():a("b-button",{staticClass:"gallery-list-button action-button",attrs:{variant:"outline-primary",title:e.$t("message.Toolbar")},on:{click:e.menuButtonClicked}},[a("span",{staticClass:"oi oi-menu"})]),a("AddGallery",{ref:"addGallery",on:{galleryCreated:e.galleryCreated}}),a("DeleteGalleries",{ref:"deleteGalleries",on:{galleriesDeleted:e.galleriesDeleted}})],1)},Io=[],So=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"modal",attrs:{centered:"","no-close-on-esc":!0,"no-close-on-backdrop":!0,title:e.$t("message.CreateNewGallery"),okTitle:e.$t("message.Ok"),cancelTitle:e.$t("message.Cancel"),"button-size":"lg"},on:{ok:e.submit,show:e.resetModal,busy:e.busy}},[a("b-form",{ref:"form",on:{submit:e.submit}},[a("b-form-group",{attrs:{label:e.$t("message.Title")+"*","label-for":"title",state:e.form.title}},[a("b-form-input",{attrs:{id:"titleInput",state:e.form.titleState,maxlength:"50",required:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("b-form-group",{attrs:{label:e.$t("message.Description")}},[a("b-form-textarea",{attrs:{rows:"5"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("small",{staticClass:"font-italic"},[e._v("* "+e._s(e.$t("message.Required")))])],1),e.busy?a("Loading"):e._e(),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")])],1)},To=[],Ro=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.form={title:"",description:null},e.busy=!1,e.errorMessage="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(){this.$refs.modal.show()}},{key:"resetModal",value:function(){this.form.title="",this.form.description=""}},{key:"submit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.errorMessage="",a=this.$refs.form.checkValidity(),this.form.nameState=a?"valid":"invalid",a){e.next=7;break}return this.$emit("onError"),e.abrupt("return");case 7:return e.prev=7,this.busy=!0,n={uri:"".concat(me.BaseApiUrl).concat(me.GalleryAPI),headers:Vd.getters.ajaxHeader,body:{title:this.form.title,description:this.form.description},json:!0},e.next=12,ue["post"](n);case 12:i=e.sent,this.$emit("galleryCreated",i),this.$refs.modal.hide(),"GalleryList"===this.$router.currentRoute.name&&this.$router.push("/gallery/".concat(i.id,"/")),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](7),this.errorMessage=e.t0.toString();case 21:this.busy=!1;case 22:case"end":return e.stop()}}),e,this,[[7,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"showError",get:function(){return!!(this.errorMessage&&this.errorMessage.length>0)}}]),t}(p["c"]);Ro=Object(d["a"])([Object(p["a"])({components:{}})],Ro);var Eo=Ro,zo=Eo,Ao=Object(y["a"])(zo,So,To,!1,null,"5a7698a1",null),Mo=Ao.exports,Do=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"modal",attrs:{centered:"","no-close-on-esc":!0,"no-close-on-backdrop":!0,okVariant:"danger",title:e.$t("message.DeleteGalleries"),okTitle:e.$t("message.Delete"),cancelTitle:e.$t("message.Cancel"),"button-size":"lg"},on:{ok:e.submit,busy:e.busy}},[a("p",[e._v("\n        "+e._s(e.$t("message.DeleteGalleriesDesc"))+"\n    ")]),e.busy?a("Loading"):e._e(),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")])],1)},No=[],Lo=(a("5df3"),function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.busy=!1,e.errorMessage="",e.galleryIds=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(e){this.galleryIds=e,this.$refs.modal.show()}},{key:"submit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.preventDefault(),this.busy=!0,e.prev=2,a=new Array,n=!0,i=!1,r=void 0,e.prev=7,s=this.galleryIds[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)l=o.value,a.push(this.deleteGallery(l));e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](7),i=!0,r=e.t0;case 15:e.prev=15,e.prev=16,n||null==s.return||s.return();case 18:if(e.prev=18,!i){e.next=21;break}throw r;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.next=25,Promise.all(a);case 25:this.$refs.modal.hide(),this.$emit("galleriesDeleted"),e.next=32;break;case 29:e.prev=29,e.t1=e["catch"](2),this.errorMessage=e.t1.toString();case 32:this.busy=!1;case 33:case"end":return e.stop()}}),e,this,[[2,29],[7,11,15,23],[16,,18,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteGallery",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={uri:"".concat(me.BaseApiUrl).concat(me.GalleryAPI).concat(t,"/"),headers:Vd.getters.ajaxHeader,json:!0},e.next=3,ue["delete"](a);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"showError",get:function(){return!!(this.errorMessage&&this.errorMessage.length>0)}}]),t}(p["c"]));Lo=Object(d["a"])([Object(p["a"])({components:{Loading:w}})],Lo);var $o=Lo,Bo=$o,Uo=Object(y["a"])(Bo,Do,No,!1,null,"75379a04",null),Go=Uo.exports,Ho=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.opened=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"addGallery",value:function(){this.$refs.addGallery.show()}},{key:"menuButtonClicked",value:function(){this.toggleOpen()}},{key:"toggleOpen",value:function(){this.opened=!this.opened,this.$emit("actionButtonClicked",this.opened)}},{key:"addGalleryClicked",value:function(){this.addGallery()}},{key:"deleteClicked",value:function(){this.selectedGalleryIds&&this.$refs.deleteGalleries.show(this.selectedGalleryIds)}},{key:"galleriesDeleted",value:function(){this.toggleOpen(),this.$emit("galleriesDeleted")}},{key:"galleryCreated",value:function(){this.toggleOpen(),this.$emit("galleryCreated")}},{key:"deleteEnabled",get:function(){return!!this.selectedGalleryIds&&this.selectedGalleryIds.length>0}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:function(){return[]}})],Ho.prototype,"selectedGalleryIds",void 0),Ho=Object(d["a"])([Object(p["a"])({components:{AddGallery:Mo,DeleteGalleries:Go}})],Ho);var Wo=Ho,Fo=Wo,Yo=(a("a2f3"),Object(y["a"])(Fo,Po,Io,!1,null,"34c26583",null)),Ko=Yo.exports,qo=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.showNoImagesMessage=!1,e.scaleFactor=1,e.totalCount=0,e.galleries=[],e.galleryRows=[],e.selectedGalleryIds=[],e.galleryWidth=800,e.editMode=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vd.dispatch("restoreSession");case 3:return e.next=5,this.loadData();case 5:window.addEventListener("resize",this.setDisplaySizes),window.onresize=function(){return t.setDisplaySizes()},Vd.dispatch("updateRouteLoaded"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$router.push("/accounts/login/?next=".concat(this.$router.currentRoute.fullPath));case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"linkGen",value:function(e){return"/gallery/?page=".concat(e)}},{key:"loadData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),e.prev=1,this.showNoImagesMessage=!1,t={uri:"".concat(me.BaseApiUrl).concat(me.GalleryAPI,"?page=").concat(this.page),headers:Vd.getters.ajaxHeader,json:!0},e.next=6,ue["get"](t);case 6:a=e.sent,this.galleries=a.results,this.totalCount=a.count,0===this.totalCount&&(this.showNoImagesMessage=!0),this.setDisplaySizes(),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),Vd.commit("setErrorMessage",e.t0);case 16:Vd.commit("updateLoading",!1);case 17:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setDisplaySizes",value:function(){var e=document.getElementById("gallerylist-container");e.style.minHeight="".concat(window.innerHeight+10,"px");var t=document.getElementById("gallery-container");this.galleryWidth=t.clientWidth-1;var a=1,n=window.devicePixelRatio||1;a=this.portrait?1:.75/n;var i=new Array,r=new Array,s=0,o=!0,l=!1,c=void 0;try{for(var u,d=this.galleries[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value;p.thumbnail||(p.thumbnail_width=200,p.thumbnail_height=200),r.push(p),s+=p.thumbnail_width,s>=this.galleryWidth*a&&(i.push(r),r=new Array,s=0)}}catch(h){l=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}i.push(r);this.galleryRows=i}},{key:"actionButtonClicked",value:function(e){this.selectedGalleryIds=[],this.editMode=e}},{key:"selectionChanged",value:function(e,t){var a=new Array,n=!0,i=!1,r=void 0;try{for(var s,o=this.galleries[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;l.id===e&&(l.selected=t),l.selected&&a.push(l.id)}}catch(c){i=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.selectedGalleryIds=a}},{key:"galleriesDeleted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addGallery",value:function(){this.$refs.galleryListActionButton.addGallery()}},{key:"page",get:function(){return this.$route.query.page?Number(this.$route.query.page):1}},{key:"loading",get:function(){return Vd.getters.loading}},{key:"numberOfPages",get:function(){return Math.max(1,Math.ceil(this.totalCount/me.PaginationPageSize))}},{key:"portrait",get:function(){return window.innerHeight>window.innerWidth}}]),t}(p["c"]);qo.LARGE_SCREEN_SCALE_FACTOR=1.5,Object(d["a"])([Object(p["d"])("page")],qo.prototype,"loadData",null),qo=Object(d["a"])([Object(p["a"])({components:{GalleryRow:Co,GalleryListActionButton:Ko}})],qo);var Vo=qo,Qo=Vo,Jo=(a("aa8e"),Object(y["a"])(Qo,ao,no,!1,null,"475f5714",null)),Xo=Jo.exports,Zo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"gallery-container"}},[a("GalleryHeader",{ref:"galleryHeader",attrs:{galleryId:e.galleryId,selectedImageIds:e.selectedImageIds},on:{editModeChanged:e.editModeChanged,imagesDeleted:e.imagesDeleted}}),a("div",{attrs:{id:"image-container"}},e._l(e.imageRows,(function(t){return a("ImageRow",{key:e.imageRows.indexOf(t),attrs:{rowIndex:e.imageRows.indexOf(t),imageRow:t,width:e.galleryWidth,editMode:e.editMode},on:{selectionChanged:e.selectionChanged,imageClick:e.imageClick}})})),1),e.showNoImagesMessage?a("div",{staticClass:"no-images-message"},[e._v("\n        "+e._s(e.$t("message.NoImagesInGallery"))+"\n        "),a("a",{attrs:{href:"#"},on:{click:e.addImages}},[e._v(e._s(e.$t("message.AddNewImages")))])]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>1,expression:"totalCount > 1"}],staticClass:"overflow-auto"},[a("b-pagination-nav",{attrs:{align:"center","link-gen":e.linkGen,"number-of-pages":e.numberOfPages,"use-router":""}})],1),a("PhotoSwipeView",{ref:"photoSwipeView",on:{imageEdited:e.imageEdited}})],1)},el=[],tl=(a("20d6"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-row"},e._l(e.imageItems,(function(t){return a("ImageItem",{key:t.id+"_"+t.display_width,attrs:{image:t,editMode:e.editMode},on:{selectionChanged:e.selectionChanged,imageClick:e.imageClick}})})),1)}),al=[],nl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-thumb-container",on:{click:e.click}},[a("img",{attrs:{src:e.image.thumbnail,width:e.image.display_width,height:e.image.display_height}}),e.editMode?a("CheckBox",{ref:"checkBox",staticClass:"top-left",on:{checkboxChanged:e.checkboxChanged}}):e._e()],1)},il=[],rl=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"checkboxChanged",value:function(e){this.image&&this.$emit("selectionChanged",this.image.id,e)}},{key:"click",value:function(){this.image&&(this.editMode?this.$refs.checkBox.toggle():this.$emit("imageClick",this.image.id))}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:{}})],rl.prototype,"image",void 0),Object(d["a"])([Object(p["b"])({default:!1})],rl.prototype,"editMode",void 0),rl=Object(d["a"])([Object(p["a"])({components:{CheckBox:go}})],rl);var sl,ol=rl,ll=ol,cl=(a("0175"),Object(y["a"])(ll,nl,il,!1,null,"93893c38",null)),ul=cl.exports,dl=sl=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.imageItems=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"renderGalleryItems",value:function(){if(this.imageRow&&this.width){var e=this.getHeight(),t=!0,a=!1,n=void 0;try{for(var i,r=this.imageRow[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value,o=1;s.thumbnail_height>0&&(o=e/s.thumbnail_height),s.display_height=s.thumbnail_height*o,s.display_width=s.thumbnail_width*o}}catch(l){a=!0,n=l}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}this.imageItems=this.imageRow}}},{key:"mounted",value:function(){this.renderGalleryItems()}},{key:"getHeight",value:function(){if(!this.imageRow||!this.width)return sl.DEFAULT_HEIGHT;var e=0,t=!0,a=!1,n=void 0;try{for(var i,r=this.imageRow[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.thumbnail_height>0&&(e+=s.thumbnail_width/s.thumbnail_height)}}catch(l){a=!0,n=l}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}var o=this.width/e;return Math.min(sl.MAX_HEIGHT,o)}},{key:"selectionChanged",value:function(e,t){this.$emit("selectionChanged",e,t)}},{key:"imageClick",value:function(e){this.$emit("imageClick",e,this.rowIndex)}}]),t}(p["c"]);dl.DEFAULT_HEIGHT=200,dl.MAX_HEIGHT=300,Object(d["a"])([Object(p["b"])({default:[]})],dl.prototype,"imageRow",void 0),Object(d["a"])([Object(p["b"])({default:0})],dl.prototype,"rowIndex",void 0),Object(d["a"])([Object(p["b"])({default:800})],dl.prototype,"width",void 0),Object(d["a"])([Object(p["b"])({default:!1})],dl.prototype,"editMode",void 0),Object(d["a"])([Object(p["d"])("imageRow")],dl.prototype,"renderGalleryItems",null),dl=sl=Object(d["a"])([Object(p["a"])({components:{ImageItem:ul}})],dl);var pl=dl,hl=pl,ml=(a("515a"),Object(y["a"])(hl,tl,al,!1,null,"006715ba",null)),gl=ml.exports,fl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"controls-container"},[a("p",[a("router-link",{attrs:{to:"/gallery/"}},[e._v("\n            "+e._s(e.$t("message.AllGalleries"))+"\n        ")]),e._v("\n        / \n        "),a("router-link",{attrs:{to:"/gallery/"+e.galleryId+"/"}},[e._v("\n            "+e._s(e.title)+"\n        ")]),e._v(" \n        / "+e._s(e.page)+"\n    ")],1),a("div",{staticClass:"title-description"},[a("h1",[a("span",[e._v(e._s(e.title))])]),a("p",[a("span",[e._v(e._s(e.description))])])]),a("GalleryActionButton",{attrs:{gallery:e.gallery,selectedImageIds:e.selectedImageIds},on:{galleryEdited:e.galleryEdited,imagesDeleted:e.imagesDeleted,actionButtonClicked:e.actionButtonClicked}})],1)},vl=[],yl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"modal",attrs:{centered:"","no-close-on-esc":!0,"no-close-on-backdrop":!0,title:e.$t("message.EditGallery"),okTitle:e.$t("message.Ok"),cancelTitle:e.$t("message.Cancel"),"button-size":"lg"},on:{ok:e.submit,busy:e.busy}},[a("b-form",{ref:"form",on:{submit:e.submit}},[a("b-form-group",{attrs:{label:e.$t("message.Title")+"*","label-for":"title",state:e.form.title}},[a("b-form-input",{attrs:{id:"titleInput",state:e.form.titleState,maxlength:"50",required:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("b-form-group",{attrs:{label:e.$t("message.Description")}},[a("b-form-textarea",{attrs:{rows:"5"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("small",{staticClass:"font-italic"},[e._v("* "+e._s(e.$t("message.Required")))])],1),e.busy?a("Loading"):e._e(),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")])],1)},bl=[],wl=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.form={id:0,title:"",description:null},e.busy=!1,e.errorMessage="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(e){this.form.id=e.id,this.form.title=e.title,this.form.description=e.description,this.$refs.modal.show()}},{key:"submit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.errorMessage="",a=this.$refs.form.checkValidity(),this.form.nameState=a?"valid":"invalid",a){e.next=7;break}return this.$emit("onError"),e.abrupt("return");case 7:return e.prev=7,this.busy=!0,n={uri:"".concat(me.BaseApiUrl).concat(me.GalleryAPI).concat(this.form.id,"/"),headers:Vd.getters.ajaxHeader,body:{title:this.form.title,description:this.form.description},json:!0},e.next=12,ue["patch"](n);case 12:i=e.sent,Vd.dispatch("updateCurrentGallery",i),this.$emit("galleryEdited",i),this.$refs.modal.hide(),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](7),this.errorMessage=e.t0.toString();case 21:this.busy=!1;case 22:case"end":return e.stop()}}),e,this,[[7,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"showError",get:function(){return!!(this.errorMessage&&this.errorMessage.length>0)}}]),t}(p["c"]);wl=Object(d["a"])([Object(p["a"])({components:{Loading:w}})],wl);var kl=wl,_l=kl,jl=Object(y["a"])(_l,yl,bl,!1,null,"ba41c608",null),xl=jl.exports,Ol=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gallery-action-container"},[a("transition",{attrs:{name:"slide-fade"}},[e.opened?a("b-button",{staticClass:"gallery-button add-button",attrs:{variant:"success",title:e.$t("message.UploadImages")},on:{click:e.addImagesClicked}},[a("sup",[a("small",[a("span",{staticClass:"oi oi-plus"})])]),a("span",{staticClass:"oi oi-image"})]):e._e()],1),a("transition",{attrs:{name:"slide-fade"}},[e.opened?a("b-button",{staticClass:"gallery-button edit-button",attrs:{variant:"secondary",title:e.$t("message.EditGallery"),disabled:!e.editEnabled},on:{click:e.editClicked}},[a("span",{staticClass:"oi oi-pencil"})]):e._e()],1),a("transition",{attrs:{name:"slide-fade"}},[e.opened?a("b-button",{staticClass:"gallery-button delete-button",attrs:{variant:"danger",title:e.$t("message.DeleteImages"),disabled:!e.deleteEnabled},on:{click:e.deleteClicked}},[a("span",{staticClass:"oi oi-trash"})]):e._e()],1),a("transition",{attrs:{name:"slide-fade"}},[e.opened?a("b-button",{staticClass:"gallery-button map-button",attrs:{variant:"info",title:e.$t("message.Map")},on:{click:e.mapClicked}},[a("span",{staticClass:"oi oi-map"})]):e._e()],1),e.opened?e._e():a("b-button",{staticClass:"gallery-button action-button",attrs:{variant:"outline-primary",title:e.$t("message.Toolbar")},on:{click:e.menuButtonClicked}},[a("span",{staticClass:"oi oi-menu"})]),e.opened?a("b-button",{staticClass:"gallery-button close-button",attrs:{variant:"primary",title:e.$t("message.Close")},on:{click:e.menuButtonClicked}},[a("span",{staticClass:"oi oi-x"})]):e._e(),a("EditGallery",{ref:"editGallery",on:{galleryEdited:e.galleryEdited}}),a("DeleteImages",{ref:"deleteImages",on:{imagesDeleted:e.imagesDeleted}})],1)},Cl=[],Pl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"modal",attrs:{centered:"","no-close-on-esc":!0,"no-close-on-backdrop":!0,okVariant:"danger",title:e.$t("message.DeleteImages"),okTitle:e.$t("message.Delete"),cancelTitle:e.$t("message.Cancel"),"button-size":"lg"},on:{ok:e.submit,busy:e.busy}},[a("p",[e._v("\n        "+e._s(e.$t("message.DeleteImagesDesc"))+"\n    ")]),e.busy?a("Loading"):e._e(),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")])],1)},Il=[],Sl=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.busy=!1,e.errorMessage="",e.imageIds=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(e){this.imageIds=e,this.errorMessage="",this.$refs.modal.show()}},{key:"submit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.preventDefault(),this.busy=!0,e.prev=2,a=new Array,n=!0,i=!1,r=void 0,e.prev=7,s=this.imageIds[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)l=o.value,a.push(this.deleteImage(l));e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](7),i=!0,r=e.t0;case 15:e.prev=15,e.prev=16,n||null==s.return||s.return();case 18:if(e.prev=18,!i){e.next=21;break}throw r;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.next=25,Promise.all(a);case 25:this.$refs.modal.hide(),this.$emit("imagesDeleted"),e.next=32;break;case 29:e.prev=29,e.t1=e["catch"](2),this.errorMessage=e.t1.toString();case 32:this.busy=!1;case 33:case"end":return e.stop()}}),e,this,[[2,29],[7,11,15,23],[16,,18,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteImage",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={uri:"".concat(me.BaseApiUrl).concat(me.ImageAPI).concat(t,"/"),headers:Vd.getters.ajaxHeader,json:!0},e.next=3,ue["delete"](a);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"showError",get:function(){return!!(this.errorMessage&&this.errorMessage.length>0)}}]),t}(p["c"]);Sl=Object(d["a"])([Object(p["a"])({components:{Loading:w}})],Sl);var Tl=Sl,Rl=Tl,El=Object(y["a"])(Rl,Pl,Il,!1,null,"70d3c14c",null),zl=El.exports,Al=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.gallery=null,e.opened=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"addImages",value:function(){this.gallery&&(Vd.dispatch("setFilesToUpload",[]),this.$router.push("/gallery/".concat(this.gallery.id,"/upload/?page=").concat(this.page,"&title=").concat(this.gallery.title)))}},{key:"menuButtonClicked",value:function(){this.toggleOpen()}},{key:"toggleOpen",value:function(){this.opened=!this.opened,this.$emit("actionButtonClicked",this.opened)}},{key:"addImagesClicked",value:function(){this.addImages()}},{key:"deleteClicked",value:function(){this.selectedImageIds&&this.$refs.deleteImages.show(this.selectedImageIds)}},{key:"editClicked",value:function(){this.gallery&&this.$refs.editGallery.show(this.gallery)}},{key:"galleryEdited",value:function(){this.$emit("galleryEdited"),this.toggleOpen()}},{key:"imagesDeleted",value:function(){this.$emit("imagesDeleted"),this.toggleOpen()}},{key:"mapClicked",value:function(){this.gallery&&this.$router.push("/gallery/".concat(this.gallery.id,"/map/"))}},{key:"page",get:function(){return this.$route.query.page?Number(this.$route.query.page):1}},{key:"deleteEnabled",get:function(){return!!this.selectedImageIds&&this.selectedImageIds.length>0}},{key:"editEnabled",get:function(){return!!this.selectedImageIds&&0===this.selectedImageIds.length}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:null})],Al.prototype,"gallery",void 0),Object(d["a"])([Object(p["b"])({default:function(){return[]}})],Al.prototype,"selectedImageIds",void 0),Al=Object(d["a"])([Object(p["a"])({components:{EditGallery:xl,DeleteImages:zl}})],Al);var Ml=Al,Dl=Ml,Nl=(a("3b0e"),Object(y["a"])(Dl,Ol,Cl,!1,null,"bc71af8c",null)),Ll=Nl.exports,$l=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.gallery=null,e.showNoImagesMessage=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"loadGalleryData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,Vd.commit("updateLoading",!0),Vd.state.currentGallery&&Vd.state.currentGallery.id===this.galleryId){e.next=5;break}return e.next=5,Vd.dispatch("loadCurrentGalleryInfo",this.galleryId);case 5:this.gallery=Vd.state.currentGallery,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),Vd.commit("setErrorMessage",e.t0);case 11:Vd.commit("updateLoading",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"actionButtonClicked",value:function(e){this.$emit("editModeChanged",e)}},{key:"editGalleryClicked",value:function(){this.gallery&&this.$refs.editGallery.show(this.gallery)}},{key:"galleryEdited",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadGalleryData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"imagesDeleted",value:function(){this.$emit("imagesDeleted")}},{key:"page",get:function(){return this.$route.query.page?Number(this.$route.query.page):1}},{key:"title",get:function(){return this.gallery?this.gallery.title:""}},{key:"description",get:function(){return this.gallery?this.gallery.description:""}},{key:"loading",get:function(){return Vd.getters.loading}},{key:"watchedProps",get:function(){return"".concat(this.page,"|").concat(this.galleryId)}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:0})],$l.prototype,"galleryId",void 0),Object(d["a"])([Object(p["b"])({default:function(){return[]}})],$l.prototype,"selectedImageIds",void 0),Object(d["a"])([Object(p["d"])("watchedProps")],$l.prototype,"loadGalleryData",null),$l=Object(d["a"])([Object(p["a"])({components:{EditGallery:xl,GalleryActionButton:Ll}})],$l);var Bl=$l,Ul=Bl,Gl=(a("2423"),Object(y["a"])(Ul,fl,vl,!1,null,"c57db3b4",null)),Hl=Gl.exports,Wl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pswp",attrs:{tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"pswp__bg"}),a("div",{staticClass:"pswp__scroll-wrap"},[e._m(0),a("div",{staticClass:"pswp__ui pswp__ui--hidden"},[a("div",{staticClass:"pswp__top-bar"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loadingMore,expression:"!loadingMore"}],staticClass:"pswp__counter"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingMore,expression:"loadingMore"}],staticClass:"loading-more"},[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}})]),a("button",{staticClass:"pswp__button pswp__button--close",attrs:{title:e.$t("message.Close")}}),a("button",{staticClass:"pswp__button pswp__button--download custom-button oi oi-data-transfer-download",attrs:{title:e.$t("message.Download")}}),a("button",{directives:[{name:"show",rawName:"v-show",value:e.displayMap,expression:"displayMap"}],staticClass:"pswp__button pswp__button--map custom-button oi oi-map",attrs:{title:e.$t("message.Map")}}),a("button",{staticClass:"pswp__button pswp__button--editimage custom-button oi oi-pencil",attrs:{title:e.$t("message.EditImage")}}),a("button",{staticClass:"pswp__button pswp__button--tags custom-button oi oi-tag",attrs:{title:e.$t("message.Tags")}}),a("button",{staticClass:"pswp__button pswp__button--fs",attrs:{title:e.$t("message.Fullscreen")}}),e._m(1)]),a("button",{staticClass:"pswp__button pswp__button--arrow--left",attrs:{title:e.$t("message.Previous")}}),a("button",{staticClass:"pswp__button pswp__button--arrow--right",attrs:{title:e.$t("message.Next")}}),e._m(2)])]),a("MapPopUp",{ref:"mapPopUp",on:{onHidden:e.popupHidden}}),a("EditImage",{ref:"editImage",on:{imageEdited:e.imageEdited,onHidden:e.popupHidden}}),a("TaggingOverlay",{ref:"taggingOverlay",on:{taggingOverlayClosed:e.popupHidden}})],1)},Fl=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pswp__container"},[a("div",{staticClass:"pswp__item"}),a("div",{staticClass:"pswp__item"}),a("div",{staticClass:"pswp__item"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pswp__preloader"},[a("div",{staticClass:"pswp__preloader__icn"},[a("div",{staticClass:"pswp__preloader__cut"},[a("div",{staticClass:"pswp__preloader__donut"})])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pswp__caption"},[a("div",{staticClass:"pswp__caption__center"}),a("div",{staticClass:"caption-center"},[a("span",{attrs:{id:"caption-description"}})])])}],Yl=(a("343a"),a("3fb5a"),a("b24f")),Kl=a.n(Yl),ql=function(e,t){var a,n,i,r,s,o,l,c,u,d,p,h,m,g,f,v,y,b,w=this,k=!1,_=!0,j=!0,x={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},O=function(e){if(v)return!0;e=e||window.event,f.timeToIdle&&f.mouseUsed&&!u&&M();for(var a,n,i=e.target||e.srcElement,r=i.getAttribute("class")||"",s=0;s<H.length;s++)a=H[s],a.onTap&&r.indexOf("pswp__"+a.name)>-1&&(a.onTap(),n=!0);if(n){e.stopPropagation&&e.stopPropagation(),v=!0;var o=t.features.isOldAndroid?600:30;setTimeout((function(){v=!1}),o)}},C=function(){return!e.likelyTouchDevice||f.mouseUsed||screen.width>f.fitControlsWidth},P=function(e,a,n){t[(n?"add":"remove")+"Class"](e,"pswp__"+a)},I=function(){var e=1===f.getNumItemsFn();e!==g&&(P(n,"ui--one-slide",e),g=e)},S=function(){P(l,"share-modal--hidden",j)},T=function(){return j=!j,j?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout((function(){j&&S()}),300)):(S(),setTimeout((function(){j||t.addClass(l,"pswp__share-modal--fade-in")}),30)),j||E(),!1},R=function(t){t=t||window.event;var a=t.target||t.srcElement;return e.shout("shareLinkClick",t,a),!!a.href&&(!!a.hasAttribute("download")||(window.open(a.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),j||T(),!1))},E=function(){for(var e,t,a,n,i,r="",s=0;s<f.shareButtons.length;s++)e=f.shareButtons[s],a=f.getImageURLForShare(e),n=f.getPageURLForShare(e),i=f.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(a)).replace("{{raw_image_url}}",a).replace("{{text}}",encodeURIComponent(i)),r+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",f.parseShareButtonOut&&(r=f.parseShareButtonOut(e,r));l.children[0].innerHTML=r,l.children[0].onclick=R},z=function(e){for(var a=0;a<f.closeElClasses.length;a++)if(t.hasClass(e,"pswp__"+f.closeElClasses[a]))return!0},A=0,M=function(){clearTimeout(b),A=0,u&&w.setIdle(!1)},D=function(e){e=e||window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(b),b=setTimeout((function(){w.setIdle(!0)}),f.timeToIdleOutside))},N=function(){f.fullscreenEl&&!t.features.isOldAndroid&&(a||(a=w.getFullscreenAPI()),a?(t.bind(document,a.eventK,w.updateFullscreen),w.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},L=function(){f.preloaderEl&&($(!0),d("beforeChange",(function(){clearTimeout(m),m=setTimeout((function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&$(!1):$(!0)}),f.loadingIndicatorDelay)})),d("imageLoadComplete",(function(t,a){e.currItem===a&&$(!0)})))},$=function(e){h!==e&&(P(p,"preloader--active",!e),h=e)},B=function(e){var a=e.vGap;if(C()){var s=f.barsSize;if(f.captionEl&&"auto"===s.bottom)if(r||(r=t.createEl("pswp__caption pswp__caption--fake"),r.appendChild(t.createEl("pswp__caption__center")),n.insertBefore(r,i),t.addClass(n,"pswp__ui--fit")),f.addCaptionHTMLFn(e,r,!0)){var o=r.clientHeight;a.bottom=parseInt(o,10)||44}else a.bottom=s.top;else a.bottom="auto"===s.bottom?0:s.bottom;a.top=s.top}else a.top=a.bottom=0},U=function(){f.timeToIdle&&d("mouseUsed",(function(){t.bind(document,"mousemove",M),t.bind(document,"mouseout",D),y=setInterval((function(){A++,2===A&&w.setIdle(!0)}),f.timeToIdle/2)}))},G=function(){var e;d("onVerticalDrag",(function(e){_&&e<.95?w.hideControls():!_&&e>=.95&&w.showControls()})),d("onPinchClose",(function(t){_&&t<.9?(w.hideControls(),e=!0):e&&!_&&t>.9&&w.showControls()})),d("zoomGestureEnded",(function(){e=!1,e&&!_&&w.showControls()}))},H=[{name:"caption",option:"captionEl",onInit:function(e){i=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){T()}},{name:"button--share",option:"shareEl",onInit:function(e){o=e},onTap:function(){T()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){s=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){a.isFullscreen()?a.exit():a.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){p=e}},{name:"button--download",option:"downloadEl",onTap:function(){e.shout("download")}},{name:"button--map",option:"mapEl",onTap:function(){e.shout("map")}},{name:"button--editimage",option:"editImageEl",onTap:function(){e.shout("editImage")}},{name:"button--tags",option:"tagsEl",onTap:function(){e.shout("tags")}}],W=function(){var e,a,i,r=function(n){if(n)for(var r=n.length,s=0;s<r;s++){e=n[s],a=e.className;for(var o=0;o<H.length;o++)i=H[o],a.indexOf("pswp__"+i.name)>-1&&(f[i.option]?(t.removeClass(e,"pswp__element--disabled"),i.onInit&&i.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};r(n.children);var s=t.getChildByClass(n,"pswp__top-bar");s&&r(s.children)};w.init=function(){t.extend(e.options,x,!0),f=e.options,n=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,G(),d("beforeChange",w.update),d("doubleTap",(function(t){var a=e.currItem.initialZoomLevel;e.getZoomLevel()!==a?e.zoomTo(a,t,333):e.zoomTo(f.getDoubleTapZoom(!1,e.currItem),t,333)})),d("preventDragEvent",(function(e,t,a){var n=e.target||e.srcElement;n&&n.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(n.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(n.tagName))&&(a.prevent=!1)})),d("bindEvents",(function(){t.bind(n,"pswpTap click",O),t.bind(e.scrollWrap,"pswpTap",w.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",w.onMouseOver)})),d("unbindEvents",(function(){j||T(),y&&clearInterval(y),t.unbind(document,"mouseout",D),t.unbind(document,"mousemove",M),t.unbind(n,"pswpTap click",O),t.unbind(e.scrollWrap,"pswpTap",w.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",w.onMouseOver),a&&(t.unbind(document,a.eventK,w.updateFullscreen),a.isFullscreen()&&(f.hideAnimationDuration=0,a.exit()),a=null)})),d("destroy",(function(){f.captionEl&&(r&&n.removeChild(r),t.removeClass(i,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(n,"pswp__ui--over-close"),t.addClass(n,"pswp__ui--hidden"),w.setIdle(!1)})),f.showAnimationDuration||t.removeClass(n,"pswp__ui--hidden"),d("initialZoomIn",(function(){f.showAnimationDuration&&t.removeClass(n,"pswp__ui--hidden")})),d("initialZoomOut",(function(){t.addClass(n,"pswp__ui--hidden")})),d("parseVerticalMargin",B),W(),f.shareEl&&o&&l&&(j=!0),I(),U(),N(),L()},w.setIdle=function(e){u=e,P(n,"ui--idle",e)},w.update=function(){_&&e.currItem?(w.updateIndexIndicator(),f.captionEl&&(f.addCaptionHTMLFn(e.currItem,i),P(i,"caption--empty",!e.currItem.title)),k=!0):k=!1,j||T(),I()},w.updateFullscreen=function(n){n&&setTimeout((function(){e.setScrollOffset(0,t.getScrollY())}),50),t[(a.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},w.updateIndexIndicator=function(){f.counterEl&&(s.innerHTML=e.getCurrentIndex()+1+f.indexIndicatorSep+f.getNumItemsFn())},w.onGlobalTap=function(a){a=a||window.event;var n=a.target||a.srcElement;if(!v)if(a.detail&&"mouse"===a.detail.pointerType){if(z(n))return void e.close();t.hasClass(n,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?f.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(a.detail.releasePoint))}else if(f.tapToToggleControls&&(_?w.hideControls():w.showControls()),f.tapToClose&&(t.hasClass(n,"pswp__img")||z(n)))return void e.close()},w.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;P(n,"ui--over-close",z(t))},w.hideControls=function(){t.addClass(n,"pswp__ui--hidden"),_=!1},w.showControls=function(){_=!0,k||w.update(),t.removeClass(n,"pswp__ui--hidden")},w.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},w.getFullscreenAPI=function(){var t,a=document.documentElement,n="fullscreenchange";return a.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:a.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:a.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:a.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(c=f.closeOnScroll,f.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return f.closeOnScroll=c,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}},Vl=ql,Ql=function e(t){Object(s["a"])(this,e),this.src=t.large_thumbnail,this.w=t.large_thumbnail_width,this.h=t.large_thumbnail_height,this.msrc=t.thumbnail,this.title=t.title,this.image=t},Jl=function e(){Object(s["a"])(this,e),this.index=0,this.history=!0,this.downloadEl=!0,this.mapEl=!0,this.editImageEl=!0,this.tagsEl=!0},Xl=function(){function e(t,a){Object(s["a"])(this,e);var n=document.querySelectorAll(".pswp")[0],i=new Array,r=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value,p=new Ql(d);i.push(p)}}catch(m){o=!0,l=m}finally{try{r||null==u.return||u.return()}finally{if(o)throw l}}var h=new Jl;h.index=a,h.scaleMode="fit",h.history=!1,this.photoswipe=new Kl.a(n,Vl,i,h),this.photoswipe.init()}return Object(o["a"])(e,[{key:"updateImage",value:function(e){var t=0;for(t=0;t<this.photoswipe.items.length;t++){var a=this.photoswipe.items[t];if(e.id===a.image.id){var n=new Ql(e);return this.photoswipe.items[t]=n,this.photoswipe.invalidateCurrItems(),void this.photoswipe.updateSize(!0)}}}},{key:"loadImagesFromOtherPages",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a,n){var i,r,s,o,l,c,u,d,p,h,m,g,f,v,y,b,w,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.photoswipe){e.next=54;break}if(i=Math.max(1,Math.ceil(a/me.PaginationPageSize)),r=new Array,t<i)for(s=t+1;s<=i;s++)r.push(this.loadImageFromPage(s,n));if(t>1)for(o=1;o<t;o++)r.push(this.loadImageFromPage(o,n));return e.next=8,Promise.all(r);case 8:l=e.sent,c=!0,u=!1,d=void 0,e.prev=12,p=l[Symbol.iterator]();case 14:if(c=(h=p.next()).done){e.next=38;break}for(m=h.value,g=!0,f=!1,v=void 0,e.prev=19,y=m[Symbol.iterator]();!(g=(b=y.next()).done);g=!0)w=b.value,k=new Ql(w),this.photoswipe.items.push(k);e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](19),f=!0,v=e.t0;case 27:e.prev=27,e.prev=28,g||null==y.return||y.return();case 30:if(e.prev=30,!f){e.next=33;break}throw v;case 33:return e.finish(30);case 34:return e.finish(27);case 35:c=!0,e.next=14;break;case 38:e.next=44;break;case 40:e.prev=40,e.t1=e["catch"](12),u=!0,d=e.t1;case 44:e.prev=44,e.prev=45,c||null==p.return||p.return();case 47:if(e.prev=47,!u){e.next=50;break}throw d;case 50:return e.finish(47);case 51:return e.finish(44);case 52:this.photoswipe.invalidateCurrItems(),this.photoswipe.updateSize(!0);case 54:e.next=59;break;case 56:e.prev=56,e.t2=e["catch"](0),Vd.commit("setErrorMessage",e.t2);case 59:case"end":return e.stop()}}),e,this,[[0,56],[12,40,44,52],[19,23,27,35],[28,,30,34],[45,,47,51]])})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"loadImageFromPage",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){var n,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={uri:a(t),headers:Vd.getters.ajaxHeader,json:!0},e.next=3,ue["get"](n);case 3:return i=e.sent,r=i.results,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()}]),e}(),Zl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"modal",staticClass:"super-modal",attrs:{"button-size":"lg","hide-footer":"","hide-header":""},on:{hidden:e.onHidden}},[a("div",[a("span",{staticClass:"oi oi-x top-corner",on:{click:e.closeClicked}}),a("div",{style:e.mapDivStyle,attrs:{id:"map-div"}})])])},ec=[],tc=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.mapDivStyle={position:"relative",width:"100%",height:"100px"},e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(e){var t=this;this.mapDivStyle.height="".concat(window.innerHeight/2,"px"),this.$refs.modal.show(),this.$nextTick((function(){return t.renderMap(e)}))}},{key:"renderMap",value:function(e){var t={token:me.MapboxToken,detectRetina:!0,zoomOffset:-1,tileSize:512},n=gn.a.tileLayer(me.MapboxTileAPi,t),i={center:e,zoom:14,zoomControl:!1,minZoom:2,scrollWheelZoom:!0,maxBounds:[[-90,-150],[90,150]],layers:[n]},r=gn.a.map("map-div",i);delete gn.a.Icon.Default.prototype._getIconUrl,gn.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),r.addControl(gn.a.control.zoom({position:"bottomleft"})),gn.a.marker(e).addTo(r),window.setTimeout((function(){return r.invalidateSize()}),100)}},{key:"closeClicked",value:function(){this.$refs.modal.hide()}},{key:"onHidden",value:function(){this.$emit("onHidden")}}]),t}(p["c"]);tc=Object(d["a"])([Object(p["a"])({components:{}})],tc);var ac=tc,nc=ac,ic=(a("5d9f"),Object(y["a"])(nc,Zl,ec,!1,null,"506c51ac",null)),rc=ic.exports,sc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"editImageModal",attrs:{centered:"","no-close-on-esc":!0,"no-close-on-backdrop":!0,title:e.$t("message.EditImage"),okTitle:e.$t("message.Ok"),cancelTitle:e.$t("message.Cancel"),"button-size":"lg"},on:{ok:e.submit,busy:e.busy,hidden:e.onHidden}},[a("div",[a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:"",justified:""}},[a("b-tab",{attrs:{active:""}},[a("template",{slot:"title"},[a("span",{staticClass:"oi oi-image",attrs:{"aria-hidden":"true"}}),e._v("\r\n                        "+e._s(e.$t("message.Details"))+"\r\n                    ")]),a("b-card-text",[a("b-form",{ref:"form",on:{submit:e.submit}},[a("img",{staticClass:"preview-image",style:e.rotationStyle,attrs:{id:"preview-image",src:e.thumbnail}}),a("div",{staticClass:"rotate-container"},[a("button",{staticClass:"btn btn-sm btn-outline-secondary control-padding",attrs:{type:"button"},on:{click:e.rotateAntiClockwise}},[a("span",{staticClass:"oi oi-reload icon-flipped",attrs:{"aria-hidden":"true"}})]),a("button",{staticClass:"btn btn-sm btn-outline-secondary control-padding",attrs:{type:"button"},on:{click:e.rotateClockwise}},[a("span",{staticClass:"oi oi-reload",attrs:{"aria-hidden":"true"}})])]),a("b-form-group",{attrs:{label:e.$t("message.Title")+"*","label-for":"title",state:e.form.title}},[a("b-form-input",{attrs:{id:"titleInput",state:e.form.titleState,maxlength:"50",required:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("b-form-group",{attrs:{label:e.$t("message.Description")}},[a("b-form-textarea",{attrs:{rows:"5"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.setAsGalleryThumbnail,callback:function(t){e.setAsGalleryThumbnail=t},expression:"setAsGalleryThumbnail"}},[e._v("\r\n                                "+e._s(e.$t("message.GalleryThumbnail"))+"\r\n                            ")]),a("small",{staticClass:"font-italic required-legend"},[e._v("* "+e._s(e.$t("message.Required")))])],1)],1)],2),a("b-tab",{on:{click:e.locationTabClicked}},[a("template",{slot:"title"},[a("span",{staticClass:"oi oi-map",attrs:{"aria-hidden":"true"}}),e._v("\r\n                        "+e._s(e.$t("message.Location"))+"\r\n                    ")]),a("b-card-text",[a("EditLocation",{ref:"editLocation"})],1)],2)],1)],1),e.busy?a("Loading"):e._e(),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\r\n            "+e._s(e.errorMessage)+"\r\n        ")])],1)])},oc=[],lc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"map-preview-div"}}),a("label",{attrs:{for:"address"}},[e._v(e._s(e.$t("message.Location")))]),a("b-input-group",[a("b-form-input",{attrs:{type:"text"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-secondary"},on:{click:e.addressSearch}},[e._v("\r\n                "+e._s(e.$t("message.Search"))+"\r\n            ")])],1)],1),e.busy?a("Loading"):e._e(),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\r\n        "+e._s(e.errorMessage)+"\r\n    ")])],1)},cc=[],uc=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.address="",e.latitude=0,e.longitude=0,e.busy=!1,e.errorMessage="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"initialise",value:function(e,t){var a=this;this.latitude=e,this.longitude=t,this.$nextTick((function(){return a.renderMap([e,t])}))}},{key:"Redraw",value:function(){if(this.map){var e=this.map;window.setTimeout((function(){return e.invalidateSize()}),100)}}},{key:"renderMap",value:function(e){var t={token:me.MapboxToken,detectRetina:!0,zoomOffset:-1,tileSize:512},n=gn.a.tileLayer(me.MapboxTileAPi,t),i={center:e,zoom:8,zoomControl:!1,minZoom:2,scrollWheelZoom:!0,maxBounds:[[-90,-150],[90,150]],layers:[n]};this.map=gn.a.map("map-preview-div",i),delete gn.a.Icon.Default.prototype._getIconUrl,gn.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),this.map.addControl(gn.a.control.zoom({position:"bottomleft"})),this.marker=gn.a.marker(e).addTo(this.map);var r=this.map;window.setTimeout((function(){return r.invalidateSize()}),100)}},{key:"addressSearch",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.errorMessage="",this.busy=!0,t={uri:"".concat(me.BaseApiUrl).concat(me.LocationApi,"?address=").concat(this.address),headers:Vd.getters.ajaxHeader,json:!0},e.next=6,ue["get"](t);case 6:a=e.sent,this.latitude=a.latitude,this.longitude=a.longitude,this.$emit("locationChanged",a),this.map&&this.marker&&(this.map.removeLayer(this.marker),this.map.panTo(new gn.a.LatLng(this.latitude,this.longitude)),this.marker=gn.a.marker([this.latitude,this.longitude]).addTo(this.map)),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.errorMessage=e.t0.toString();case 16:this.busy=!1;case 17:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"showError",get:function(){return!!(this.errorMessage&&this.errorMessage.length>0)}}]),t}(p["c"]);uc=Object(d["a"])([Object(p["a"])({components:{Loading:w}})],uc);var dc=uc,pc=dc,hc=(a("15c8"),Object(y["a"])(pc,lc,cc,!1,null,"0e424b22",null)),mc=hc.exports,gc=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.setAsGalleryThumbnail=!1,e.thumbnail="",e.form={title:"",description:null},e.busy=!1,e.errorMessage="",e.rotationStyle={},e.clockwiseRotation=0,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.image=t,this.thumbnail=t.thumbnail,this.clockwiseRotation=0,this.rotationStyle={},this.form.title=t.title,this.form.description=t.description,e.next=8,Vd.dispatch("loadCurrentGalleryInfo",t.gallery_id);case 8:Vd.state.currentGallery&&(this.setAsGalleryThumbnail=t.thumbnail===Vd.state.currentGallery.thumbnail),this.$nextTick((function(){a.$refs.editImageModal.show(),a.$nextTick((function(){return a.$refs.editLocation.initialise(t.latitude,t.longitude)}))}));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"submit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.errorMessage="",a=this.$refs.form.checkValidity(),this.form.nameState=a?"valid":"invalid",a&&this.image){e.next=7;break}return this.$emit("onError"),e.abrupt("return");case 7:return e.prev=7,this.busy=!0,n={uri:"".concat(me.BaseApiUrl).concat(me.ImageAPI).concat(this.image.id,"/"),headers:Vd.getters.ajaxHeader,body:{title:this.form.title,description:this.form.description,anticlockwise_angle:360-this.clockwiseRotation,latitude:this.$refs.editLocation.latitude,longitude:this.$refs.editLocation.longitude},json:!0},e.next=12,ue["patch"](n);case 12:return i=e.sent,this.$emit("imageEdited",i),e.next=16,this.updateGalleryThumbnail();case 16:this.$refs.editImageModal.hide(),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](7),this.errorMessage=e.t0.toString();case 22:this.busy=!1;case 23:case"end":return e.stop()}}),e,this,[[7,19]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateGalleryThumbnail",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.image||!Vd.state.currentGallery){e.next=10;break}if(t=this.image.thumbnail===Vd.state.currentGallery.thumbnail,this.setAsGalleryThumbnail===t){e.next=10;break}return a="",this.setAsGalleryThumbnail&&(a=this.image.id.toString()),n={uri:"".concat(me.BaseApiUrl).concat(me.GalleryAPI).concat(this.image.gallery_id,"/"),headers:Vd.getters.ajaxHeader,body:{thumbnail_id:a},json:!0},e.next=8,ue["patch"](n);case 8:i=e.sent,Vd.dispatch("updateCurrentGallery",i);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"closeClicked",value:function(){this.$refs.editImageModal.hide()}},{key:"rotateClockwise",value:function(){this.clockwiseRotation>=270?this.clockwiseRotation=0:this.clockwiseRotation+=90,this.setRotation()}},{key:"rotateAntiClockwise",value:function(){this.clockwiseRotation<90?this.clockwiseRotation=270:this.clockwiseRotation-=90,this.setRotation()}},{key:"setRotation",value:function(){var e=document.getElementById("preview-image"),t="rotate(".concat(this.clockwiseRotation,"deg)"),a="0",n="0",i="0",r="";switch(this.clockwiseRotation){case 0:break;case 90:a="".concat(e.height,"px"),i="".concat(e.width-e.height,"px"),r="0 0";break;case 180:break;case 270:n="".concat(e.width,"px"),i="-".concat(e.height,"px"),r="0 0";break}this.rotationStyle={"-webkit-transform":t,"-moz-transform":t,"-o-transform":t,"-ms-transform":t,transform:t,"transform-origin":r,"margin-left":a,"margin-top":n,"margin-bottom":i}}},{key:"locationTabClicked",value:function(){this.$refs.editLocation.Redraw()}},{key:"onHidden",value:function(){this.$emit("onHidden")}},{key:"showError",get:function(){return!!(this.errorMessage&&this.errorMessage.length>0)}}]),t}(p["c"]);gc=Object(d["a"])([Object(p["a"])({components:{Loading:w,EditLocation:mc}})],gc);var fc=gc,vc=fc,yc=(a("477c"),Object(y["a"])(vc,sc,oc,!1,null,"1512494a",null)),bc=yc.exports,wc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTagging,expression:"showTagging"}],staticClass:"tagging-overlay",style:e.overlayStyle,on:{click:e.overlayClicked}},[a("span",{staticClass:"oi oi-x top-corner",on:{click:e.onCloseClick}}),a("div",{staticClass:"add-tags-message"},[e._v(e._s(e.$t("message.AddTags")))]),e._l(e.tags,(function(e){return a("TagBox",{key:e.id,ref:"tagBox"+e.id,refInFor:!0,attrs:{tag:e}})})),e._l(e.suggestedTags,(function(t){return a("SuggestedTagBox",{key:t.id,ref:"suggestedTagBox"+t.id,refInFor:!0,attrs:{suggestedTag:t},on:{suggestedTagClick:e.suggestedTagClick}})})),e.showDeleteTags?a("div",{staticClass:"delete-tags-message",on:{click:e.onDeleteTagsClicked}},[a("span",{staticClass:"oi oi-trash"}),e._v("\r\n      "+e._s(e.$t("message.DeleteTags"))+"\r\n    ")]):e._e(),a("Loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),a("WhoIsThis",{ref:"whoIsThis",on:{tagCreated:e.tagCreated}}),a("DeleteTags",{ref:"deleteTags",on:{tagDeleted:e.tagDeleted}}),a("WhoIsThisFromSuggested",{ref:"whoIsThisFromSuggested",on:{suggestedTagConverted:e.suggestedTagConverted,hidden:e.onWhoIsThisFromSuggestedHidden}})],2)},kc=[],_c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag-box",style:e.tagboxStyle,attrs:{id:"tag-box-"+this.tag.id}},[a("div",{staticClass:"tag-name",style:e.tagnameStyle,on:{click:e.tagNameClick}},[e._v("\r\n    "+e._s(e.tag.person_name)+"\r\n  ")])])},jc=[],xc=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.tagboxStyle={},e.tagnameStyle={},e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"updateStyle",value:function(){if(this.tag){var e=document.getElementById("tag-box-".concat(this.tag.id)),t=e.parentNode,a=t.clientLeft+t.clientWidth*this.tag.x1,n=t.clientLeft+t.clientWidth*this.tag.x2-a,i=t.clientTop+t.clientHeight*this.tag.y1,r=t.clientTop+t.clientHeight*this.tag.y2-i;this.tagboxStyle={left:"".concat(a,"px"),width:"".concat(n,"px"),top:"".concat(i,"px"),height:"".concat(r,"px")},this.tagnameStyle={"margin-top":"".concat(r,"px")}}}},{key:"mounted",value:function(){this.updateStyle()}},{key:"tagNameClick",value:function(){this.tag&&this.$router.push("/family/tree/".concat(this.tag.person_id,"/"))}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:null})],xc.prototype,"tag",void 0),Object(d["a"])([Object(p["d"])("tag")],xc.prototype,"updateStyle",null),xc=Object(d["a"])([Object(p["a"])({components:{}})],xc);var Oc=xc,Cc=Oc,Pc=(a("5de6"),Object(y["a"])(Cc,_c,jc,!1,null,"a4074c74",null)),Ic=Pc.exports,Sc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"suggested-tag-box",style:e.suggestedTagboxStyle,attrs:{id:"suggested-tag-box-"+this.suggestedTag.id},on:{click:e.suggestedTagNameClick}},[a("div",{staticClass:"suggested-tag-name",style:e.suggestedTagnameStyle},[e._v("\r\n    "+e._s(e.$t("message.WhoIsThis"))+"\r\n  ")])])},Tc=[],Rc=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.suggestedTagboxStyle={},e.suggestedTagnameStyle={},e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"updateStyle",value:function(){if(this.suggestedTag){var e=document.getElementById("suggested-tag-box-".concat(this.suggestedTag.id)),t=e.parentNode,a=t.clientLeft+t.clientWidth*this.suggestedTag.x1,n=t.clientLeft+t.clientWidth*this.suggestedTag.x2-a,i=t.clientTop+t.clientHeight*this.suggestedTag.y1,r=t.clientTop+t.clientHeight*this.suggestedTag.y2-i;this.suggestedTagboxStyle={left:"".concat(a,"px"),width:"".concat(n,"px"),top:"".concat(i,"px"),height:"".concat(r,"px")},this.suggestedTagnameStyle={"margin-top":"".concat(r,"px")}}}},{key:"mounted",value:function(){this.updateStyle()}},{key:"suggestedTagNameClick",value:function(e){this.suggestedTag&&this.$emit("suggestedTagClick",this.suggestedTag)}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:null})],Rc.prototype,"suggestedTag",void 0),Object(d["a"])([Object(p["d"])("suggestedTag")],Rc.prototype,"updateStyle",null),Rc=Object(d["a"])([Object(p["a"])({components:{}})],Rc);var Ec=Rc,zc=Ec,Ac=(a("2e79"),Object(y["a"])(zc,Sc,Tc,!1,null,"998ff69c",null)),Mc=Ac.exports,Dc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"whoIsThisModal",attrs:{"hide-footer":"","hide-header":"",centered:"","button-size":"lg"}},[a("div",[a("div",{staticClass:"crop-div",style:e.cropDiv},[a("img",{style:e.cropImg,attrs:{src:e.thumbnail}})]),a("p",[e._v(e._s(e.$t("message.WhoIsThis")))])]),a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("h2",[a("span",{staticClass:"oi oi-magnifying-glass search-prepend",attrs:{"aria-hidden":"true"}})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],staticClass:"form-control",attrs:{id:"tag-search-box",type:"text",placeholder:e.$t("message.Search"),"aria-label":e.$t("message.Search"),autocomplete:"off"},domProps:{value:e.searchValue},on:{input:[function(t){t.target.composing||(e.searchValue=t.target.value)},function(t){return e.searchValue=t.target.value}]}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingResults,expression:"loadingResults"}],staticClass:"text-center spinner-container"},[a("b-spinner")],1),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-hover"},[a("tbody",e._l(e.people,(function(t){return a("tr",{key:t.id,on:{click:function(a){return e.selectPerson(t)}}},[a("td",{staticClass:"search-thumb-col"},[a("img",{staticClass:"search-thumb",attrs:{src:t.small_thumbnail}})]),a("td",[e._v("\n                        "+e._s(t.name)+"\n                    ")])])})),0)])]),a("Loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{zIndex:1051}})],1)},Nc=[],Lc=(a("386d"),function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.searchValue="",e.people=[],e.loadingResults=!1,e.x1=0,e.x2=0,e.y1=0,e.y2=0,e.image=null,e.cropDiv={},e.cropImg={},e.loading=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a,n,i,r){var s,o,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.console.log("WhoIsThis.show()"),this.searchValue="",this.x1=t,this.x2=a,this.y1=n,this.y2=i,this.image=r,s=(a-t)*r.large_thumbnail_width,o=(i-n)*r.large_thumbnail_height,this.cropDiv={width:"".concat(s,"px"),height:"".concat(o,"px")},this.cropImg={"margin-left":"-".concat(t*r.large_thumbnail_width,"px"),"margin-top":"-".concat(n*r.large_thumbnail_height,"px")},this.$nextTick((function(){l.$refs.whoIsThisModal.show(),l.$nextTick((function(){var e=document.getElementById("tag-search-box");e&&setTimeout((function(){e.focus(),e.select()}),100)}))}));case 12:case"end":return e.stop()}}),e,this)})));function t(t,a,n,i,r){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onChange",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.timeOutHandle&&window.clearTimeout(this.timeOutHandle),this.loadingResults=!0,this.timeOutHandle=setTimeout(Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.search();case 2:case"end":return e.stop()}}),e)}))),400);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"search",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s,o,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,Vd.state.people&&0!==Vd.state.people.length){e.next=4;break}return e.next=4,Vd.dispatch("loadTreeData");case 4:if(!(this.searchValue&&this.searchValue.length>0)){e.next=28;break}for(t=Vd.state.people.filter((function(e){return e.name.toLocaleLowerCase().indexOf(l.searchValue.toLocaleLowerCase())>-1})),a=!0,n=!1,i=void 0,e.prev=9,r=t[Symbol.iterator]();!(a=(s=r.next()).done);a=!0)o=s.value,o.small_thumbnail||(o.small_thumbnail="img/portrait_80.png");e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](9),n=!0,i=e.t0;case 17:e.prev=17,e.prev=18,a||null==r.return||r.return();case 20:if(e.prev=20,!n){e.next=23;break}throw i;case 23:return e.finish(20);case 24:return e.finish(17);case 25:this.people=t,e.next=29;break;case 28:this.people=[];case 29:e.next=34;break;case 31:e.prev=31,e.t1=e["catch"](0),Vd.commit("setErrorMessage",e.t1);case 34:this.loadingResults=!1;case 35:case"end":return e.stop()}}),e,this,[[0,31],[9,13,17,25],[18,,20,24]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"selectPerson",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.image){e.next=12;break}return this.loading=!0,e.prev=2,a={uri:"".concat(me.BaseApiUrl).concat(me.ImageTaggingAPI),headers:Vd.getters.ajaxHeader,body:{x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2,image_id:this.image.id,person_id:t.id},json:!0},e.next=6,ue["post"](a);case 6:n=e.sent,this.$emit("tagCreated",n),this.$refs.whoIsThisModal.hide();case 9:return e.prev=9,this.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[2,,9,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"thumbnail",get:function(){return this.image?this.image.large_thumbnail:""}}]),t}(p["c"]));Object(d["a"])([Object(p["d"])("searchValue")],Lc.prototype,"onChange",null),Lc=Object(d["a"])([Object(p["a"])({components:{Loading:w}})],Lc);var $c=Lc,Bc=$c,Uc=(a("8050"),Object(y["a"])(Bc,Dc,Nc,!1,null,"13c7d7d6",null)),Gc=Uc.exports,Hc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"deleteTagsModal",attrs:{centered:"","button-size":"lg","ok-title":e.$t("message.Close"),title:e.$t("message.DeleteTags"),"ok-only":""}},[a("div",{staticClass:"container"},e._l(e.tags,(function(t){return a("TagToDelete",{key:t.id,attrs:{tag:t,image:e.image},on:{tagDeleted:e.tagDeleted}})})),1),a("Loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{zIndex:1051}})],1)},Wc=[],Fc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row tag-row"},[a("div",{staticClass:"col-xs-auto"},[a("b-button",{attrs:{variant:"danger",title:e.$t("message.Delete")},on:{click:e.click}},[a("span",{staticClass:"oi oi-trash",attrs:{"aria-hidden":"true"}})])],1),a("div",{staticClass:"col"},[a("div",{staticClass:"tag-name"},[e._v(e._s(e.tag.person_name))])]),a("div",{staticClass:"col-xs-auto"},[a("b-spinner",{directives:[{name:"show",rawName:"v-show",value:e.saving,expression:"saving"}],staticClass:"password-spinner",attrs:{small:""}})],1)])},Yc=[],Kc=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.saving=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"click",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.tag){e.next=12;break}return e.prev=1,this.saving=!0,t=this.tag.id,a={uri:"".concat(me.BaseApiUrl).concat(me.ImageTaggingAPI).concat(t,"/"),headers:Vd.getters.ajaxHeader,json:!0},e.next=7,ue["delete"](a);case 7:e.sent,this.$emit("tagDeleted",t);case 9:return e.prev=9,this.saving=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,,9,12]])})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:null})],Kc.prototype,"tag",void 0),Kc=Object(d["a"])([Object(p["a"])({components:{Loading:w}})],Kc);var qc=Kc,Vc=qc,Qc=(a("8ddf"),Object(y["a"])(Vc,Fc,Yc,!1,null,"72ed15b4",null)),Jc=Qc.exports,Xc=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.tags=[],e.image=null,e.loading=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.tags=t,this.image=a,this.$nextTick((function(){n.$refs.deleteTagsModal.show()}));case 3:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"tagDeleted",value:function(e){this.tags=this.tags.filter((function(t){return t.id!==e})),this.$emit("tagDeleted",e)}}]),t}(p["c"]);Xc=Object(d["a"])([Object(p["a"])({components:{Loading:w,TagToDelete:Jc}})],Xc);var Zc=Xc,eu=Zc,tu=Object(y["a"])(eu,Hc,Wc,!1,null,"33a1f350",null),au=tu.exports,nu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"whoIsThisFromSuggestedModal",attrs:{"hide-footer":"","hide-header":"",centered:"","button-size":"lg"},on:{hidden:e.onHidden}},[a("div",[a("div",{staticClass:"crop-div",style:e.cropDiv},[a("img",{style:e.cropImg,attrs:{src:e.thumbnail}})]),a("p",[e._v(e._s(e.$t("message.WhoIsThis")))])]),a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("h2",[a("span",{staticClass:"oi oi-magnifying-glass search-prepend",attrs:{"aria-hidden":"true"}})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],staticClass:"form-control",attrs:{id:"suggested-tag-search-box",type:"text",placeholder:e.$t("message.Search"),"aria-label":e.$t("message.Search"),autocomplete:"off"},domProps:{value:e.searchValue},on:{input:[function(t){t.target.composing||(e.searchValue=t.target.value)},function(t){return e.searchValue=t.target.value}]}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingResults,expression:"loadingResults"}],staticClass:"text-center spinner-container"},[a("b-spinner")],1),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-hover"},[a("tbody",e._l(e.people,(function(t){return a("tr",{key:t.id,on:{click:function(a){return e.selectPerson(t)}}},[a("td",{staticClass:"search-thumb-col"},[a("img",{staticClass:"search-thumb",attrs:{src:t.small_thumbnail}})]),a("td",[e._v("\n                        "+e._s(t.name)+"\n                    ")])])})),0)])]),a("Loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{zIndex:1051}})],1)},iu=[],ru=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.searchValue="",e.people=[],e.loadingResults=!1,e.x1=0,e.x2=0,e.y1=0,e.y2=0,e.image=null,e.cropDiv={},e.cropImg={},e.loading=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){var n,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.console.log("WhoIsThisFromSuggested.show()"),this.suggestedTag=t,this.searchValue="",this.x1=t.x1,this.x2=t.x2,this.y1=t.y1,this.y2=t.y2,this.image=a,n=(this.x2-this.x1)*a.large_thumbnail_width,i=(this.y2-this.y1)*a.large_thumbnail_height,this.cropDiv={width:"".concat(n,"px"),height:"".concat(i,"px")},this.cropImg={"margin-left":"-".concat(this.x1*a.large_thumbnail_width,"px"),"margin-top":"-".concat(this.y1*a.large_thumbnail_height,"px")},e.next=14,this.addSuggestedPeople();case 14:this.$nextTick((function(){r.$refs.whoIsThisFromSuggestedModal.show()}));case 15:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onChange",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.timeOutHandle&&window.clearTimeout(this.timeOutHandle),this.loadingResults=!0,this.timeOutHandle=setTimeout(Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.search();case 2:case"end":return e.stop()}}),e)}))),400);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addSuggestedPeople",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.console.log("WhoIsThisFromSuggested.addSuggestedPeople()"),!this.suggestedTag||!this.suggestedTag.person_id){e.next=29;break}if(Vd.state.people&&0!==Vd.state.people.length){e.next=5;break}return e.next=5,Vd.dispatch("loadTreeData");case 5:for(t=Number(this.suggestedTag.person_id),window.console.log("suggestedPersonId: ".concat(t)),a=Vd.state.people.filter((function(e){return Number(e.id)===t})),n=!0,i=!1,r=void 0,e.prev=11,s=a[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)l=o.value,l.small_thumbnail||(l.small_thumbnail="img/portrait_80.png");e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](11),i=!0,r=e.t0;case 19:e.prev=19,e.prev=20,n||null==s.return||s.return();case 22:if(e.prev=22,!i){e.next=25;break}throw r;case 25:return e.finish(22);case 26:return e.finish(19);case 27:window.console.log(a),this.people=a;case 29:case"end":return e.stop()}}),e,this,[[11,15,19,27],[20,,22,26]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"search",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s,o,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,Vd.state.people&&0!==Vd.state.people.length){e.next=4;break}return e.next=4,Vd.dispatch("loadTreeData");case 4:if(!(this.searchValue&&this.searchValue.length>0)){e.next=28;break}for(t=Vd.state.people.filter((function(e){return e.name.toLocaleLowerCase().indexOf(l.searchValue.toLocaleLowerCase())>-1})),a=!0,n=!1,i=void 0,e.prev=9,r=t[Symbol.iterator]();!(a=(s=r.next()).done);a=!0)o=s.value,o.small_thumbnail||(o.small_thumbnail="img/portrait_80.png");e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](9),n=!0,i=e.t0;case 17:e.prev=17,e.prev=18,a||null==r.return||r.return();case 20:if(e.prev=20,!n){e.next=23;break}throw i;case 23:return e.finish(20);case 24:return e.finish(17);case 25:this.people=t,e.next=30;break;case 28:this.people=[],this.addSuggestedPeople();case 30:e.next=35;break;case 32:e.prev=32,e.t1=e["catch"](0),Vd.commit("setErrorMessage",e.t1);case 35:this.loadingResults=!1;case 36:case"end":return e.stop()}}),e,this,[[0,32],[9,13,17,25],[18,,20,24]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"selectPerson",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.image||!this.suggestedTag){e.next=12;break}return this.loading=!0,e.prev=2,a={uri:"".concat(me.BaseApiUrl).concat(me.SuggestedTaggingAPI).concat(this.suggestedTag.id,"/"),headers:Vd.getters.ajaxHeader,body:{person_id:t.id},json:!0},e.next=6,ue["patch"](a);case 6:n=e.sent,this.$emit("suggestedTagConverted",this.suggestedTag,n),this.$refs.whoIsThisFromSuggestedModal.hide();case 9:return e.prev=9,this.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[2,,9,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onHidden",value:function(){this.$emit("hidden")}},{key:"thumbnail",get:function(){return this.image?this.image.large_thumbnail:""}}]),t}(p["c"]);Object(d["a"])([Object(p["d"])("searchValue")],ru.prototype,"onChange",null),ru=Object(d["a"])([Object(p["a"])({components:{Loading:w}})],ru);var su=ru,ou=su,lu=(a("ae50"),Object(y["a"])(ou,nu,iu,!1,null,"a5547fa8",null)),cu=lu.exports,uu=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.showTagging=!1,e.tags=[],e.suggestedTags=[],e.overlayStyle={},e.image=null,e.imageElement=null,e.preventOverlayClick=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"toggle",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.console.log("TaggingOverlay.toggle()"),this.showTagging=!this.showTagging,!this.showTagging){e.next=8;break}return a=t.photoswipe.currItem.image,e.next=6,this.initialise(a,t);case 6:e.next=9;break;case 8:this.destroy();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initialise",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.console.log("TaggingOverlay.initialise()"),this.loading=!0,this.preventOverlayClick=!0,this.image=t,a.photoswipe.listen("destroy",this.destroy),this.sizeOverlay(),a.photoswipe.listen("resize",this.sizeOverlay),e.next=9,this.loadData(t);case 9:this.preventOverlayClick=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"switchImage",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.image=t,this.sizeOverlay(),e.next=5,this.loadData(t);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){this.showTagging=!1,this.tags=[],this.overlayStyle={top:"0px",left:"0px",width:"0px",height:"$0px"},this.$emit("taggingOverlayClosed")}},{key:"loadData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={uri:"".concat(me.BaseApiUrl).concat(me.ImageTaggingAPI,"?image_id=").concat(t.id),headers:Vd.getters.ajaxHeader,json:!0},n={uri:"".concat(me.BaseApiUrl).concat(me.SuggestedTaggingAPI,"?image_id=").concat(t.id),headers:Vd.getters.ajaxHeader,json:!0},i=ue["get"](a),r=ue["get"](n),e.next=7,i;case 7:return this.tags=e.sent,e.next=10,r;case 10:this.suggestedTags=e.sent;case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,,11,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sizeOverlay",value:function(){if(this.image&&this.showTagging&&(this.imageElement=this.getImageElement(this.image),this.imageElement)){var e=this.imageElement.getBoundingClientRect();this.overlayStyle={top:"".concat(e.top,"px"),left:"".concat(e.left,"px"),width:"".concat(e.width,"px"),height:"".concat(e.height,"px")};var t=!0,a=!1,n=void 0;try{for(var i,r=this.tags[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;this.$refs["tagBox".concat(s.id)][0].updateStyle()}}catch(h){a=!0,n=h}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}var o=!0,l=!1,c=void 0;try{for(var u,d=this.suggestedTags[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value;this.$refs["suggestedTagBox".concat(p.id)][0].updateStyle()}}catch(h){l=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}}},{key:"getImageElement",value:function(e){var t=document.getElementsByClassName("pswp__img"),a=!0,n=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value,l=o;if(l&&l.src.includes(e.large_thumbnail))return l}}catch(c){n=!0,i=c}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}return null}},{key:"onCloseClick",value:function(e){this.preventOverlayClick=!0,this.destroy()}},{key:"onDeleteTagsClicked",value:function(e){this.preventOverlayClick=!0,this.image&&this.$refs.deleteTags.show(this.tags,this.image)}},{key:"overlayClicked",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s,o,l,c,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.console.log("TaggingOverlay.overlayClicked()"),this.imageElement&&this.image&&!this.preventOverlayClick&&(a=this.imageElement.getBoundingClientRect(),n=Math.max(.04,30/a.width),i=n/a.height*a.width,r=Math.max(t.offsetX/a.width-n,0),s=r+2*n,s>1&&(s=1,r=s-2*n),o=Math.max(t.offsetY/a.height-i,0),l=o+2*i,l>1&&(l=1,o=l-2*i),c=this.image,this.$nextTick((function(){u.preventOverlayClick?u.preventOverlayClick=!1:u.$refs.whoIsThis.show(r,s,o,l,c)})));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"tagCreated",value:function(e){this.tags.push(e)}},{key:"tagDeleted",value:function(e){this.tags=this.tags.filter((function(t){return t.id!==e}))}},{key:"suggestedTagClick",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.preventOverlayClick=!0,!this.image){e.next=5;break}return a=this.$refs.whoIsThisFromSuggested,e.next=5,a.show(t,this.image);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"suggestedTagConverted",value:function(e,t){window.console.log("TaggingOverlay.suggestedTagConverted()"),this.preventOverlayClick=!1,this.tags.push(t),this.suggestedTags=this.suggestedTags.filter((function(t){return t.id!==e.id}))}},{key:"onWhoIsThisFromSuggestedHidden",value:function(){this.preventOverlayClick=!1}},{key:"showDeleteTags",get:function(){return this.tags.length>0}}]),t}(p["c"]);uu=Object(d["a"])([Object(p["a"])({components:{Loading:w,TagBox:Ic,WhoIsThis:Gc,DeleteTags:au,SuggestedTagBox:Mc,WhoIsThisFromSuggested:cu}})],uu);var du=uu,pu=du,hu=(a("1c72"),Object(y["a"])(pu,wc,kc,!1,null,"15789ef9",null)),mu=hu.exports,gu=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.galleryId=0,e.photoswipeWrapper=null,e.loadingMore=!1,e.displayMap=!1,e.showTagging=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"init",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a,n,i,r){var s,o,l,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=c.length>5&&void 0!==c[5]&&c[5],this.galleryId=r,this.photoswipeWrapper=new Xl(t,a),this.photoswipeWrapper.photoswipe.listen("afterChange",this.afterChange),this.photoswipeWrapper.photoswipe.listen("download",this.download),this.photoswipeWrapper.photoswipe.listen("map",this.showMap),this.photoswipeWrapper.photoswipe.listen("editImage",this.editImage),this.photoswipeWrapper.photoswipe.listen("tags",this.toggleTagging),o="".concat(me.BaseApiUrl).concat(me.ImageAPI,"?gallery_id=").concat(this.galleryId,"&page="),l=function(e){return o+e.toString()},s){e.next=15;break}return this.loadingMore=!0,e.next=14,this.photoswipeWrapper.loadImagesFromOtherPages(n,i,l);case 14:this.loadingMore=!1;case 15:case"end":return e.stop()}}),e,this)})));function t(t,a,n,i,r){return e.apply(this,arguments)}return t}()},{key:"afterChange",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.photoswipeWrapper){e.next=9;break}if(t=this.photoswipeWrapper.photoswipe.currItem.image,a=document.getElementById("caption-description"),a.innerHTML=t.description,this.displayMap=!(0===t.latitude&&0===t.longitude),n=this.$refs.taggingOverlay,!n.showTagging){e.next=9;break}return e.next=9,n.switchImage(t);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"download",value:function(){if(this.photoswipeWrapper){var e=this.photoswipeWrapper.photoswipe.currItem.image.original_image;window.open(e,"_blank"),this.$refs.taggingOverlay.destroy()}}},{key:"showMap",value:function(){if(this.photoswipeWrapper){var e=this.photoswipeWrapper.photoswipe.currItem.image;this.$refs.mapPopUp.show([e.latitude,e.longitude]),this.photoswipeWrapper.photoswipe.options.arrowKeys=!1,this.photoswipeWrapper.photoswipe.options.escKey=!1,this.$refs.taggingOverlay.destroy()}}},{key:"editImage",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.photoswipeWrapper){e.next=7;break}return t=this.photoswipeWrapper.photoswipe.currItem.image,e.next=4,this.$refs.editImage.show(t);case 4:this.photoswipeWrapper.photoswipe.options.arrowKeys=!1,this.photoswipeWrapper.photoswipe.options.escKey=!1,this.$refs.taggingOverlay.destroy();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"imageEdited",value:function(e){this.photoswipeWrapper&&this.photoswipeWrapper.updateImage(e),this.$emit("imageEdited",e)}},{key:"popupHidden",value:function(){this.photoswipeWrapper&&(this.photoswipeWrapper.photoswipe.options.arrowKeys=!0,this.photoswipeWrapper.photoswipe.options.escKey=!0)}},{key:"toggleTagging",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.photoswipeWrapper&&(this.$refs.taggingOverlay.toggle(this.photoswipeWrapper),this.photoswipeWrapper.photoswipe.options.arrowKeys=!1,this.photoswipeWrapper.photoswipe.options.escKey=!1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);gu=Object(d["a"])([Object(p["a"])({components:{MapPopUp:rc,EditImage:bc,TaggingOverlay:mu}})],gu);var fu=gu,vu=fu,yu=(a("1699"),Object(y["a"])(vu,Wl,Fl,!1,null,"f4d1ec72",null)),bu=yu.exports,wu=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.showNoImagesMessage=!1,e.editMode=!1,e.totalCount=0,e.images=[],e.imageRows=[],e.selectedImageIds=[],e.galleryWidth=800,e.additionalImages=[],e.isMounted=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vd.dispatch("restoreSession");case 3:return this.isMounted=!0,e.next=6,this.loadData();case 6:return e.next=8,this.displayImageFromUrl();case 8:window.addEventListener("resize",this.setDisplaySizes),window.onresize=function(){return t.setDisplaySizes()},window.console.log("store.dispatch('updateRouteLoaded');"),Vd.dispatch("updateRouteLoaded"),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),window.console.log("ex: ".concat(e.t0)),this.$router.push("/accounts/login/?next=".concat(this.$router.currentRoute.fullPath));case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"linkGen",value:function(e){return"/gallery/".concat(this.galleryId,"/?page=").concat(e)}},{key:"loadData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isMounted){e.next=18;break}return Vd.commit("updateLoading",!0),this.showNoImagesMessage=!1,e.prev=3,t=this.loadImageData(this.page),a=this.$refs.galleryHeader.loadGalleryData(),e.next=8,t;case 8:return e.next=10,a;case 10:this.setDisplaySizes(),0===this.images.length&&(this.showNoImagesMessage=!0),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),Vd.commit("setErrorMessage",e.t0);case 17:Vd.commit("updateLoading",!1);case 18:case"end":return e.stop()}}),e,this,[[3,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadImageData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),e.prev=1,n={uri:"".concat(me.BaseApiUrl).concat(me.ImageAPI,"?page=").concat(t,"&gallery_id=").concat(this.galleryId),headers:Vd.getters.ajaxHeader,json:!0},e.next=5,ue["get"](n);case 5:i=e.sent,this.images=i.results,(a=this.additionalImages).push.apply(a,Object(N["a"])(this.images)),this.totalCount=i.count,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),Vd.commit("setErrorMessage",e.t0);case 14:Vd.commit("updateLoading",!1);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setDisplaySizes",value:function(){var e=document.getElementById("gallery-container");e.style.minHeight="".concat(window.innerHeight+10,"px");var t=document.getElementById("image-container");this.galleryWidth=t.clientWidth-1;var a=window.devicePixelRatio||1;this.portrait;var n=new Array,i=new Array,r=0,s=!0,o=!1,l=void 0;try{for(var c,u=this.images[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;d.thumbnail||(d.thumbnail_width=200,d.thumbnail_height=200),i.push(d),r+=d.thumbnail_width,r>=this.galleryWidth&&(n.push(i),i=new Array,r=0)}}catch(p){o=!0,l=p}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}n.push(i);this.imageRows=n}},{key:"addImages",value:function(){var e=this.$refs.galleryHeader,t="/gallery/".concat(this.galleryId,"/upload/?page=").concat(this.page,"&title=").concat(e.title);this.$router.push(t)}},{key:"editModeChanged",value:function(e){this.editMode=e}},{key:"selectionChanged",value:function(e,t){var a=new Array,n=!0,i=!1,r=void 0;try{for(var s,o=this.images[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;l.id===e&&(l.selected=t),l.selected&&a.push(l.id)}}catch(c){i=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.selectedImageIds=a}},{key:"imagesDeleted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadImageData(this.page);case 2:this.setDisplaySizes();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"imageClick",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.galleryId){e.next=4;break}return n=this.images.findIndex((function(e){return e.id===t})),e.next=4,this.$refs.photoSwipeView.init(this.images,n,this.page,this.totalCount,this.galleryId);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"imageEdited",value:function(e){var t=0;for(t=0;t<this.images.length;t++)if(e.id===this.images[t].id)return this.images[t]=e,void this.setDisplaySizes()}},{key:"displayImageFromUrl",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$route.query.image_id||!this.galleryId){e.next=19;break}if(t=Number(this.$route.query.image_id),a=this.images.findIndex((function(e){return e.id===t})),!(a>-1)){e.next=8;break}return e.next=6,this.$refs.photoSwipeView.init(this.images,a,this.page,this.totalCount,this.galleryId);case 6:e.next=19;break;case 8:if(Vd.commit("updateLoading",!0),n=new Array,i=this.page,this.page<this.numberOfPages)for(i=this.page+1;i<=this.numberOfPages;i++)n.push(this.loadImageData(i));if(this.page>1)for(i=1;i<this.page;i++)n.push(this.loadImageData(i));return e.next=15,Promise.all(n);case 15:return a=this.additionalImages.findIndex((function(e){return e.id===t})),e.next=18,this.$refs.photoSwipeView.init(this.additionalImages,a,i,this.totalCount,this.galleryId);case 18:Vd.commit("updateLoading",!1);case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"page",get:function(){return this.$route.query.page?Number(this.$route.query.page):1}},{key:"loading",get:function(){return Vd.getters.loading}},{key:"watchedProps",get:function(){return"".concat(this.page,"|").concat(this.galleryId)}},{key:"numberOfPages",get:function(){return Math.max(1,Math.ceil(this.totalCount/me.PaginationPageSize))}},{key:"portrait",get:function(){return window.innerHeight>window.innerWidth}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])()],wu.prototype,"galleryId",void 0),Object(d["a"])([Object(p["d"])("watchedProps")],wu.prototype,"loadData",null),wu=Object(d["a"])([Object(p["a"])({components:{ImageRow:gl,GalleryHeader:Hl,PhotoSwipeView:bu}})],wu);var ku=wu,_u=ku,ju=(a("92e8"),Object(y["a"])(_u,Zo,el,!1,null,"471f3500",null)),xu=ju.exports,Ou=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("p",[a("router-link",{attrs:{to:"/gallery/"}},[e._v("\n            "+e._s(e.$t("message.AllGalleries"))+"\n        ")]),e._v("\n        / \n        "),a("router-link",{attrs:{to:"/gallery/"+e.galleryId+"/"}},[e._v("\n            "+e._s(e.title)+"\n        ")]),e._v(" \n        / "),a("router-link",{attrs:{to:"/gallery/"+e.galleryId+"/?page="+e.page}},[e._v("\n            "+e._s(e.page)+"\n        ")]),e._v(" \n        / "+e._s(e.$t("message.UploadImages"))+"\n    ")],1),a("h2",[e._v("\n        "+e._s(e.$t("message.UploadImages"))+"\n    ")]),e.uploading?e._e():a("button",{staticClass:"btn btn-lg btn-success",attrs:{id:"file-input-button"},on:{click:e.selectFilesClick}},[a("span",{staticClass:"oi oi-plus",attrs:{"aria-hidden":"true"}}),e._v("\n        "+e._s(e.$t("message.SelectFiles"))+"\n    ")]),a("input",{attrs:{id:"file-input",type:"file",multiple:e.uploadMultiple,hidden:"",accept:"image/x-png,image/gif,image/jpeg"},on:{change:e.filesSelected}}),e._l(e.files,(function(t,n){return a("ImageUploadStatus",{key:n,ref:"imageUploadStatus_"+n,refInFor:!0,attrs:{galleryId:e.galleryId,uploadIndex:n},on:{finishedUpload:e.finishedUpload,finishedProcessing:e.finishedProcessing}})})),a("UploadFinished",{ref:"uploadFinished",attrs:{failedCount:e.failedCount,successCount:e.successCount,backLink:"/gallery/"+e.galleryId+"/?page="+e.page}})],2)},Cu=[],Pu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-2"},[a("img",{staticClass:"thumbnail",attrs:{id:"thumbnail-img-"+e.uploadIndex}})]),a("div",{staticClass:"col-6"},[a("b-progress",{attrs:{value:e.progress,max:100,height:"2rem","show-progress":"",animated:e.animated,variant:e.variant}})],1),a("div",{staticClass:"col-4"},["pending"===e.state?a("div",{staticClass:"pending"},[e._v("\r\n                "+e._s(e.$t("message.Pending"))+"\r\n            ")]):e._e(),"uploading"===e.state?a("div",{staticClass:"uploading"},[e._v("\r\n                "+e._s(e.$t("message.Uploading"))+"\r\n            ")]):e._e(),"processing"===e.state?a("div",{staticClass:"processing"},[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}}),e._v("\r\n                "+e._s(e.$t("message.Processing"))+"\r\n            ")]):e._e(),"done"===e.state?a("div",{staticClass:"done"},[a("span",{staticClass:"oi oi-check"}),e._v("\r\n                "+e._s(e.$t("message.Done"))+"\r\n            ")]):e._e(),"failed"===e.state?a("div",{staticClass:"failed"},[a("span",{staticClass:"oi oi-x"}),e._v("\r\n                "+e._s(e.$t("message.Failed"))+"\r\n            ")]):e._e()])]),a("hr")])},Iu=[],Su=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.state="pending",e.fileReader=new FileReader,e.file=null,e.progress=0,e.fileSize=0,e.req=new XMLHttpRequest,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"loadFile",value:function(e){this.file=e,this.state="pending",this.progress=0,this.fileReader.onload=this.fileReaderOnLoad,this.fileReader.readAsDataURL(e)}},{key:"upload",value:function(){if(this.galleryId&&this.file&&"pending"===this.state){this.state="uploading",this.fileSize=this.file.size,this.progress=1,this.req=new XMLHttpRequest,this.req.responseType="json";var e=new FormData;e.append("picture",this.file),e.append("gallery_id",this.galleryId.toString()),this.req.onload=this.onLoad,this.req.upload.onprogress=this.updateProgress,this.req.onerror=this.transferFailed,this.req.open("POST","".concat(me.BaseApiUrl).concat(me.ImageAPI)),this.req.setRequestHeader("Authorization","Bearer ".concat(Vd.state.access_token)),this.req.send(e)}}},{key:"mounted",value:function(){}},{key:"updateProgress",value:function(e){this.progress=Math.min(100,e.loaded/this.fileSize*100),this.progress>99&&(this.state="processing",this.$emit("finishedUpload",this.uploadIndex))}},{key:"onLoad",value:function(e){200===this.req.status?(this.state="done",this.$emit("finishedProcessing",this.uploadIndex)):this.transferFailed(e)}},{key:"transferFailed",value:function(e){this.state="failed",this.$emit("finishedUpload",this.uploadIndex),this.$emit("finishedProcessing",this.uploadIndex)}},{key:"fileReaderOnLoad",value:function(e){var t=document.getElementById("thumbnail-img-".concat(this.uploadIndex));t.src=e.target.result}},{key:"animated",get:function(){switch(this.state){case"failed":case"done":return!1;default:return!0}}},{key:"variant",get:function(){switch(this.state){case"failed":return"danger";case"processing":return"warning";case"done":return"success";default:return"default"}}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:0})],Su.prototype,"galleryId",void 0),Object(d["a"])([Object(p["b"])({default:0})],Su.prototype,"uploadIndex",void 0),Su=Object(d["a"])([p["a"]],Su);var Tu=Su,Ru=Tu,Eu=(a("b44f"),Object(y["a"])(Ru,Pu,Iu,!1,null,"3fb70ae5",null)),zu=Eu.exports,Au=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"modal",attrs:{"ok-only":"",centered:"","no-close-on-esc":!0,"no-close-on-backdrop":!0,title:e.$t("message.UploadFinished"),okTitle:e.$t("message.Ok"),cancelTitle:e.$t("message.Cancel"),"button-size":"lg"},on:{ok:e.ok}},[a("div",{staticClass:"result-container"},[0===e.failedCount?a("div",[a("h1",[a("span",{staticClass:"rounded-circle success"},[a("span",{staticClass:"oi oi-check"})])]),a("h4",[e._v("\n                "+e._s(e.$t("message.AllUploadsSuccessful"))+"\n            ")])]):e._e(),e.failedCount>0?a("div",[a("h1",[a("span",{staticClass:"rounded-circle fail"},[a("span",{staticClass:"oi oi-x"})])]),a("h4",[e._v("\n                "+e._s(e.$t("message.XSuccessfulYFailed",{success:e.successCount,fail:e.failedCount}))+"\n            ")])]):e._e()])])},Mu=[],Du=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(){this.$refs.modal.show()}},{key:"ok",value:function(e){!this.backLink||this.failedCount&&0!==this.failedCount||this.$router.push(this.backLink)}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:0})],Du.prototype,"failedCount",void 0),Object(d["a"])([Object(p["b"])({default:0})],Du.prototype,"successCount",void 0),Object(d["a"])([Object(p["b"])({default:""})],Du.prototype,"backLink",void 0),Du=Object(d["a"])([Object(p["a"])({components:{}})],Du);var Nu=Du,Lu=Nu,$u=(a("33b8"),Object(y["a"])(Lu,Au,Mu,!1,null,"568d2512",null)),Bu=$u.exports,Uu=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.files=[],e.uploading=!1,e.uploadingIndex=0,e.uploadMultiple=!0,e.failedCount=0,e.successCount=0,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ae.isFirefox()&&ae.isAndroid()&&(this.uploadMultiple=!1),this.$nextTick((function(){t.appFilesToUpload.length>0?t.processFiles(t.appFilesToUpload):t.selectFilesClick()})),Vd.dispatch("updateRouteLoaded");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"filesUploadedFromApp",value:function(){var e=document.getElementById("file-input-button");e.offsetParent&&this.appFilesToUpload.length>0&&this.processFiles(this.appFilesToUpload)}},{key:"selectFilesClick",value:function(){if(ae.isXamarinApp()&&ae.isAndroid())window.location.href="/xamarin_external_filepicker_multiple/";else{var e=document.getElementById("file-input");e.click()}}},{key:"filesSelected",value:function(e){var t=e.target.files||e.dataTransfer.files;this.processFiles(t)}},{key:"processFiles",value:function(e){var t=this;0===e.length?this.$router.push("/gallery/".concat(this.galleryId,"/?page=").concat(this.page)):(this.files=e,this.uploading=!0,this.uploadingIndex=0,this.$nextTick((function(){t.startUpload()})))}},{key:"startUpload",value:function(){Vd.commit("updateLoading",!0),Vd.dispatch("setFilesToUpload",[]),this.failedCount=0,this.successCount=0;for(var e=0;e<this.files.length;e++){var t="imageUploadStatus_".concat(e),a=this.files[e],n=this.$refs[t][0];n&&n.loadFile(a)}Vd.commit("updateLoading",!1);var i=this.$refs["imageUploadStatus_0"][0];i.upload()}},{key:"finishedUpload",value:function(e){if(e<this.files.length-1){var t=this.$refs["imageUploadStatus_".concat(e+1)][0];t.upload()}}},{key:"finishedProcessing",value:function(e){for(var t=0,a=0,n=0;n<this.files.length;n++){var i="imageUploadStatus_".concat(n),r=this.$refs[i][0];"failed"===r.state?a++:"done"===r.state&&t++}if(a+t===this.files.length){this.successCount=t,this.failedCount=a;var s=this.$refs.uploadFinished;s.show()}}},{key:"title",get:function(){return this.$route.query.title}},{key:"page",get:function(){return this.$route.query.page?Number(this.$route.query.page):1}},{key:"appFilesToUpload",get:function(){return Vd.state.filesToUpload}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])()],Uu.prototype,"galleryId",void 0),Object(d["a"])([Object(p["d"])("appFilesToUpload")],Uu.prototype,"filesUploadedFromApp",null),Uu=Object(d["a"])([Object(p["a"])({components:{ImageUploadStatus:zu,UploadFinished:Bu}})],Uu);var Gu=Uu,Hu=Gu,Wu=Object(y["a"])(Hu,Ou,Cu,!1,null,"394d5d71",null),Fu=Wu.exports,Yu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"gallery-container"}},[a("div",{staticClass:"controls-container"},[a("p",[a("router-link",{attrs:{to:"/family/tree/"}},[e._v("\n                "+e._s(e.$t("message.Family"))+"\n            ")]),e._v("\n            /\n            "),a("router-link",{attrs:{to:"/family/profile/"}},[e._v("\n                "+e._s(e.$t("message.Profile"))+"\n            ")]),e._v("\n            / "+e._s(e.$t("message.ImagesOfX",{name:e.personName}))+"\n        ")],1),a("div",{staticClass:"title-description"},[a("h2",[a("span",[e._v(" "+e._s(e.$t("message.ImagesOfX",{name:e.personName})))])])])]),a("div",{attrs:{id:"image-container"}},e._l(e.imageRows,(function(t){return a("ImageRow",{key:e.imageRows.indexOf(t),attrs:{rowIndex:e.imageRows.indexOf(t),imageRow:t,width:e.galleryWidth,editMode:e.editMode},on:{selectionChanged:e.selectionChanged,imageClick:e.imageClick}})})),1),e.showNoImagesMessage?a("div",{staticClass:"no-images-message"},[e._v("\n        "+e._s(e.$t("message.NoImagesOfPerson",{name:e.personName}))+"\n        "),a("router-link",{attrs:{to:"/gallery/"},on:{click:e.addImages}},[e._v(e._s(e.$t("message.GoToGalleries")))])],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>1,expression:"totalCount > 1"}],staticClass:"overflow-auto"},[a("b-pagination-nav",{attrs:{align:"center","link-gen":e.linkGen,"number-of-pages":e.numberOfPages,"use-router":""}})],1),a("PhotoSwipeView",{ref:"photoSwipeView",on:{imageEdited:e.imageEdited}})],1)},Ku=[],qu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pswp",attrs:{tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"pswp__bg"}),a("div",{staticClass:"pswp__scroll-wrap"},[e._m(0),a("div",{staticClass:"pswp__ui pswp__ui--hidden"},[a("div",{staticClass:"pswp__top-bar"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loadingMore,expression:"!loadingMore"}],staticClass:"pswp__counter"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingMore,expression:"loadingMore"}],staticClass:"loading-more"},[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}})]),a("button",{staticClass:"pswp__button pswp__button--close",attrs:{title:e.$t("message.Close")}}),a("button",{staticClass:"pswp__button pswp__button--download custom-button oi oi-data-transfer-download",attrs:{title:e.$t("message.Download")}}),a("button",{directives:[{name:"show",rawName:"v-show",value:e.displayMap,expression:"displayMap"}],staticClass:"pswp__button pswp__button--map custom-button oi oi-map",attrs:{title:e.$t("message.Map")}}),a("button",{staticClass:"pswp__button pswp__button--editimage custom-button oi oi-pencil",attrs:{title:e.$t("message.EditImage")}}),a("button",{staticClass:"pswp__button pswp__button--tags custom-button oi oi-tag",attrs:{title:e.$t("message.Tags")}}),a("button",{staticClass:"pswp__button pswp__button--fs",attrs:{title:e.$t("message.Fullscreen")}}),e._m(1)]),a("button",{staticClass:"pswp__button pswp__button--arrow--left",attrs:{title:e.$t("message.Previous")}}),a("button",{staticClass:"pswp__button pswp__button--arrow--right",attrs:{title:e.$t("message.Next")}}),a("div",{staticClass:"pswp__caption"},[a("div",{staticClass:"pswp__caption__center"}),a("div",{staticClass:"caption-center"},[a("span",{attrs:{id:"caption-description"}}),e._v("\r\n                     \r\n                    "),a("span",{staticClass:"go-to-gallery",on:{click:e.goToGallery}},[e._v("\r\n                        "+e._s(e.$t("message.GoToGallery"))+" >>\r\n                    ")])])])])]),a("MapPopUp",{ref:"mapPopUp",on:{onHidden:e.popupHidden}}),a("EditImage",{ref:"editImage",on:{imageEdited:e.imageEdited,onHidden:e.popupHidden}}),a("TaggingOverlay",{ref:"taggingOverlay",on:{taggingOverlayClosed:e.popupHidden}})],1)},Vu=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pswp__container"},[a("div",{staticClass:"pswp__item"}),a("div",{staticClass:"pswp__item"}),a("div",{staticClass:"pswp__item"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pswp__preloader"},[a("div",{staticClass:"pswp__preloader__icn"},[a("div",{staticClass:"pswp__preloader__cut"},[a("div",{staticClass:"pswp__preloader__donut"})])])])}],Qu=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.personId="0",e.loadingMore=!1,e.displayMap=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"init",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a,n,i,r){var s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.personId=r,this.photoswipeWrapper=new Xl(t,a),this.photoswipeWrapper.photoswipe.listen("afterChange",this.afterChange),this.photoswipeWrapper.photoswipe.listen("download",this.download),this.photoswipeWrapper.photoswipe.listen("map",this.showMap),this.photoswipeWrapper.photoswipe.listen("editImage",this.editImage),this.photoswipeWrapper.photoswipe.listen("tags",this.toggleTagging),s="".concat(me.BaseApiUrl).concat(me.ImageAPI,"?person_id=").concat(this.personId,"&page="),o=function(e){return s+e.toString()},!(t.length<i)){e.next=14;break}return this.loadingMore=!0,e.next=13,this.photoswipeWrapper.loadImagesFromOtherPages(n,i,o);case 13:this.loadingMore=!1;case 14:case"end":return e.stop()}}),e,this)})));function t(t,a,n,i,r){return e.apply(this,arguments)}return t}()},{key:"afterChange",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.photoswipeWrapper){e.next=9;break}if(t=this.photoswipeWrapper.photoswipe.currItem.image,a=document.getElementById("caption-description"),a.innerHTML=t.description,this.displayMap=!(0===t.latitude&&0===t.longitude),n=this.$refs.taggingOverlay,!n.showTagging){e.next=9;break}return e.next=9,n.switchImage(t);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"download",value:function(){if(this.photoswipeWrapper){var e=this.photoswipeWrapper.photoswipe.currItem.image.original_image;window.open(e,"_blank")}}},{key:"goToGallery",value:function(){if(this.photoswipeWrapper){var e=this.photoswipeWrapper.photoswipe.currItem;this.$router.push("/gallery/".concat(e.image.gallery_id,"/"))}}},{key:"showMap",value:function(){if(this.photoswipeWrapper){var e=this.photoswipeWrapper.photoswipe.currItem.image;this.$refs.mapPopUp.show([e.latitude,e.longitude]),this.photoswipeWrapper.photoswipe.options.arrowKeys=!1,this.photoswipeWrapper.photoswipe.options.escKey=!1}}},{key:"editImage",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.photoswipeWrapper){e.next=6;break}return t=this.photoswipeWrapper.photoswipe.currItem.image,e.next=4,this.$refs.editImage.show(t);case 4:this.photoswipeWrapper.photoswipe.options.arrowKeys=!1,this.photoswipeWrapper.photoswipe.options.escKey=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"imageEdited",value:function(e){this.photoswipeWrapper&&this.photoswipeWrapper.updateImage(e),this.$emit("imageEdited",e)}},{key:"popupHidden",value:function(){this.photoswipeWrapper&&(this.photoswipeWrapper.photoswipe.options.arrowKeys=!0,this.photoswipeWrapper.photoswipe.options.escKey=!0)}},{key:"toggleTagging",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.photoswipeWrapper&&(this.$refs.taggingOverlay.toggle(this.photoswipeWrapper),this.photoswipeWrapper.photoswipe.options.arrowKeys=!1,this.photoswipeWrapper.photoswipe.options.escKey=!1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),t}(p["c"]);Qu=Object(d["a"])([Object(p["a"])({components:{MapPopUp:rc,EditImage:bc,TaggingOverlay:mu}})],Qu);var Ju=Qu,Xu=Ju,Zu=(a("e6ab"),Object(y["a"])(Xu,qu,Vu,!1,null,"2982b1a4",null)),ed=Zu.exports,td=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.personName="",e.showNoImagesMessage=!1,e.editMode=!1,e.totalCount=0,e.images=[],e.imageRows=[],e.selectedImageIds=[],e.galleryWidth=800,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vd.dispatch("restoreSession");case 3:return t=Vd.getters.selectedPerson,t?this.personName=t.name:this.$router.push("/family/profile/"),e.next=7,this.loadData();case 7:window.addEventListener("resize",this.setDisplaySizes),window.onresize=function(){return a.setDisplaySizes()},Vd.dispatch("updateRouteLoaded"),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),this.$router.push("/accounts/login/?next=".concat(this.$router.currentRoute.fullPath));case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"linkGen",value:function(e){return"/person_gallery/?person_id=".concat(this.personId,"&page=").concat(e)}},{key:"loadData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),this.showNoImagesMessage=!1,e.prev=2,t=this.loadImageData(),e.next=6,t;case 6:0===this.images.length&&(this.showNoImagesMessage=!0),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),Vd.commit("setErrorMessage",e.t0);case 12:Vd.commit("updateLoading",!1);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadImageData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),e.prev=1,t={uri:"".concat(me.BaseApiUrl).concat(me.ImageAPI,"?person_id=").concat(this.personId,"&page=").concat(this.page),headers:Vd.getters.ajaxHeader,json:!0},e.next=5,ue["get"](t);case 5:a=e.sent,this.images=a.results,this.setDisplaySizes(),this.totalCount=a.count,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),Vd.commit("setErrorMessage",e.t0);case 14:Vd.commit("updateLoading",!1);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setDisplaySizes",value:function(){var e=document.getElementById("gallery-container");e.style.minHeight="".concat(window.innerHeight+10,"px");var t=document.getElementById("image-container");this.galleryWidth=t.clientWidth-1;var a=window.devicePixelRatio||1;this.portrait;var n=new Array,i=new Array,r=0,s=!0,o=!1,l=void 0;try{for(var c,u=this.images[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;d.thumbnail||(d.thumbnail_width=200,d.thumbnail_height=200),i.push(d),r+=d.thumbnail_width,r>=this.galleryWidth&&(n.push(i),i=new Array,r=0)}}catch(p){o=!0,l=p}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}n.push(i);this.imageRows=n}},{key:"editModeChanged",value:function(e){this.editMode=e}},{key:"selectionChanged",value:function(e,t){var a=new Array,n=!0,i=!1,r=void 0;try{for(var s,o=this.images[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;l.id===e&&(l.selected=t),l.selected&&a.push(l.id)}}catch(c){i=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.selectedImageIds=a}},{key:"imagesDeleted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadImageData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"imageClick",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.images.findIndex((function(e){return e.id===t})),e.next=3,this.$refs.photoSwipeView.init(this.images,n,this.page,this.totalCount,this.personId);case 3:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"imageEdited",value:function(e){var t=0;for(t=0;t<this.images.length;t++)if(e.id===this.images[t].id)return this.images[t]=e,void this.setDisplaySizes()}},{key:"page",get:function(){return this.$route.query.page?Number(this.$route.query.page):1}},{key:"personId",get:function(){return Vd.state.person_id}},{key:"loading",get:function(){return Vd.getters.loading}},{key:"watchedProps",get:function(){return"".concat(this.page,"|").concat(this.personId)}},{key:"numberOfPages",get:function(){return Math.max(1,Math.ceil(this.totalCount/me.PaginationPageSize))}},{key:"portrait",get:function(){return window.innerHeight>window.innerWidth}}]),t}(p["c"]);Object(d["a"])([Object(p["d"])("watchedProps")],td.prototype,"loadData",null),td=Object(d["a"])([Object(p["a"])({components:{ImageRow:gl,PhotoSwipeView:ed}})],td);var ad=td,nd=ad,id=(a("9aea"),Object(y["a"])(nd,Yu,Ku,!1,null,"23e81073",null)),rd=id.exports,sd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"fullscreen_map",attrs:{id:"gallery-map"},on:{click:e.mapClick}}),a("GalleryMapActionButton",{attrs:{galleryId:e.galleryId}}),a("PhotoSwipeView",{ref:"photoSwipeView",on:{imageEdited:e.imageEdited}})],1)},od=[],ld=function(){function e(){Object(s["a"])(this,e),this.count=0,this.previous="",this.next="",this.results=[]}return Object(o["a"])(e,null,[{key:"PAGE_SIZE",value:function(){return me.PaginationPageSize}},{key:"PAGE_COUNT",value:function(e){return Math.max(1,Math.ceil(e/me.PaginationPageSize))}}]),e}(),cd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"controls-container"},[a("b-button",{staticClass:"gallery-button action-button",attrs:{variant:"light"},on:{click:e.galleryButtonClicked}},[a("span",{staticClass:"oi oi-list"})])],1)},ud=[],dd=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"galleryButtonClicked",value:function(){this.galleryId&&this.$router.push("/gallery/".concat(this.galleryId,"/"))}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])({default:0})],dd.prototype,"galleryId",void 0),dd=Object(d["a"])([Object(p["a"])({components:{}})],dd);var pd=dd,hd=pd,md=(a("3e0d"),Object(y["a"])(hd,cd,ud,!1,null,"5832ff0c",null)),gd=md.exports,fd=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.images=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.initializeSize(),e.next=4,Vd.dispatch("restoreSession");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$router.push("/accounts/login/?next=".concat(this.$router.currentRoute.fullPath));case 9:return e.next=11,this.loadData();case 11:this.renderMap(),t=document.getElementById("gallery-map"),t&&t.offsetParent&&(a=t.getBoundingClientRect().top,this.monitorHeightChange(a)),Vd.dispatch("updateRouteLoaded");case 15:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"initializeSize",value:function(){var e=document.getElementById("gallery-map");window.getComputedStyle(e);if(e.offsetParent){var t=window.innerHeight-e.getBoundingClientRect().top-10;e.style.height="".concat(t,"px"),e.style.width="".concat(window.innerWidth-10,"px")}}},{key:"loadData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),e.prev=1,t=this.loadImageData(),e.next=5,t;case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),Vd.commit("setErrorMessage",e.t0);case 10:Vd.commit("updateLoading",!1);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadImageData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s,o,l,c,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadImageFromPage(1);case 3:if(t=e.sent,this.images=t.results,a=ld.PAGE_COUNT(t.count),!(a>1)){e.next=31;break}for(n=new Array,i=2;i<=a;i++)n.push(this.loadImageFromPage(i));return e.next=11,Promise.all(n);case 11:for(r=e.sent,s=!0,o=!1,l=void 0,e.prev=15,c=r[Symbol.iterator]();!(s=(u=c.next()).done);s=!0)p=u.value,(d=this.images).push.apply(d,Object(N["a"])(p.results));e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](15),o=!0,l=e.t0;case 23:e.prev=23,e.prev=24,s||null==c.return||c.return();case 26:if(e.prev=26,!o){e.next=29;break}throw l;case 29:return e.finish(26);case 30:return e.finish(23);case 31:e.next=36;break;case 33:e.prev=33,e.t1=e["catch"](0),Vd.commit("setErrorMessage",e.t1);case 36:case"end":return e.stop()}}),e,this,[[0,33],[15,19,23,31],[24,,26,30]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadImageFromPage",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={uri:"".concat(me.BaseApiUrl).concat(me.ImageAPI,"?page=").concat(t,"&gallery_id=").concat(this.galleryId),headers:Vd.getters.ajaxHeader,json:!0},e.next=3,ue["get"](a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"renderMap",value:function(){var e=this.images.filter((function(e){return 0!==e.longitude&&0!==e.latitude}));this.map&&(this.map.off(),this.map.remove());var t={token:me.MapboxToken,detectRetina:!0,zoomOffset:-1,tileSize:512},n=gn.a.tileLayer(me.MapboxTileAPi,t),i={center:this.getCentre(e),zoom:8,zoomControl:!1,minZoom:2,scrollWheelZoom:!0,maxBounds:[[-90,-150],[90,150]],layers:[n]};this.map=gn.a.map("gallery-map",i),delete gn.a.Icon.Default.prototype._getIconUrl,gn.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),this.map.addControl(gn.a.control.zoom({position:"bottomleft"})),this.displayMapPoints(e);var r=this.map;window.setTimeout((function(){return r.invalidateSize()}),100)}},{key:"getCentre",value:function(e){var t=!0,a=!1,n=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;if(0!==s.latitude&&0!==s.longitude)return[s.latitude,s.longitude]}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return me.DefaultLocation}},{key:"displayMapPoints",value:function(e){var t=gn.a.markerClusterGroup(),a=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value,l='\n              <div style="width:'.concat(o.thumbnail_width,"px; height:").concat(o.thumbnail_height,'px;">\n                <img id="map-thumb-').concat(o.id,'" class="gallery-map-thumb"\n                  src="').concat(o.thumbnail,'" alt="').concat(o.title,'"/>\n              </div>\n            '),c=gn.a.marker(new gn.a.LatLng(o.latitude,o.longitude));c.bindPopup(l),t.addLayer(c)}}catch(u){n=!0,i=u}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}this.map&&this.map.addLayer(t)}},{key:"mapClick",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s,o,l,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0,n=!0,i=!1,r=void 0,e.prev=4,s=this.images[Symbol.iterator]();case 6:if(n=(o=s.next()).done){e.next=21;break}if(l=o.value,c="map-thumb-".concat(l.id),u=document.getElementById(c),!u){e.next=17;break}if(d=u.getBoundingClientRect(),!d){e.next=17;break}if(!(d.left<t.clientX&&t.clientX<d.right)){e.next=17;break}if(!(d.top<t.clientY&&t.clientY<d.bottom)){e.next=17;break}return e.next=17,this.imageClick(l.id,a);case 17:a++;case 18:n=!0,e.next=6;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](4),i=!0,r=e.t0;case 27:e.prev=27,e.prev=28,n||null==s.return||s.return();case 30:if(e.prev=30,!i){e.next=33;break}throw r;case 33:return e.finish(30);case 34:return e.finish(27);case 35:case"end":return e.stop()}}),e,this,[[4,23,27,35],[28,,30,34]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"imageClick",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.galleryId){e.next=3;break}return e.next=3,this.$refs.photoSwipeView.init(this.images,a,0,this.images.length,this.galleryId,!0);case 3:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"imageEdited",value:function(e){var t=0;for(t=0;t<this.images.length;t++)if(e.id===this.images[t].id)return this.images[t]=e,void this.renderMap()}},{key:"monitorHeightChange",value:function(e){var t=this,a=document.getElementById("gallery-map");if(a&&this.map&&a.offsetParent){var n=a.getBoundingClientRect().top;n+10<e&&(this.initializeSize(),this.map.invalidateSize()),window.setTimeout((function(){return t.monitorHeightChange(n)}),1e3)}}}]),t}(p["c"]);Object(d["a"])([Object(p["b"])()],fd.prototype,"galleryId",void 0),fd=Object(d["a"])([Object(p["a"])({components:{GalleryMapActionButton:gd,PhotoSwipeView:bu}})],fd);var vd=fd,yd=vd,bd=(a("bb29"),a("9b06"),Object(y["a"])(yd,sd,od,!1,null,"14ce351e",null)),wd=bd.exports,kd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container signup-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}]},[a("h3",[e._v("\n          "+e._s(e.$t("message.InviteConfirmation"))+" \n      ")]),a("p",[e._v("\n          "+e._s(e.$t("message.HelloName",{name:e.name}))+" \n      ")]),a("p",[e._v("\n          "+e._s(e.$t("message.YouHaveBeenInvited",{invitedBy:e.userWhoInvitedYou}))+" \n      ")]),a("p",[e._v("\n          "+e._s(e.$t("message.PleaseCreatePassword"))+" \n      ")]),e.hasConfirmationCode?a("form",{staticClass:"form-password-reset",attrs:{role:"form"},on:{submit:function(t){return t.preventDefault(),e.onSubmit()}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[e._v(e._s(e.$t("message.Password")))]),a("PasswordBox",{model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"passwordConfirmation"}},[e._v(e._s(e.$t("message.PasswordConfirmation")))]),a("PasswordBox",{model:{value:e.passwordConfirmation,callback:function(t){e.passwordConfirmation=t},expression:"passwordConfirmation"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPwnedPassword,expression:"isPwnedPassword"}],staticClass:"alert alert-danger"},[a("strong",[e._v(e._s(e.$t("message.PasswordBreach1")))]),a("div",[e._v(e._s(e.$t("message.PasswordBreach2")))]),a("div",[e._v("\n              "+e._s(e.$t("message.ForMoreInformation"))+"\n              "),a("a",{attrs:{href:"https://haveibeenpwned.com/Passwords"}},[e._v("https://haveibeenpwned.com/Passwords")])])]),a("b-alert",{attrs:{variant:"danger"},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n              "+e._s(e.errorMessage)+"\n          ")]),a("b-button",{staticClass:"submitButton",attrs:{type:"submit",disabled:e.submitDisabled,variant:"primary"}},[e._v("\n              "+e._s(e.$t("message.Confirm"))+"\n          ")])],1):e._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.confirmationTokenInvalid,expression:"confirmationTokenInvalid"}]},[a("h3",[e._v("\n          "+e._s(e.$t("message.CannotFindInvite"))+" \n      ")]),a("p",[e._v("\n          "+e._s(e.$t("message.CannotFindInviteDescription"))+" \n      ")])])])},_d=[],jd=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.password="",e.passwordConfirmation="",e.userWhoInvitedYou="",e.confirmationToken="",e.name="",e.emailAddress="",e.loaded=!1,e.confirmationTokenInvalid=!1,e.isPwnedPassword=!1,e.errorMessage="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.confirmationToken=this.$route.params.confirmationToken,Vd.commit("updateLoading",!0),e.prev=2,t={uri:"".concat(me.BaseApiUrl).concat(me.InviteEmailConfirmationAPI).concat(this.confirmationToken,"/"),json:!0},e.next=6,ue["get"](t);case 6:a=e.sent,yp.locale=A.match(a.language),this.name=a.person_name,this.emailAddress=a.email_address,this.userWhoInvitedYou=a.username_who_invited_person,this.loaded=!0,Vd.dispatch("updateRouteLoaded"),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](2),this.errorMessage=e.t0.toString(),this.confirmationTokenInvalid=!0;case 19:Vd.commit("updateLoading",!1);case 20:case"end":return e.stop()}}),e,this,[[2,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSubmit",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.errorMessage="",this.isPwnedPassword=!1,Vd.commit("updateLoading",!0),e.next=5,ge.getNumberOfPasswordBreaches(this.password);case 5:if(t=e.sent,!(t>0)){e.next=10;break}this.isPwnedPassword=!0,e.next=23;break;case 10:return e.prev=10,a={uri:"".concat(me.BaseApiUrl).concat(me.InviteEmailConfirmationAPI).concat(this.confirmationToken,"/"),body:{password:this.password},json:!0},e.next=14,ue["patch"](a);case 14:return e.sent,e.next=17,this.$store.dispatch("login",{email:this.emailAddress,password:this.password});case 17:this.$router.push("/family/tree/"),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](10),this.errorMessage=e.t0.toString();case 23:Vd.commit("updateLoading",!1);case 24:case"end":return e.stop()}}),e,this,[[10,20]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasConfirmationCode",get:function(){return this.confirmationToken.length>0}},{key:"submitDisabled",get:function(){return Vd.state.loading_count>0||(!this.password||this.password.length<me.MinPasswordLength||this.password!==this.passwordConfirmation)}},{key:"showError",get:function(){return this.errorMessage.length>0}}]),t}(p["c"]);jd=Object(d["a"])([Object(p["a"])({components:{PasswordBox:_e}})],jd);var xd=jd,Od=xd,Cd=(a("4d36"),Object(y["a"])(Od,kd,_d,!1,null,"508fab9a",null)),Pd=Cd.exports,Id=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container privacy-policy"},[a("h1",[e._v(e._s(e.$t("message.PrivacyPolicy")))]),a("h2",[e._v(e._s(e.$t("message.WhoAreWe")))]),a("p",[e._v(e._s(e.$t("message.WhoAreWeDescription")))]),a("div",{staticClass:"contact-details"},[a("div",[e._v("Tech Luminaire Ltd")]),a("div",[e._v("48 Villiers Street")]),a("div",[e._v("Coventry CV2 4HP")]),a("div",[e._v("United Kingdom")]),a("br"),a("div",[e._v(e._s(e.$t("message.CompanyContactEmail")))]),a("div",[e._v(e._s(e.$t("message.CompanyContactTelephone")))]),a("div",[e._v(e._s(e.$t("message.CompanyNumber")))]),a("div",[e._v(e._s(e.$t("message.CompanyVATNumber")))])]),a("h2",[e._v(e._s(e.$t("message.WhatInformationWeCollect")))]),a("p",[e._v(e._s(e.$t("message.WhatInformationWeCollectDescription")))]),a("p",[e._v(e._s(e.$t("message.WhatInformationWeCollectDescription2")))]),a("h2",[e._v(e._s(e.$t("message.WhatWeDoWithInformation")))]),a("p",[e._v(e._s(e.$t("message.WhatWeDoWithInformationDescription")))]),a("h2",[e._v(e._s(e.$t("message.HowWeStoreYourInformation")))]),a("p",[e._v(e._s(e.$t("message.HowWeStoreYourInformationDescription")))]),a("p",[e._v(e._s(e.$t("message.HowWeStoreYourInformationDescription2")))]),a("h2",[e._v(e._s(e.$t("message.YourDataProtectionRights")))]),a("p",[e._v(e._s(e.$t("message.YourDataProtectionRightsDescription")))]),a("h2",[e._v(e._s(e.$t("message.LinksToOtherWebsites")))]),a("p",[e._v(e._s(e.$t("message.LinksToOtherWebsitesDescription")))]),a("h2",[e._v(e._s(e.$t("message.HowToComplain")))]),a("p",[e._v(e._s(e.$t("message.HowToComplainDescription")))]),a("a",{attrs:{href:"https://ico.org.uk/"}},[e._v("https://ico.org.uk/")])])},Sd=[],Td=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(p["c"]);Td=Object(d["a"])([Object(p["a"])({components:{}})],Td);var Rd=Td,Ed=Rd,zd=(a("4b4e"),Object(y["a"])(Ed,Id,Sd,!1,null,"5c17221d",null)),Ad=zd.exports,Md=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"gallerylist-container"}},[a("div",{staticClass:"select-gallery-header"},[a("div",{staticClass:"title-description"},[a("h1",[e._v("\n                "+e._s(e.$t("message.SelectGallery"))+"\n            ")])]),a("div",{staticClass:"add-gallery-container"},[a("b-button",{staticClass:"select-gallery-add-button",attrs:{variant:"success",title:e.$t("message.CreateNewGallery")},on:{click:e.addGallery}},[a("sup",[a("small",[a("span",{staticClass:"oi oi-plus"})])]),a("span",{staticClass:"oi oi-folder"})])],1)]),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-hover"},[a("tbody",e._l(e.galleries,(function(t){return a("tr",{key:t.id,staticClass:"select-gallery-row",on:{click:function(a){return e.selectGallery(t)}}},[a("td",[e._v("\n                        "+e._s(t.title)+"\n                    ")])])})),0)])]),e.showNoImagesMessage?a("div",{staticClass:"no-images-message"},[e._v("\n        "+e._s(e.$t("message.NoGalleries"))+"\n        "),a("a",{attrs:{href:"#"},on:{click:e.addGallery}},[e._v(e._s(e.$t("message.AddNewGallery")))])]):e._e(),a("AddGallery",{ref:"addGallery",on:{galleryCreated:e.galleryCreated}})],1)},Dd=[],Nd=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.showNoImagesMessage=!1,e.galleries=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vd.dispatch("restoreSession");case 3:return e.next=5,this.loadData();case 5:Vd.dispatch("updateRouteLoaded"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$router.push("/accounts/login/?next=".concat(this.$router.currentRoute.fullPath));case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadData",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s,o,l,c,u,d,p,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Vd.commit("updateLoading",!0),e.prev=1,e.next=4,this.loadDatafromPage(1);case 4:for(t=e.sent,this.galleries=t.results,a=Math.max(1,Math.ceil(t.count/me.PaginationPageSize)),n=new Array,i=2;i<=a;i++)({uri:"".concat(me.BaseApiUrl).concat(me.GalleryAPI,"?page=").concat(i),headers:Vd.getters.ajaxHeader,json:!0}),r=this.loadDatafromPage(i),n.push(r);return e.next=11,Promise.all(n);case 11:for(s=e.sent,o=!0,l=!1,c=void 0,e.prev=15,u=s[Symbol.iterator]();!(o=(d=u.next()).done);o=!0)h=d.value,(p=this.galleries).push.apply(p,Object(N["a"])(h.results));e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](15),l=!0,c=e.t0;case 23:e.prev=23,e.prev=24,o||null==u.return||u.return();case 26:if(e.prev=26,!l){e.next=29;break}throw c;case 29:return e.finish(26);case 30:return e.finish(23);case 31:0===this.galleries.length&&(this.showNoImagesMessage=!0),e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](1),Vd.commit("setErrorMessage",e.t1);case 37:Vd.commit("updateLoading",!1);case 38:case"end":return e.stop()}}),e,this,[[1,34],[15,19,23,31],[24,,26,30]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadDatafromPage",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={uri:"".concat(me.BaseApiUrl).concat(me.GalleryAPI,"?page=").concat(t),headers:Vd.getters.ajaxHeader,json:!0},e.next=3,ue["get"](a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"selectGallery",value:function(e){window.console.log("GalleryList.selectGallery(galleryId: ".concat(e.id,")")),this.$router.push("/gallery/".concat(e.id,"/upload/"))}},{key:"addGallery",value:function(){this.$refs.addGallery.show()}},{key:"galleryCreated",value:function(e){this.galleries.unshift(e),this.showNoImagesMessage=!1}},{key:"loading",get:function(){return Vd.getters.loading}}]),t}(p["c"]);Nd=Object(d["a"])([Object(p["a"])({components:{AddGallery:Mo}})],Nd);var Ld=Nd,$d=Ld,Bd=(a("c5fb"),Object(y["a"])($d,Md,Dd,!1,null,"ccc788b2",null)),Ud=Bd.exports;n["default"].use(L["a"]);var Gd=new L["a"]({routes:[{path:"/family/:urlState?/:personId?/",name:"FamilyState",component:cr,props:!0},{path:"/person_gallery/",name:"PersonGalleryView",component:rd,props:!0},{path:"/",name:"home",component:oe},{path:"/about/",name:"about",component:Ae},{path:"/accounts/login/",name:"Login",component:Pe},{path:"/accounts/password_reset/",name:"PasswordReset",component:fr},{path:"/accounts/password_reset_confirmation/",name:"PasswordResetConfirmation",component:jr},{path:"/accounts/settings/",name:"Settings",component:ds},{path:"/accounts/sign_up/",name:"SignUp",component:ys},{path:"/accounts/sign_up_confirmation=:confirmationToken/",name:"SignUpConfirmationOld",component:Os,props:!0},{path:"/accounts/sign_up_confirmation/:confirmationToken/",name:"SignUpConfirmation",component:Os,props:!0},{path:"/accounts/invite_confirmation/:confirmationToken/",name:"InviteConfirmation",component:Pd,props:!0},{path:"/new_profile_photo/",name:"NewProfilePhoto",component:to},{path:"/gallery/",name:"GalleryList",component:Xo},{path:"/gallery/:galleryId/",name:"GalleryView",component:xu,props:!0},{path:"/gallery/:galleryId/upload/",name:"UploadImages",component:Fu,props:!0},{path:"/gallery/:galleryId/map/",name:"GalleryMap",component:wd,props:!0},{path:"/privacy_policy/",name:"PrivacyPolicy",component:Ad},{path:"/select_gallery/",name:"SelectGallery",component:Ud}]}),Hd={updateLoading:function(e,t){t?e.loading_count++:e.loading_count>0&&e.loading_count--},login:function(e,t){e.access_token=t.access_token,e.refresh_token=t.refresh_token,e.language=t.language,e.logged_in=!0,e.person_id=t.person_id,e.users_person_id=t.users_person_id,yp.locale!==e.language&&(yp.locale=e.language)},logout:function(e){e.access_token="",e.refresh_token="",e.logged_in=!1,e.person_id="0",e.users_person_id="0",e.people=[],e.relations=[]},changeLanguage:function(e,t){e.language=t,yp.locale!==t&&(yp.locale=t)},changePerson:function(e,t){e.person_id=t},setErrorMessage:function(e,t){var a=t.toString();a.length>500&&(a=a.substring(0,500)),e.error_message=a},setDebugMessage:function(e,t){e.debug_message=t},setPeople:function(e,t){e.people=t},setRelations:function(e,t){e.relations=t},addPeople:function(e,t){e.people=[].concat(Object(N["a"])(e.people),Object(N["a"])(t))},removePeople:function(e,t){e.people=e.people.filter((function(e){return t.indexOf(e)<0}))},addRelations:function(e,t){e.relations=[].concat(Object(N["a"])(e.relations),Object(N["a"])(t))},removeRelations:function(e,t){e.relations=e.relations.filter((function(e){return t.indexOf(e)<0}))},updatePerson:function(e,t){for(var a=0;a<e.people.length;a++)Number(e.people[a].id)===Number(t.id)&&n["default"].set(e.people,a,t)},changeCurrentGallery:function(e,t){e.currentGallery=t},setInitialRoute:function(e,t){e.initialRoute=t,t&&Gd.replace(t)},setFilesToUpload:function(e,t){e.filesToUpload=t},setUserAgent:function(e,t){e.userAgent=t}},Wd=Hd,Fd=a("7618"),Yd={changeLanguage:function(e,t){e.commit("changeLanguage",t),window.localStorage.setItem("language",t)},changePerson:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){var n,i,r,s,o,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=a,!(t.state.people.length>0)){e.next=22;break}for(n=t.state.users_person_id,i=!0,r=!1,s=void 0,e.prev=6,o=t.state.people[Symbol.iterator]();!(i=(l=o.next()).done);i=!0)c=l.value,Number(c.id)===Number(a)&&(n=c.id);e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),r=!0,s=e.t0;case 14:e.prev=14,e.prev=15,i||null==o.return||o.return();case 17:if(e.prev=17,!r){e.next=20;break}throw s;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return t.commit("changePerson",n),e.next=25,null;case 25:window.localStorage.setItem("person_id",n);case 26:case"end":return e.stop()}}),e,null,[[6,10,14,22],[15,,17,21]])})));function t(t,a){return e.apply(this,arguments)}return t}(),restoreSession:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.commit("updateLoading",!0),t.dispatch("restoreState"),t.state.access_token){e.next=7;break}throw t.commit("updateLoading",!1),new Error("No Access token");case 7:return e.prev=7,e.next=10,t.dispatch("verifyToken");case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e["catch"](7),new Error("Token verification failed");case 15:t.commit("updateLoading",!1);case 16:case"end":return e.stop()}}),e,null,[[7,12]])})));function t(t){return e.apply(this,arguments)}return t}(),saveState:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null;case 2:window.localStorage.setItem("access_token",t.state.access_token),window.localStorage.setItem("refresh_token",t.state.refresh_token),window.localStorage.setItem("language",t.state.language),window.localStorage.setItem("person_id",t.state.person_id.toString()),window.localStorage.setItem("users_person_id",t.state.users_person_id);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),restoreState:function(e){e.state.access_token=window.localStorage.getItem("access_token")||"",e.state.refresh_token=window.localStorage.getItem("refresh_token")||"",e.state.language=window.localStorage.getItem("language")||"",e.state.person_id=window.localStorage.getItem("person_id")||"0",e.state.users_person_id=window.localStorage.getItem("users_person_id")||"0",yp.locale!==e.state.language&&(yp.locale=e.state.language)},login:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("updateLoading",!0),n={uri:"".concat(he.BaseApiUrl).concat(he.ObtainTokenAPI),body:{email:a.email,password:a.password},json:!0},e.prev=2,e.next=5,ue["post"](n);case 5:i=e.sent,t.commit("login",{access_token:i.access,refresh_token:i.refresh,language:i.language,person_id:i.person_id,users_person_id:i.person_id}),t.dispatch("saveState"),e.next=13;break;case 10:throw e.prev=10,e.t0=e["catch"](2),e.t0;case 13:return e.prev=13,t.commit("updateLoading",!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));function t(t,a){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("updateLoading",!0),t.commit("logout"),e.next=4,t.dispatch("saveState");case 4:t.commit("updateLoading",!1);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),verifyToken:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("updateLoading",!0),a={uri:"".concat(he.BaseApiUrl).concat(he.VerifyTokenAPI),body:{token:t.state.access_token},json:!0},e.prev=2,e.next=5,ue["post"](a);case 5:e.sent,t.commit("login",{access_token:t.state.access_token,refresh_token:t.state.refresh_token,language:t.state.language,person_id:t.state.person_id,users_person_id:t.state.users_person_id}),e.next=19;break;case 9:return e.prev=9,e.t0=e["catch"](2),e.prev=11,e.next=14,t.dispatch("refreshToken");case 14:e.next=19;break;case 16:throw e.prev=16,e.t1=e["catch"](11),e.t1;case 19:return e.prev=19,t.commit("updateLoading",!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,9,19,22],[11,16]])})));function t(t){return e.apply(this,arguments)}return t}(),refreshToken:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("updateLoading",!0),a={uri:"".concat(he.BaseApiUrl).concat(he.RefreshTokenAPI),body:{refresh:t.state.refresh_token},json:!0},e.prev=2,e.next=5,ue["post"](a);case 5:n=e.sent,t.commit("login",{access_token:n.access,refresh_token:t.state.refresh_token,language:t.state.language,person_id:t.state.person_id,users_person_id:t.state.users_person_id}),t.dispatch("saveState"),e.next=13;break;case 10:throw e.prev=10,e.t0=e["catch"](2),e.t0;case 13:return e.prev=13,t.commit("updateLoading",!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));function t(t){return e.apply(this,arguments)}return t}(),loadTreeData:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("updateLoading",!0),a={uri:"".concat(he.BaseApiUrl).concat(he.PersonAPI),headers:t.getters.ajaxHeader,json:!0},n={uri:"".concat(he.BaseApiUrl).concat(he.RelationAPI),headers:t.getters.ajaxHeader,json:!0},e.prev=3,i=ue["get"](a),r=ue["get"](n),e.next=8,i;case 8:return s=e.sent,e.next=11,r;case 11:o=e.sent,t.commit("setPeople",s),t.commit("setRelations",o),t.commit("changePerson",t.state.person_id),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](3),t.commit("setErrorMessage",e.t0);case 20:t.commit("updateLoading",!1);case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));function t(t){return e.apply(this,arguments)}return t}(),removePerson:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){var n,i,r,s,o,l,c,u,d,p,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=Number(a),i=function(e,a){var n=t.state.users_person_id,i=!0,r=!1,s=void 0;try{for(var o,l=function(){var e=o.value;return t.state.people.filter((function(t){return Number(t.id)===e.from_person_id&&a!==e.from_person_id})).length?{v:Number(e.from_person_id)}:t.state.people.filter((function(t){return Number(t.id)===e.to_person_id&&a!==e.to_person_id})).length?{v:Number(e.to_person_id)}:void 0},c=e[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var u=l();if("object"===Object(Fd["a"])(u))return u.v}}catch(d){r=!0,s=d}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}return Number(n)},r=new Array,s=!0,o=!1,l=void 0,e.prev=6,c=t.state.relations[Symbol.iterator]();!(s=(u=c.next()).done);s=!0)d=u.value,d.from_person_id!==n&&d.to_person_id!==n||r.push(d);e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),o=!0,l=e.t0;case 14:e.prev=14,e.prev=15,s||null==c.return||c.return();case 17:if(e.prev=17,!o){e.next=20;break}throw l;case 20:return e.finish(17);case 21:return e.finish(14);case 22:p=i(r,n),t.dispatch("changePerson",p.toString()),h=t.state.people.filter((function(e){return e.id.toString()===a.toString()})),t.commit("removeRelations",r),t.commit("removePeople",h);case 27:case"end":return e.stop()}}),e,null,[[6,10,14,22],[15,,17,21]])})));function t(t,a){return e.apply(this,arguments)}return t}(),removeRelations:function(e,t){e.commit("removeRelations",t)},addPeople:function(e,t){e.commit("addPeople",t)},addRelations:function(e,t){e.commit("addRelations",t)},updatePerson:function(e,t){e.commit("updatePerson",t)},loadCurrentGalleryInfo:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t,a){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.state.currentGallery&&t.state.currentGallery.id===a){e.next=16;break}return t.commit("updateLoading",!0),n={uri:"".concat(he.BaseApiUrl).concat(he.GalleryAPI).concat(a,"/"),headers:t.getters.ajaxHeader,json:!0},e.prev=3,e.next=6,ue["get"](n);case 6:i=e.sent,t.commit("changeCurrentGallery",i),e.next=13;break;case 10:throw e.prev=10,e.t0=e["catch"](3),e.t0;case 13:return e.prev=13,t.commit("updateLoading",!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));function t(t,a){return e.apply(this,arguments)}return t}(),updateCurrentGallery:function(e,t){e.commit("changeCurrentGallery",t)},setInitialRoute:function(e,t){e.commit("setInitialRoute",t)},updateRouteLoaded:function(e){var t=Gd.currentRoute.path;e.state.initialRoute.startsWith(t)&&e.commit("setInitialRoute","")},setFilesToUpload:function(e,t){e.commit("setFilesToUpload",t)},setUserAgent:function(e,t){e.commit("setUserAgent",t)}},Kd=Yd;n["default"].use(j["a"]);var qd,Vd=new j["a"].Store({state:O,getters:D,mutations:Wd,actions:Kd}),Qd=qd=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.specialErrors=[qd.passwordBreached],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"onDismissed",value:function(){Vd.commit("setErrorMessage","")}},{key:"errorMessage",get:function(){return Vd.state.error_message}},{key:"showStandardError",get:function(){return!!(Vd.state.error_message&&this.specialErrors.indexOf(Vd.state.error_message)<0)&&Vd.state.error_message.length>0},set:function(e){e||Vd.commit("setErrorMessage","")}},{key:"showPasswordBreach",get:function(){return Vd.state.error_message===qd.passwordBreached}}]),t}(p["c"]);Qd.passwordBreached="passwordBreached",Qd=qd=Object(d["a"])([Object(p["a"])({})],Qd);var Jd=Qd,Xd=Jd,Zd=(a("9172"),Object(y["a"])(Xd,k,_,!1,null,"1c275204",null)),ep=Zd.exports,tp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"searchModal",attrs:{"hide-footer":"","hide-header":"","button-size":"lg"}},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("h2",[a("span",{staticClass:"oi oi-magnifying-glass search-prepend",attrs:{"aria-hidden":"true"}})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],staticClass:"form-control",attrs:{id:"search-box",type:"text",placeholder:e.$t("message.Search"),"aria-label":e.$t("message.Search"),"aria-describedby":"basic-addon1",autocomplete:"off"},domProps:{value:e.searchValue},on:{input:[function(t){t.target.composing||(e.searchValue=t.target.value)},function(t){return e.searchValue=t.target.value}]}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingResults,expression:"loadingResults"}],staticClass:"text-center spinner-container"},[a("b-spinner")],1),e.people.length>0?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-hover"},[a("tbody",e._l(e.people,(function(t){return a("tr",{key:t.id,on:{click:function(a){return e.selectPerson(t)}}},[a("td",{staticClass:"search-thumb-col"},[a("img",{staticClass:"search-thumb",attrs:{src:t.small_thumbnail}})]),a("td",[e._v("\n                        "+e._s(t.name)+"\n                    ")])])})),0)])]):e._e()])},ap=[],np=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.searchValue="",e.people=[],e.loadingResults=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"show",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchValue="",this.$refs.searchModal.show(),this.$nextTick((function(){var e=document.getElementById("search-box");e&&setTimeout((function(){e.focus(),e.select()}),100)}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"searchValueChanged",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.timeOutHandle&&window.clearTimeout(this.timeOutHandle),this.loadingResults=!0,this.timeOutHandle=setTimeout(Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.search();case 2:case"end":return e.stop()}}),e)}))),200);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"search",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s,o,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,Vd.state.people&&0!==Vd.state.people.length){e.next=4;break}return e.next=4,Vd.dispatch("loadTreeData");case 4:if(!(this.searchValue&&this.searchValue.length>0)){e.next=28;break}for(t=Vd.state.people.filter((function(e){return e.name.toLocaleLowerCase().indexOf(l.searchValue.toLocaleLowerCase())>-1})),a=!0,n=!1,i=void 0,e.prev=9,r=t[Symbol.iterator]();!(a=(s=r.next()).done);a=!0)o=s.value,o.small_thumbnail||(o.small_thumbnail="img/portrait_80.png");e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](9),n=!0,i=e.t0;case 17:e.prev=17,e.prev=18,a||null==r.return||r.return();case 20:if(e.prev=20,!n){e.next=23;break}throw i;case 23:return e.finish(20);case 24:return e.finish(17);case 25:this.people=t,e.next=29;break;case 28:this.people=[];case 29:e.next=34;break;case 31:e.prev=31,e.t1=e["catch"](0),Vd.commit("setErrorMessage",e.t1);case 34:this.loadingResults=!1;case 35:case"end":return e.stop()}}),e,this,[[0,31],[9,13,17,25],[18,,20,24]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"selectPerson",value:function(e){Vd.dispatch("changePerson",e.id),this.$router.currentRoute.path.includes("/family/")?Vd.dispatch("changePerson",e.id):this.$router.push("/family/tree/".concat(e.id,"/")),this.$refs.searchModal.hide()}}]),t}(p["c"]);Object(d["a"])([Object(p["d"])("searchValue")],np.prototype,"searchValueChanged",null),np=Object(d["a"])([Object(p["a"])({components:{}})],np);var ip=np,rp=ip,sp=(a("0825"),Object(y["a"])(rp,tp,ap,!1,null,"74eea71c",null)),op=sp.exports,lp=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){Vd.state.loading_count=0}},{key:"logout",value:function(){this.$store.dispatch("logout"),this.$router.push("/accounts/login/")}},{key:"searchClicked",value:function(){this.$refs.searchModal.show()}},{key:"logged_in",get:function(){return Vd.state.logged_in}},{key:"loading",get:function(){return Vd.getters.loading}}]),t}(p["c"]);lp=Object(d["a"])([Object(p["a"])({components:{Loading:w,ErrorModal:ep,Search:op}})],lp);var cp=lp,up=cp,dp=(a("034f"),Object(y["a"])(up,i,r,!1,null,null,null)),pp=dp.exports,hp=a("5f5b"),mp=a("a925"),gp=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,[{key:"navigateTo",value:function(e){Vd.dispatch("setInitialRoute",e)}},{key:"uploadSharedFiles",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s,o,l,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,Vd.commit("updateLoading",!0),this.navigateTo("/select_gallery/"),a=new Array,n=!0,i=!1,r=void 0,e.prev=7,s=t[Symbol.iterator]();case 9:if(n=(o=s.next()).done){e.next=22;break}return l=o.value,e.next=13,fetch(l.base64Image);case 13:return c=e.sent,e.next=16,c.arrayBuffer();case 16:u=e.sent,d=new File([u],l.fileName,{type:l.mimeType}),a.push(d);case 19:n=!0,e.next=9;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](7),i=!0,r=e.t0;case 28:e.prev=28,e.prev=29,n||null==s.return||s.return();case 31:if(e.prev=31,!i){e.next=34;break}throw r;case 34:return e.finish(31);case 35:return e.finish(28);case 36:Vd.dispatch("setFilesToUpload",a);case 37:return e.prev=37,Vd.commit("updateLoading",!1),e.finish(37);case 40:case"end":return e.stop()}}),e,this,[[0,,37,40],[7,24,28,36],[29,,31,35]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setUserAgent",value:function(e){Vd.dispatch("setUserAgent",e)}},{key:"uploadFileFromExternalPicker",value:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s,o,l,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,Vd.commit("updateLoading",!0),a=new Array,n=!0,i=!1,r=void 0,e.prev=6,s=t[Symbol.iterator]();case 8:if(n=(o=s.next()).done){e.next=21;break}return l=o.value,e.next=12,fetch(l.base64Image);case 12:return c=e.sent,e.next=15,c.arrayBuffer();case 15:u=e.sent,d=new File([u],l.fileName,{type:l.mimeType}),a.push(d);case 18:n=!0,e.next=8;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](6),i=!0,r=e.t0;case 27:e.prev=27,e.prev=28,n||null==s.return||s.return();case 30:if(e.prev=30,!i){e.next=33;break}throw r;case 33:return e.finish(30);case 34:return e.finish(27);case 35:Vd.dispatch("setFilesToUpload",a);case 36:return e.prev=36,Vd.commit("updateLoading",!1),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[0,,36,39],[6,23,27,35],[28,,30,34]])})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"Setup",value:function(t){var a=new e;t.navigateTo=a.navigateTo,t.uploadSharedFiles=a.uploadSharedFiles,t.setUserAgent=a.setUserAgent,t.uploadFileFromExternalPicker=a.uploadFileFromExternalPicker}}]),e}();a.d(t,"i18n",(function(){return yp}));var fp=a("d8e0"),vp=a("ead5");n["default"].config.productionTip=!1,n["default"].use(fp,he),n["default"].use(hp["a"]),n["default"].use(mp["a"]),n["default"].use(vp);var yp=new mp["a"]({locale:Vd.getters.language,messages:z});window.viewModel=new n["default"]({i18n:yp,router:Gd,store:Vd,render:function(e){return e(pp)}}).$mount("#app"),gp.Setup(window.viewModel)},ce41:function(e,t,a){},ce78:function(e,t,a){"use strict";var n=a("0e1e"),i=a.n(n);i.a},d047:function(e,t,a){},d6ed:function(e,t,a){},d714:function(e,t,a){},d892:function(e,t,a){},daa9:function(e,t,a){},db50:function(e,t,a){},de06:function(e,t,a){"use strict";var n=a("ca31"),i=a.n(n);i.a},e6ab:function(e,t,a){"use strict";var n=a("5c11"),i=a.n(n);i.a},e80e:function(e,t,a){},e880:function(e,t,a){},ea7d:function(e,t,a){},ee2c:function(e,t,a){},eefb:function(e,t,a){},f27f:function(e,t,a){},f2bc:function(e,t,a){},f56c:function(e,t,a){},f9bd:function(e,t,a){},fa93:function(e,t,a){"use strict";var n=a("426c"),i=a.n(n);i.a},fb36:function(e,t,a){}});